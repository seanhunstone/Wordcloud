{"version":3,"file":"whs.module.js","sources":["../src/utils/extend.js","../src/utils/transformData.js","../node_modules/minivents/dist/minivents.commonjs.js","../src/core/errors.js","../src/core/ModuleSystem.js","../node_modules/lodash-es/_freeGlobal.js","../node_modules/lodash-es/_root.js","../node_modules/lodash-es/_Symbol.js","../node_modules/lodash-es/_getRawTag.js","../node_modules/lodash-es/_objectToString.js","../node_modules/lodash-es/_baseGetTag.js","../node_modules/lodash-es/_overArg.js","../node_modules/lodash-es/_getPrototype.js","../node_modules/lodash-es/isObjectLike.js","../node_modules/lodash-es/isPlainObject.js","../node_modules/symbol-observable/es/ponyfill.js","../node_modules/symbol-observable/es/index.js","../node_modules/redux/es/createStore.js","../node_modules/redux/es/utils/warning.js","../node_modules/redux/es/compose.js","../node_modules/redux/es/index.js","../src/core/ModuleManager.js","../src/core/Component.js","../src/core/prototype/attributes.js","../src/core/MeshComponent.js","../src/core/LightComponent.js","../src/core/CameraComponent.js","../src/polyfill.js","../src/core/App.js","../src/core/Loop.js","../src/core/index.js","../src/components/lights/AmbientLight.js","../src/components/lights/DirectionalLight.js","../src/components/lights/HemisphereLight.js","../src/components/lights/PointLight.js","../src/components/lights/SpotLight.js","../src/components/lights/AreaLight.js","../src/components/lights/index.js","../src/components/cameras/CubeCamera.js","../src/components/cameras/OrthographicCamera.js","../src/components/cameras/PerspectiveCamera.js","../src/components/cameras/index.js","../src/components/meshes/Box.js","../src/components/meshes/Circle.js","../src/components/meshes/Cone.js","../src/components/meshes/Cylinder.js","../src/components/meshes/Dodecahedron.js","../src/components/meshes/Extrude.js","../src/components/meshes/Icosahedron.js","../src/components/meshes/Lathe.js","../src/components/meshes/Line.js","../src/components/meshes/Importer.js","../src/components/meshes/Octahedron.js","../src/components/meshes/Parametric.js","../src/components/meshes/Plane.js","../src/components/meshes/Polyhedron.js","../src/components/meshes/Ring.js","../src/components/meshes/Shape.js","../src/components/meshes/Sphere.js","../src/components/meshes/Tetrahedron.js","../src/components/meshes/Text.js","../src/components/meshes/Torus.js","../src/components/meshes/Torusknot.js","../src/components/meshes/Tube.js","../src/components/meshes/Group.js","../src/components/meshes/index.js","../src/modules/app/ElementModule.js","../src/modules/app/RenderingModule.js","../src/modules/app/SceneModule.js","../src/modules/app/ResizeModule.js","../node_modules/postprocessing/src/materials/AdaptiveLuminosityMaterial.js","../node_modules/postprocessing/src/materials/BokehMaterial.js","../node_modules/postprocessing/src/materials/Bokeh2Material.js","../node_modules/postprocessing/src/materials/CombineMaterial.js","../node_modules/postprocessing/src/materials/ConvolutionMaterial.js","../node_modules/postprocessing/src/materials/CopyMaterial.js","../node_modules/postprocessing/src/materials/DepthMaterial.js","../node_modules/postprocessing/src/materials/DotScreenMaterial.js","../node_modules/postprocessing/src/materials/FilmMaterial.js","../node_modules/postprocessing/src/materials/GlitchMaterial.js","../node_modules/postprocessing/src/materials/GodRaysMaterial.js","../node_modules/postprocessing/src/materials/LuminosityMaterial.js","../node_modules/postprocessing/src/materials/PixelationMaterial.js","../node_modules/postprocessing/src/materials/ShockWaveMaterial.js","../node_modules/postprocessing/src/materials/SMAABlendMaterial.js","../node_modules/postprocessing/src/materials/SMAAColorEdgesMaterial.js","../node_modules/postprocessing/src/materials/images/smaa/areaImage.js","../node_modules/postprocessing/src/materials/images/smaa/searchImage.js","../node_modules/postprocessing/src/materials/SMAAWeightsMaterial.js","../node_modules/postprocessing/src/materials/ToneMappingMaterial.js","../node_modules/postprocessing/src/materials/index.js","../node_modules/postprocessing/src/passes/Pass.js","../node_modules/postprocessing/src/passes/BlurPass.js","../node_modules/postprocessing/src/passes/BloomPass.js","../node_modules/postprocessing/src/passes/BokehPass.js","../node_modules/postprocessing/src/passes/Bokeh2Pass.js","../node_modules/postprocessing/src/passes/ClearMaskPass.js","../node_modules/postprocessing/src/passes/ClearPass.js","../node_modules/postprocessing/src/passes/DotScreenPass.js","../node_modules/postprocessing/src/passes/DepthPass.js","../node_modules/postprocessing/src/passes/FilmPass.js","../node_modules/postprocessing/src/passes/GlitchPass.js","../node_modules/postprocessing/src/passes/RenderPass.js","../node_modules/postprocessing/src/passes/GodRaysPass.js","../node_modules/postprocessing/src/passes/MaskPass.js","../node_modules/postprocessing/src/passes/PixelationPass.js","../node_modules/postprocessing/src/passes/SavePass.js","../node_modules/postprocessing/src/passes/ShaderPass.js","../node_modules/postprocessing/src/passes/ShockWavePass.js","../node_modules/postprocessing/src/passes/SMAAPass.js","../node_modules/postprocessing/src/passes/TexturePass.js","../node_modules/postprocessing/src/passes/ToneMappingPass.js","../node_modules/postprocessing/src/passes/index.js","../node_modules/postprocessing/src/core/EffectComposer.js","../src/modules/app/PostProcessorModule.js","../src/modules/app/EventsPatchModule.js","../src/modules/app/VirtualMouseModule.js","../src/modules/app/ControlsModule.js","../src/modules/app/FogModule.js","../src/modules/app/StateModule.js","../src/modules/app/controls/lib/ThreeOrbitControls.js","../src/modules/app/controls/OrbitControlsModule.js","../src/modules/app/controls/index.js","../src/modules/app/index.js","../src/modules/mesh/DynamicGeometryModule.js","../src/modules/mesh/TextureModule.js","../src/modules/mesh/AnimationModule.js","../src/modules/mesh/index.js","../src/modules/DefineModule.js","../src/modules/index.js","../src/deprecation.js","../src/index.js"],"sourcesContent":["export const extend = (object, ...extensions) => { // $.extend alternative, ... is the spread operator.\n  for (const extension of extensions) {\n    // console.log(extension);\n    // console.log(typeof extension);\n\n    if (!extension)\n      continue; // Ignore null and undefined objects and parameters.\n\n    for (const prop of Object.getOwnPropertyNames(extension)) { // Do not traverse the prototype chain.\n      if (object[prop] !== undefined && extension[prop]\n        && object[prop].toString() === '[object Object]'\n        && extension[prop].toString() === '[object Object]') {\n        // Goes deep only if object[prop] and extension[prop] are both objects !\n        if (object[prop].constructor === Object) extend(object[prop], extension[prop]);\n      } else\n        object[prop] = typeof object[prop] === 'undefined' ? extension[prop] : object[prop];\n\n      if (typeof object[prop] === 'undefined' && Array.isArray(extension[prop])) object[prop] = extension[prop].slice(); // Add values that do not already exist.\n      else if (typeof object[prop] === 'undefined' && Array.isArray(extension[prop])) object[prop] = extension[prop];\n    }\n  }\n\n  return object;\n};\n","export const instruct = (array, instArray) => {\n  const tempObject = {};\n\n  for (let i = 0, max = instArray.length; i < max; i++) {\n    const guide = instArray[i];\n\n    tempObject[guide] = array[i];\n  }\n\n  return tempObject;\n};\n\nexport const transformData = (object, instructions) => {\n  for (const key in instructions) {\n    if (Array.isArray(object[key]))\n      object[key] = instruct(object[key], instructions[key]);\n    else if (object[key] instanceof Object && !(Array.isArray(instructions[key])))\n      object[key] = transformData(object[key], instructions[key]);\n  }\n\n  return object;\n};\n\nexport const toArray = (object, instruction) => {\n  const tempArray = [];\n\n  for (let i = 0, max = instruction.length; i < max; i++) {\n    const guide = instruction[i];\n\n    tempArray[i] = object[guide];\n  }\n\n  return tempArray;\n};\n","module.exports = function Events(target){\n  var events = {}, empty = [];\n  target = target || this\n  /**\n   *  On: listen to events\n   */\n  target.on = function(type, func, ctx){\n    (events[type] = events[type] || []).push([func, ctx])\n  }\n  /**\n   *  Off: stop listening to event / specific callback\n   */\n  target.off = function(type, func){\n    type || (events = {})\n    var list = events[type] || empty,\n        i = list.length = func ? list.length : 0;\n    while(i--) func == list[i][0] && list.splice(i,1)\n  }\n  /** \n   * Emit: send event, callbacks will be triggered\n   */\n  target.emit = function(type){\n    var e = events[type] || empty, list = e.length > 0 ? e.slice(0, e.length) : e, i=0, j;\n    while(j=list[i++]) j[0].apply(j[1], empty.slice.call(arguments, 1))\n  };\n};","export class CompositionError extends Error {\n  constructor(classInstance, message, component) {\n    super(`@${classInstance}: ${message}`);\n\n    const stackArray = this.stack.split('\\n');\n    stackArray.splice(1, 2);\n\n    this.stack = stackArray.join('\\n');\n\n    if (console) console.error('Component:', component);\n\n    this.name = 'CompositionError';\n  }\n}\n\nexport class DependencyError extends Error {\n  constructor(classInstance, message, activeModule, dependencyModule = false) {\n    super(`@${classInstance}: ${message}`);\n\n    const stackArray = this.stack.split('\\n');\n    stackArray.splice(1, 2);\n\n    this.stack = stackArray.join('\\n');\n\n    if (console) console.error('Active module:', activeModule);\n    if (console && dependencyModule) console.error('Dependency published by module:', dependencyModule);\n\n    this.name = 'DependencyError';\n  }\n}\n\nexport class ManagerError extends Error {\n  constructor(classInstance, message, component, activeModule = false) {\n    super(`@${classInstance}: ${message}`);\n\n    const stackArray = this.stack.split('\\n');\n    stackArray.splice(1, 2);\n\n    this.stack = stackArray.join('\\n');\n\n    if (console) console.error('Component:', component);\n    if (console && activeModule) console.error('Active module:', activeModule);\n\n    this.name = 'ManagerError';\n  }\n}\n","import {REVISION} from 'three';\nimport Events from 'minivents';\nimport {ManagerError} from './errors';\n\n// Check for Three.js\nconst warnDeps = () => {\n  throw new Error('WhitestormJS Framework requires Three.js r84. https://threejs.org/');\n};\n\ntry {\n  if (!REVISION) warnDeps();\n} catch (err) {\n  warnDeps();\n}\n\n/**\n * @class ModuleSystem\n * @category core\n * @description  Provides API for classes that will use Modules.<br/>\n * This class includes basic event system with those supported methods:\n * <pre>.on()</pre><pre>.off()</pre><pre>.emit()</pre>\n * @extends Events\n * @memberof module:core\n */\nexport class ModuleSystem extends Events {\n  // INTEGRATING\n\n  /**\n   * @method integrateModules\n   * @instance\n   * @description This method applies all modules from .modules collection.\n   * @param {Object} [source] If source (should be a component) is provided, will replace .modules with source's one before executing modules.\n   * @memberof module:core.ModuleSystem\n   */\n  integrateModules(source) {\n    if (!this.modules && !source) return;\n    if (source && source.modules) this.modules = source.modules.slice(0);\n\n    if (this.modules) {\n      for (let i = 0, max = this.modules.length; i < max; i++)\n        this.applyModule(this.modules[i], false);\n    }\n\n    if (source) this.applyBridge({onCopy: source});\n  }\n\n  // APPLYING MODULE (...and a \"bridge\" for module)\n\n  /**\n   * @method applyBridge\n   * @instance\n   * @description Makes component-specific API to work with modules.\n   * @param {Object} bridgeMap\n   * @return {Object} Returns object with modified values.\n   * @memberof module:core.ModuleSystem\n   */\n  applyBridge(bridgeMap = {}) {\n    const modules = this.modules;\n    if (!modules) return bridgeMap;\n\n    for (let i = 0, max = modules.length; i < max; i++) {\n      for (const key in bridgeMap) {\n        if (bridgeMap[key]) {\n          const module = modules[i];\n\n          if (module && module.bridge && module.bridge[key])\n            bridgeMap[key] = module.bridge[key].apply(this, [bridgeMap[key], module]);\n        }\n      }\n    }\n\n    return bridgeMap;\n  }\n\n  /**\n   * @method applyCommand\n   * @instance\n   * @description .applyCommand runs a method called `name` on all modules.\n   * @param {String} name the method name.\n   * @param {Function} [cb=(func, moduleScope) => func.apply(this, [moduleScope])] How the function is wrapped/\n   * @memberof module:core.ModuleSystem\n   */\n  applyCommand(name, cb = (func, moduleScope) => func.apply(this, [moduleScope])) {\n    const modules = this.modules;\n    if (!modules) return;\n\n    for (let i = 0, max = modules.length; i < max; i++) {\n      const module = modules[i];\n      if (name in module) cb(module[name], module);\n    }\n  }\n\n  /**\n   * @method applyModule\n   * @instance\n   * @description .applyModule is also used in .integrateModules() function.\n   * It does exactly what its name says (applies module to component or app).\n   * @param {Object} module the module to apply\n   * @param {Boolean} [push=true]\n   * @return {Object} Returns module that was applied.\n   * @throws {ManagerError}\n   * @memberof module:core.ModuleSystem\n   */\n  applyModule(module, push = true) {\n    if (!module) return;\n    if (push && this.modules) this.modules.push(module);\n    else if (push) this.modules = [module];\n\n    if (this.manager) this.manager.active(module);\n\n    if (module.manager && this.manager) module.manager(this.manager);\n    else if (module.manager) {\n      throw new ManagerError(\n        'Component',\n        `Module requires ModuleManager that is turned off for this component`,\n        this, module\n      );\n    }\n\n    if (module.integrate) module.integrate.bind(this)(module);\n\n    return module;\n  }\n\n  /**\n   * @method disposeModules\n   * @instance\n   * @description Disposes of all modules\n   * @memberof module:core.ModuleSystem\n   */\n  disposeModules() {\n    while (this.modules.length)\n      this.disposeModule(this.modules[0]);\n  }\n\n  /**\n   * @method disposeModule\n   * @instance\n   * @description Disposes of the given module\n   * @param {Object} module the module to dispose\n   * @return {Module} Returns module that was removed.\n   * @memberof module:core.ModuleSystem\n   */\n  disposeModule(module) {\n    if (!module) return;\n\n    this.modules.splice(this.modules.indexOf(module), 1);\n\n    if (module.dispose) module.dispose.bind(this)(module);\n\n    return module;\n  }\n\n  // PIPED METHOD\n\n  /**\n   * @method module\n   * @instance\n   * @description piped version of .applyModule().\n   * @param {Object} module the module to apply\n   * @return {this} returns this - app/component\n   * @throws {ManagerError}\n   * @memberof module:core.ModuleSystem\n   * @example <caption>Piped modules</caption>\n   * component\n   *   .module(new Module1())\n   *   .module(new Module2())\n   *   .module(new Module3())\n   */\n  module(module) {\n    this.applyModule(module);\n    return this;\n  }\n}\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","/* global window */\nimport ponyfill from './ponyfill';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","import isPlainObject from 'lodash-es/isPlainObject';\nimport $$observable from 'symbol-observable';\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nexport var ActionTypes = {\n  INIT: '@@redux/INIT'\n\n  /**\n   * Creates a Redux store that holds the state tree.\n   * The only way to change the data in the store is to call `dispatch()` on it.\n   *\n   * There should only be a single store in your app. To specify how different\n   * parts of the state tree respond to actions, you may combine several reducers\n   * into a single reducer function by using `combineReducers`.\n   *\n   * @param {Function} reducer A function that returns the next state tree, given\n   * the current state tree and the action to handle.\n   *\n   * @param {any} [preloadedState] The initial state. You may optionally specify it\n   * to hydrate the state from the server in universal apps, or to restore a\n   * previously serialized user session.\n   * If you use `combineReducers` to produce the root reducer function, this must be\n   * an object with the same shape as `combineReducers` keys.\n   *\n   * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n   * to enhance the store with third-party capabilities such as middleware,\n   * time travel, persistence, etc. The only store enhancer that ships with Redux\n   * is `applyMiddleware()`.\n   *\n   * @returns {Store} A Redux store that lets you read the state, dispatch actions\n   * and subscribe to changes.\n   */\n};export default function createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n  function getState() {\n    return currentState;\n  }\n\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected listener to be a function.');\n    }\n\n    var isSubscribed = true;\n\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      isSubscribed = false;\n\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n    };\n  }\n\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer;\n    dispatch({ type: ActionTypes.INIT });\n  }\n\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object') {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return { unsubscribe: unsubscribe };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  }\n\n  // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n  dispatch({ type: ActionTypes.INIT });\n\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}","/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nexport default function warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n    /* eslint-disable no-empty */\n  } catch (e) {}\n  /* eslint-enable no-empty */\n}","/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\n\nexport default function compose() {\n  for (var _len = arguments.length, funcs = Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(undefined, arguments));\n    };\n  });\n}","import createStore from './createStore';\nimport combineReducers from './combineReducers';\nimport bindActionCreators from './bindActionCreators';\nimport applyMiddleware from './applyMiddleware';\nimport compose from './compose';\nimport warning from './utils/warning';\n\n/*\n* This is a dummy function to check if the function name has been altered by minification.\n* If the function has been minified and NODE_ENV !== 'production', warn the user.\n*/\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \\'production\\'. ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { createStore, combineReducers, bindActionCreators, applyMiddleware, compose };","import {createStore} from 'redux';\nimport {DependencyError} from './errors';\n\n/**\n * @class ModuleManager\n * @category core\n * @param {Object} object handler\n * @description  Solves modules dependencies\n * @memberof module:core\n */\nexport class ModuleManager {\n  constructor(object) {\n    this.handler = object;\n    this.currentModule = null;\n\n    this.store = createStore((state = [{}, ''], action) => {\n      state[0][action.key] = action.data;\n      state[1] = action.key;\n\n      return state;\n    });\n\n    this.modules = {};\n  }\n\n  /**\n   * @method active\n   * @instance\n   * @description Sets .currentModule to provided module.\n   * @param {Object} module the module to make current\n   * @memberof module:core.ModuleManager\n   */\n  active(module) {\n    this.currentModule = module;\n  }\n\n  /**\n   * @method reset\n   * @instance\n   * @description Set's .currentModule to null.\n   * @memberof module:core.ModuleManager\n   */\n  reset() {\n    this.currentModule = null;\n  }\n\n  /**\n   * @method define\n   * @instance\n   * @description Define the module in manager\n   * @param name The module name\n   * @memberof module:core.ModuleManager\n   */\n  define(name) {\n    this.modules[name] = this.currentModule;\n  }\n\n  /**\n   * @method use\n   * @instance\n   * @description Get the defined module from manager\n   * @param name The module name\n   * @memberof module:core.ModuleManager\n   */\n  use(name) {\n    return this.modules[name];\n  }\n\n  /**\n   * @method set\n   * @instance\n   * @description An alias for .add() <br/><br/>\n   * Use this method if you know that you will overwrite existing dependency.<br/>\n   * Use it in your app, but not in module that you provide to other people.\n   * @param {String} key the key of the dependency\n   * @param {Object} data the value of the dependency\n   * @memberof module:core.ModuleManager\n   */\n  set(key, data) {\n    this.store.dispatch({\n      type: 'ADD',\n      key,\n      data\n    });\n  }\n\n  /**\n   * @method get\n   * @instance\n   * @description Returns dependency in store object, by key.\n   * @param {String} key the key of the dependency\n   * @memberof module:core.ModuleManager\n   * @return {Object|Module}\n   * @throws {DependencyError} if dependency is not in the store\n   * @example <caption>Get the 'hello' dependency</caption>\n   * manager.get('hello'); // -> {world: true}\n   */\n  get(key) {\n    if (!this.store.getState()[0][key]) {\n      throw new DependencyError(\n        'ModuleManager',\n        `Module requires '${key}' dependency`,\n        this.currentModule\n      );\n    }\n\n    return this.store.getState()[0][key];\n  }\n\n  /**\n   * @method has\n   * @instance\n   * @description Returns whether manager has a dependency with the given key\n   * @param {String} key the key of the dependency\n   * @memberof module:core.ModuleManager\n   * @return {Boolean} Promise that is resolved when all promises completed.\n   * @example <caption>Check whether the store has the 'hello' dependency</caption>\n   * manager.has('hello'); // -> true\n   */\n  has(key) {\n    return Boolean(this.store.getState()[0][key]);\n  }\n\n  /**\n   * @method update\n   * @instance\n   * @description Updates deps\n   * @param {Object} [depsMap={}]\n   * @memberof module:core.ModuleManager\n   */\n  update(depsMap = {}) {\n    this.store.subscribe(() => {\n      const [data, changedKey] = this.store.getState();\n      const callback = depsMap[changedKey];\n\n      if (callback) callback(data[changedKey]);\n    });\n  }\n\n  /**\n   * @method add\n   * @alias module:core.ModuleManager#set\n   * @memberof module:core.ModuleManager\n   */\n  add(...data) {\n    console.warn('.add() method is deprecated. Use .set() instead');\n    return this.set(...data);\n  }\n\n  /**\n   * @method require\n   * @instance\n   * @description Require module\n   * @param {String} name Defined name\n   * @param {Function} moduleExecutor Function that returns applied module\n   * @memberof module:core.ModuleManager\n   */\n  require(name, moduleExecutor) {\n    if (this.use(name) === undefined) this.handler.applyModule(moduleExecutor());\n  }\n}\n","import {extend, transformData} from '../utils/index';\nimport {ModuleSystem} from './ModuleSystem';\nimport {ModuleManager} from './ModuleManager';\nimport {ManagerError} from './errors';\n\n/**\n * @class Component\n * @category core\n * @param {Object} [params] - The parameters object.\n * @param {Object} [instructions] - The instructions object.\n * @extends ModuleSystem\n * @memberof module:core\n */\nclass Component extends ModuleSystem {\n  /**\n   * Default values for parameters\n   * @member {Object} module:core.Component#defaults\n   * @static\n   * @default {\n   *   modules: [],\n   *   manager: true\n   * }\n   */\n  static defaults = {\n    modules: null,\n    manager: true\n  };\n\n  /**\n   * Static instructions\n   * @member {Object} module:core.Component#instructions\n   * @static\n   * @default {}\n   */\n  static instructions = {};\n\n  /**\n   * Array of promises that should be resolved before Component is ready.\n   * @member {Array} module:core.Component#_wait\n   * @private\n   */\n  _wait = []; // Collection of promises;\n\n  /**\n   * Collection of `modules`.\n   * @member {Array} module:core.Component#modules\n   * @public\n   */\n  modules = []; // Collection of modules;\n\n  /**\n   * Collection of `child` Components.\n   * @member {Array} module:core.Component#children\n   * @public\n   */\n  children = []; // For keeping children components;\n\n  constructor(params = {}, defaults = Component.defaults, instructions = Component.instructions) {\n    super();\n\n    // Apply polyfilled parameters to .params;\n    this.params = extend(transformData(params, instructions), defaults);\n    if (this.params.manager) this.manager = new ModuleManager(this);\n\n    this.modules = this.params.modules;\n\n    this.integrateModules();\n  }\n\n  /**\n   * @method wait\n   * @instance\n   * @description Wait for a promise.\n   * @param {Promise} [promise] - The promise that should be added to a queue.\n   * @return {Promise} Promise that is resolved when all promises completed.\n   * @memberof module:core.Component\n   */\n  wait(promise) {\n    if (promise) this._wait.push(promise);\n    return Promise.all(this._wait);\n  }\n\n  /**\n   * @method defer\n   * @instance\n   * @description Execute `func` (Callback) when Component is ready.\n   * @param {Function} func - Callback.\n   * @memberof module:core.Component\n   */\n  defer(func) {\n    if (this.isDeffered) this.wait().then(() => func(this));\n    else func(this);\n  }\n\n  // PARAMETERS\n\n  /**\n   * @method updateParams\n   * @instance\n   * @description Updates parameters of the Component.\n   * @return {Object} Params of this Component\n   * @memberof module:core.Component\n   */\n  updateParams(params = {}) {\n    this.params = extend(params, this.params);\n    return this.params;\n  }\n\n  // COPYING & CLONING\n\n  /**\n   * @method clone\n   * @instance\n   * @description Clone this component\n   * @return {object} a cloned component with all its source component' params copied.\n   * @memberof module:core.Component\n   */\n  clone() {\n    return new this.constructor(this.params).copy(this);\n  }\n\n  /**\n   * @method copy\n   * @instance\n   * @description Copy source native and integrate `modules` to it.\n   * @param {Component} source - Source component that is used for `copy()` action.\n   * @param {Function} [customize] - Callback executed before modules integration process.\n   * @return {this} Component\n   * @memberof module:core.Component\n   */\n  copy(source, customize) {\n    this.params = {...source.params};\n\n    if (source.native) this.native = source.native.clone(source.params);\n    if (customize) customize();\n    this.integrateModules(source);\n\n    return this;\n  }\n\n  /**\n   * @method add\n   * @instance\n   * @description Add a child `Component`.\n   * @param {Component} object - Component that should be added as a `child`.\n   * @return {Promise} Resolved when action is done.\n   * @memberof module:core.Component\n   */\n  add(object) {\n    object.parent = this;\n\n    return new Promise((resolve, reject) => {\n      object.defer(() => {\n        const {native} = object;\n        if (!native) reject();\n\n        const addPromise = this.applyBridge({onAdd: object}).onAdd;\n\n        const resolver = () => {\n          this.native.add(native);\n          this.children.push(object);\n\n          resolve(object);\n        };\n\n        if (addPromise instanceof Promise) addPromise.then(resolver);\n        else resolver();\n      });\n    });\n  }\n\n  /**\n   * @method remove\n   * @instance\n   * @description Remove a child `Component`.\n   * @param {Component} object - Component that should be a **child** of this Component.\n   * @memberof module:core.Component\n   */\n  remove(object) {\n    object.parent = null;\n    this.native.remove(object.native);\n  }\n\n  /**\n   * @method addTo\n   * @instance\n   * @description Adds `this` Component to specified `App`/`Component`.\n   * @param {Component} object - Component that will be a parent of `this`.\n   * @memberof module:core.Component\n   */\n  addTo(object) {\n    return object.add(this);\n  }\n\n  /**\n   * Returns whether the object is `async` (`wait` promises are more than `0`).\n   * @member {Boolean} module:core.Component#isDeffered\n   */\n  get isDeffered() {\n    return this._wait.length > 0;\n  }\n\n  /**\n   * Returns the `ModuleManager` used for this component.\n   * @member {ModuleManager} module:core.Component#manager\n   * @throws {ManagerError}\n   */\n  get manager() {\n    if (this._manager) return this._manager;\n\n    throw new ManagerError(\n      'Component',\n      `ModuleManager is not used in this component. 'manager' parameter should be set as 'true'`,\n      this\n    );\n  }\n\n  set manager(manager) {\n    this._manager = manager;\n  }\n\n  /**\n   * Returns the `native` object used for this component.\n   * @member {Object} module:core.Component#native\n   */\n  get native() {\n    return this._native;\n  }\n\n  set native(mesh) {\n    this._native = mesh;\n    this._native.component = this;\n    return this._native;\n  }\n}\n\nexport {\n  Component\n};\n","export function attributes(...mappers) {\n  return function (target) {\n    for (let i = 0; i < mappers.length; i++) {\n      const mapper = mappers[i];\n\n      for (let k = 0; k < mapper.map.length; k++) {\n        const attribute = mapper.map[k];\n\n        Object.defineProperty(target.prototype, attribute, {\n          get: mapper.getter(attribute),\n          set: mapper.setter(attribute),\n          configurable: mapper.configurable,\n          enumerable: mapper.enumerable\n        });\n      }\n    }\n  };\n}\n\nexport function copy(...map) {\n  return {\n    map,\n    getter(name) {\n      return function () {\n        return this.native[name];\n      };\n    },\n    setter(name) {\n      return function (value) {\n        this.native[name].copy(value);\n      };\n    },\n    configurable: true,\n    enumerable: true\n  };\n}\n\nexport function mirror(...map) {\n  return {\n    map,\n    getter(name) {\n      return function () {\n        return this.native[name];\n      };\n    },\n    setter(name) {\n      return function (value) {\n        this.native[name] = value;\n      };\n    },\n    configurable: true,\n    enumerable: true\n  };\n}\n","import {Mesh} from 'three';\nimport {Component} from './Component';\n\nimport {attributes, copy, mirror} from './prototype/attributes';\nimport {CompositionError} from './errors';\n\n@attributes(\n  copy('position', 'rotation', 'quaternion', 'scale'),\n  mirror('material', 'geometry')\n)\n/**\n * @class MeshComponent\n * @category core\n * @param {Object} [params] - The parameters object.\n * @param {Object} [instructions] - The instructions object.\n * @extends module:core.Component\n * @memberof module:core\n */\nclass MeshComponent extends Component {\n  /**\n   * Default values for parameters\n   * @member {Object} module:core.MeshComponent#defaults\n   * @static\n   * @default\n   * {\n   *   build: true,\n   *   geometry: {},\n   *   material: false,\n   *\n   *   shadow: {\n   *     cast: true,\n   *     receive: true\n   *   },\n   *\n   *   position: {x: 0, y: 0, z: 0},\n   *   rotation: {x: 0, y: 0, z: 0},\n   *   scale: {x: 1, y: 1, z: 1}\n   * }\n   */\n  static defaults = {\n    ...Component.defaults,\n\n    build: true,\n    geometry: {},\n    material: false,\n\n    shadow: {\n      cast: true,\n      receive: true\n    },\n\n    position: {x: 0, y: 0, z: 0},\n    rotation: {x: 0, y: 0, z: 0},\n    scale: {x: 1, y: 1, z: 1}\n  };\n\n  /**\n   * Static instructions\n   * @member {Object} module:core.MeshComponent#instructions\n   * @static\n   * @default\n   * {\n   *   position: ['x', 'y', 'z'],\n   *   rotation: ['x', 'y', 'z'],\n   *   scale: ['x', 'y', 'z']\n   * }\n   */\n  static instructions = {\n    position: ['x', 'y', 'z'],\n    rotation: ['x', 'y', 'z'],\n    scale: ['x', 'y', 'z']\n  };\n\n  // CUSTOM GEOMETRY HANDLING\n\n  static custom(geom, constructor = Mesh) {\n    return class extends MeshComponent {\n      build(params = this.params) {\n        const {geometry, material} = this.applyBridge({\n          geometry: geom,\n          material: params.material\n        });\n\n        return this.applyBridge({mesh: new constructor(geometry, material)}).mesh;\n      }\n    };\n  }\n\n  static create(geom, params, constructor) {\n    return new (MeshComponent.custom(geom, constructor))(params);\n  }\n\n  static from(mesh, params = {}) {\n    params.build = false;\n\n    const component = new MeshComponent(params);\n\n    component.native = mesh;\n    component.wrap();\n\n    return component;\n  }\n\n  constructor(params, defaults = MeshComponent.defaults, instructions = MeshComponent.instructions) {\n    super(params, defaults, instructions);\n\n    if (this.params.build) {\n      const build = this.build(this.params);\n\n      if (!build) {\n        throw new CompositionError(\n          'MeshComponent',\n          '.build() method should return a THREE.Object3D or a Promise resolved with THREE.Object3D.',\n          this\n        );\n      }\n\n      if (build instanceof Promise) {\n        this.wait(build);\n\n        this.wait(new Promise(resolve => {\n          build.then(native => {\n            this.native = native;\n            this.wrap().then(resolve);\n          });\n        }));\n      } else {\n        this.native = build;\n        this.wait(this.wrap());\n      }\n    }\n\n    this.applyCommand('postIntegrate');\n  }\n\n  // BUILDING & WRAPPING\n\n  /**\n   * @method build\n   * @description Build livecycle should return a native object.\n   * @throws {CompositionError}\n   * @memberof module:core.MeshComponent\n   */\n  build() {\n    throw new CompositionError(\n      'MeshComponent',\n      'Instance should have it\\'s own .build().',\n      this\n    );\n  }\n\n  /**\n   * @method wrap\n   * @instance\n   * @description Wraps transforms (`position` & `rotation`)\n   * @return {Promise} Resolved when action is completed\n   * @memberof module:core.MeshComponent\n   */\n  wrap() {\n    return new Promise(resolve => {\n      // TODO: Fix defer with physics\n      // this.defer(() => {\n      const {position, rotation, scale, shadow} = this.params;\n\n      this.position.set(position.x, position.y, position.z);\n      this.rotation.set(rotation.x, rotation.y, rotation.z);\n      this.scale.set(scale.x, scale.y, scale.z);\n\n      this.native.castShadow = shadow.cast;\n      this.native.receiveShadow = shadow.receive;\n\n      this.applyBridge({onWrap: 1});\n\n      resolve(this);\n      // });\n    });\n  }\n\n  // COPYING & CLONING\n\n  /**\n   * @method copy\n   * @instance\n   * @description Copy source transforms & execute `Component.copy()`\n   * @return {this} MeshComponent\n   * @memberof module:core.MeshComponent\n   */\n  copy(source) {\n    return super.copy(source, () => {\n      this.position.copy(source.position);\n      this.rotation.copy(source.rotation);\n      this.quaternion.copy(source.quaternion);\n    });\n  }\n\n  /**\n   * @method clone\n   * @instance\n   * @description Make a clone of this MeshComponent using `.copy()`\n   * @return {MeshComponent} clone of this object\n   * @memberof module:core.MeshComponent\n   */\n  clone(geometry, material) {\n    const dest = new this.constructor({build: false}).copy(this);\n\n    if (geometry) dest.geometry = dest.geometry.clone();\n    if (material) dest.material = dest.material.clone();\n\n    return dest;\n  }\n}\n\nexport {\n  MeshComponent\n};\n","import {Component} from './Component';\n\nimport {attributes, copy} from './prototype/attributes';\nimport {CompositionError} from './errors';\n\n@attributes(\n  copy('position', 'rotation', 'quaternion', 'target')\n)\n/**\n * @class LightComponent\n * @category core\n * @param {Object} [params] - The parameters object.\n * @param {Object} [instructions] - The instructions object.\n * @extends module:core.Component\n * @memberof module:core\n */\nclass LightComponent extends Component {\n  /**\n   * Default values for parameters\n   * @member {Object} module:core.LightComponent#defaults\n   * @static\n   * @default\n   * {\n   *   build: true,\n   *\n   *   shadow: {\n   *     cast: true,\n   *\n   *     bias: 0,\n   *     radius: 1,\n   *\n   *     mapSize: {\n   *       width: 1024,\n   *       height: 1024\n   *     },\n   *\n   *     camera: {\n   *       near: true,\n   *       far: 400,\n   *       fov: 90,\n   *\n   *       top: 200,\n   *       bottom: -200,\n   *       left: -200,\n   *       right: 200\n   *     }\n   *   },\n   *\n   *   position: {x: 0, y: 0, z: 0},\n   *   rotation: {x: 0, y: 0, z: 0}\n   * }\n   */\n  static defaults = {\n    ...Component.defaults,\n\n    build: true,\n\n    shadow: {\n      cast: true,\n\n      bias: 0,\n      radius: 1,\n\n      mapSize: {\n        width: 1024,\n        height: 1024\n      },\n\n      camera: {\n        near: true,\n        far: 400,\n        fov: 90,\n\n        top: 200,\n        bottom: -200,\n        left: -200,\n        right: 200\n      }\n    },\n\n    position: {x: 0, y: 0, z: 0},\n    rotation: {x: 0, y: 0, z: 0}\n  };\n\n  /**\n   * Static instructions\n   * @member {Object} module:core.LightComponent#instructions\n   * @static\n   * @default\n   * {\n   *   position: ['x', 'y', 'z'],\n   *   rotation: ['x', 'y', 'z']\n   * }\n   */\n  static instructions = {\n    position: ['x', 'y', 'z'],\n    rotation: ['x', 'y', 'z']\n  };\n\n  static from(light, params = {}, wrapShadow = true) {\n    params.build = false;\n\n    const component = new LightComponent(params);\n\n    component.native = light;\n    component.wrap();\n    if (wrapShadow) component.wrapShadow();\n\n    return component;\n  }\n\n  constructor(params, defaults = LightComponent.defaults, instructions = LightComponent.instructions) {\n    super(params, defaults, instructions);\n\n    if (this.params.build) {\n      const build = this.build(this.params);\n\n      if (!build) {\n        throw new CompositionError(\n          'LightComponent',\n          '.build() method should return a THREE.Object3D or a Promise resolved with THREE.Object3D.',\n          this\n        );\n      }\n\n      if (build instanceof Promise) {\n        build.then(native => {\n          this.native = native;\n        });\n      } else this.native = build;\n\n      this.wait(this.wrap());\n    }\n\n    this.applyCommand('postIntegrate');\n  }\n\n  // BUILDING & WRAPPING\n\n  /**\n   * @method build\n   * @instance\n   * @description Build livecycle should return a native object.\n   * @throws {CompositionError}\n   * @memberof module:core.LightComponent\n   */\n  build() {\n    throw new CompositionError(\n      'MeshComponent',\n      'Instance should have it\\'s own .build().',\n      this\n    );\n  }\n\n  /**\n   * @method wrap\n   * @instance\n   * @description Wraps transforms (`position` & `rotation`)\n   * @return {Promise} Resolved when action is completed\n   * @memberof module:core.LightComponent\n   */\n  wrap() {\n    return new Promise(resolve => {\n      this.defer(() => {\n        const {position, rotation} = this.params;\n\n        this.position.set(position.x, position.y, position.z);\n        this.rotation.set(rotation.x, rotation.y, rotation.z);\n\n        this.applyBridge({onWrap: 1});\n\n        resolve(this);\n      });\n    });\n  }\n\n  /**\n   * @method wrapShadow\n   * @instance\n   * @description Wraps shadow properties\n   * @memberof module:core.LightComponent\n   */\n  wrapShadow() {\n    const {native, params: {shadow}} = this;\n\n    native.castShadow = shadow.cast;\n    native.shadow.mapSize.width = shadow.mapSize.width;\n    native.shadow.mapSize.height = shadow.mapSize.height;\n    native.shadow.bias = shadow.bias;\n    native.shadow.radius = shadow.radius;\n\n    const shadowCamera = native.shadow.camera;\n    const camera = shadow.camera;\n\n    shadowCamera.near = camera.near;\n    shadowCamera.far = camera.far;\n    shadowCamera.fov = camera.fov;\n\n    shadowCamera.left = camera.left;\n    shadowCamera.right = camera.right;\n    shadowCamera.top = camera.top;\n    shadowCamera.bottom = camera.bottom;\n  }\n\n  // COPYING & CLONING\n\n  /**\n   * @method copy\n   * @instance\n   * @description Copy source transforms & execute `Component.copy()`\n   * @return {this} LightComponent\n   * @memberof module:core.LightComponent\n   */\n  copy(source) {\n    return super.copy(source, () => {\n      if (this.target) this.target.copy(source.target());\n\n      this.position.copy(source.position);\n      this.rotation.copy(source.rotation);\n      this.quaternion.copy(source.quaternion);\n    });\n  }\n\n  /**\n   * @method clone\n   * @instance\n   * @description Make a clone of this LightComponent using `.copy()`\n   * @return {LightComponent} clone of this object\n   * @memberof module:core.LightComponent\n   */\n  clone() {\n    return new this.constructor({build: false}).copy(this);\n  }\n}\n\nexport {\n  LightComponent\n};\n","import {Component} from './Component';\n\nimport {attributes, copy} from './prototype/attributes';\nimport {CompositionError} from './errors';\n\n@attributes(\n  copy('position', 'rotation', 'quaternion', 'target')\n)\n/**\n * @class CameraComponent\n * @category core\n * @param {Object} [params] - The parameters object.\n * @param {Object} [instructions] - The instructions object.\n * @extends module:core.Component\n * @memberof module:core\n */\nclass CameraComponent extends Component {\n  /**\n   * Default values for parameters\n   * @member {Object} module:core.CameraComponent#defaults\n   * @static\n   * @default\n   * {\n   *   build: true,\n   *\n   *   position: {x: 0, y: 0, z: 0},\n   *   rotation: {x: 0, y: 0, z: 0}\n   * }\n   */\n  static defaults = {\n    ...Component.defaults,\n\n    build: true,\n\n    position: {x: 0, y: 0, z: 0},\n    rotation: {x: 0, y: 0, z: 0}\n  };\n\n  /**\n   * Static instructions\n   * @member {Object} module:core.CameraComponent#instructions\n   * @static\n   * @default\n   * {\n   *   position: ['x', 'y', 'z'],\n   *   rotation: ['x', 'y', 'z'],\n   *   scale: ['x', 'y', 'z']\n   * }\n   */\n  static instructions = {\n    position: ['x', 'y', 'z'],\n    rotation: ['x', 'y', 'z'],\n    scale: ['x', 'y', 'z']\n  };\n\n  static from(camera, params = {}) {\n    params.build = false;\n\n    const component = new CameraComponent(params);\n\n    component.native = camera;\n    component.wrap();\n\n    return component;\n  }\n\n  constructor(params, defaults = CameraComponent.defaults, instructions = CameraComponent.instructions) {\n    super(params, defaults, instructions);\n\n    if (this.params.build) {\n      const build = this.build(this.params);\n\n      if (!build) {\n        throw new CompositionError(\n          'CameraComponent',\n          '.build() method should return a THREE.Object3D or a Promise resolved with THREE.Object3D.',\n          this\n        );\n      }\n\n      if (build instanceof Promise) {\n        build.then(native => {\n          this.native = native;\n        });\n      } else this.native = build;\n\n      this.wait(this.wrap());\n    }\n\n    this.applyCommand('postIntegrate');\n  }\n\n  // BUILDING & WRAPPING\n\n  /**\n   * @method build\n   * @instance\n   * @description Build livecycle should return a native object.\n   * @throws {CompositionError}\n   * @memberof module:core.CameraComponent\n   */\n  build() {\n    throw new CompositionError(\n      'CameraComponent',\n      'Instance should have it\\'s own .build().',\n      this\n    );\n  }\n\n  /**\n   * @method wrap\n   * @instance\n   * @description Wraps transforms (`position` & `rotation`)\n   * @return {Promise} Resolved when action is completed\n   * @memberof module:core.CameraComponent\n   */\n  wrap() {\n    return new Promise(resolve => {\n      this.defer(() => {\n        this.position.set(this.params.position.x, this.params.position.y, this.params.position.z);\n        this.rotation.set(this.params.rotation.x, this.params.rotation.y, this.params.rotation.z);\n\n        this.applyBridge({onWrap: 1});\n\n        resolve(this);\n      });\n    });\n  }\n\n  /**\n   * @method copy\n   * @instance\n   * @description Copy source transforms & execute `Component.copy()`\n   * @return {this} CameraComponent\n   * @memberof module:core.CameraComponent\n   */\n  copy(source) {\n    return super.copy(source, () => {\n      if (this.target) this.target.copy(source.target());\n\n      this.position.copy(source.position);\n      this.rotation.copy(source.rotation);\n      this.quaternion.copy(source.quaternion);\n    });\n  }\n\n  /**\n   * @method clone\n   * @instance\n   * @description Make a clone of this CameraComponent using `.copy()`\n   * @return {CameraComponent} clone of this object\n   * @memberof module:core.CameraComponent\n   */\n  clone() {\n    return new this.constructor({build: false}).copy(this);\n  }\n}\n\nexport {\n  CameraComponent\n};\n","export const system = {\n  window: typeof window === 'undefined' ? global : window\n};\n","import {version} from '../../package.json';\nimport {system} from '../polyfill';\nimport {ModuleSystem} from './ModuleSystem';\nimport {ModuleManager} from './ModuleManager';\n\n/**\n * @class App\n * @category core\n * @description This component is used to prepare a world scene, setup physics, camera, renderer and all other things that you usually do before making meshes.\n * @param {Array} [modules=[]] - Array of Modules\n * @extends ModuleSystem\n * @memberof module:core\n */\nclass App extends ModuleSystem {\n  /**\n   * @description Defines whether the scene should render or not\n   * @member {Boolean} module:core.App#enabled\n   * @public\n   */\n  enabled = true;\n\n  /**\n   * Loops in this app\n   * @description Array of loops that are executed by this app.\n   * @member {Array} module:core.App#loops\n   * @public\n   */\n  loops = [];\n\n  constructor(modules = []) {\n    console.log(`WHS.App ${version}`);\n\n    super();\n    this.manager = new ModuleManager(this);\n    this.modules = modules;\n\n    this.integrateModules();\n  }\n\n  // CONTROLS & UPDATING\n\n  /**\n   * @method start\n   * @description Start rendering loop and physics simulation (if you use version with physics).\n   * @memberof module:core.App\n   */\n  start() {\n    const requestAnimFrame = (() => {\n      return system.window.requestAnimationFrame\n        || system.window.webkitRequestAnimationFrame\n        || system.window.mozRequestAnimationFrame\n        || function (callback) {\n          system.window.setTimeout(callback, 1000 / 60);\n        };\n    })();\n\n    const {loops, enabled} = this;\n\n    function process() {\n      requestAnimFrame(process);\n      if (!enabled) return;\n\n      for (let i = 0, ll = loops.length; i < ll; i++) {\n        const e = loops[i];\n        if (e.enabled) e.execute(e.clock);\n      }\n    }\n\n    this.enabled = true;\n    process();\n  }\n\n  /**\n   * @method stop\n   * @description Stops rendering loops\n   * @memberof module:core.App\n   */\n  stop() {\n    this.enabled = false;\n  }\n\n  /**\n   * @method addLoop\n   * @description Adds loop to this app.\n   * @param {Object} loop - the loop to add\n   * @return {Promise} Promise that is resolved when promises completed.\n   * @memberof module:core.App\n   * @example <caption>Adding a loop to an app</caption>\n   * const loop = new Loop(() => {\n   *  // ...\n   * });\n   *\n   * const app = new App();\n   *\n   * app.addLoop(loop);\n   * loop.start();\n   */\n  addLoop(loop) {\n    return new Promise(resolve => {\n      this.loops.push(loop);\n      resolve(loop);\n    });\n  }\n\n  /**\n   * @method removeLoop\n   * @description Removes loop from this app.\n   * @param {Object} loop - the loop to remove\n   * @return {Promise} Promise that is resolved when promises completed.\n   * @memberof module:core.App\n   */\n  removeLoop(loop) {\n    return new Promise(resolve => {\n      const index = this.loops.indexOf(loop);\n      if (index !== -1) this.loops.splice(index, 1);\n\n      resolve(loop);\n    });\n  }\n\n  get(key) {\n    return this.manager.get(key);\n  }\n\n  use(key) {\n    return this.manager.use(key);\n  }\n}\n\nexport {\n  App\n};\n","import {Clock} from 'three';\n\n/**\n * @class Loop\n * @category core\n * @param {Function} func function to execute on each animation frame\n * @param {Boolean} [useClock=true] passes a Clock to the function when called, if true\n * @memberof module:core\n */\nclass Loop {\n  constructor(func, useClock = true) {\n    this.func = func;\n    this.clock = useClock ? new Clock() : null;\n    this.enabled = false;\n  }\n\n  // CONTROLS\n\n  /**\n   * @method start\n   * @instance\n   * @description Starts this loop, clock if it has one. Won't do anything if loop enabled already.\n   * @param {Component} [world] app to add this loop to, if provided.\n   * @memberof module:core.Loop\n   */\n  start(world) {\n    if (this.enabled) return;\n\n    if (world) world.addLoop(this);\n\n    if (this.clock) this.clock.start();\n    this.enabled = true;\n  }\n\n  /**\n   * @method stop\n   * @instance\n   * @description Stops this loop and its clock if it has one, won't do anything if this loop is not enabled)\n   * @param {Component} [world] app to remove this loop from, if provided.\n   * @memberof module:core.Loop\n   */\n  stop(world) {\n    if (!this.enabled) return;\n\n    if (this.clock) this.clock.stop();\n    this.enabled = false;\n\n    if (world) world.removeLoop(this);\n  }\n\n  // EXECUTION\n\n  /**\n   * @method execute\n   * @instance\n   * @description Executes the function of this loop\n   * @memberof module:core.Loop\n   * @returns {*} whatever the function of this loop returns\n   */\n  execute() {\n    return this.func(this.clock);\n  }\n}\n\nexport {\n  Loop\n};\n","/** @module core */\nexport * from './Component';\nexport * from './MeshComponent';\nexport * from './LightComponent';\nexport * from './CameraComponent';\nexport * from './App';\nexport * from './Loop';\nexport * from './ModuleManager';\n","import {AmbientLight as AmbientLightNative} from 'three';\nimport {LightComponent} from '../../core/LightComponent';\n\n/**\n * @class AmbientLight\n * @category components/lights\n * @description AmbientLight is a simple class, it extends Light and inherits all its methods.\n * AmbientLight creates basic light around all scene, so it doesn't need properties like pos or target.\n * It supports only color and intensity as parameters, which defines the color of the surrounded light and intensity of light.\n * @param {Object} [params={light: {color: 0xffffff, intensity: 1}}] - The params.\n * @extends module:core.LightComponent\n * @memberof module:components/lights\n * @example <caption>Creating an AmbientLight </caption>\n * new AmbientLight({\n *   color: 0xffffff,\n *   intensity: 0.2\n * }).addTo(world);\n */\nclass AmbientLight extends LightComponent {\n  static defaults = {\n    ...LightComponent.defaults,\n\n    color: 0xffffff,\n    intensity: 1\n  };\n\n  constructor(params = {}) {\n    super(params, AmbientLight.defaults);\n  }\n\n  build(params = {}) {\n    return this.applyBridge({light: new AmbientLightNative(\n      params.color,\n      params.intensity\n    )}).light;\n  }\n}\n\nexport {\n  AmbientLight\n};\n","import {DirectionalLight as DirectionalLightNative, DirectionalLightHelper} from 'three';\nimport {LightComponent} from '../../core/LightComponent';\n\n/**\n * @class DirectionalLight\n * @category components/lights\n * @description DirectinalLight creates a light that shines from a specific direction not from a specific position.<br/><br/>\n * This light will behave as though it is infinitely far away and the rays produced from it are all parallel. <br/><br/>\n * The best analogy would be a light source that acts like the sun: the sun is so far away that all sunlight hitting objects comes from the same angle.<br/><br/>\n * It has the same options as AmbientLight in light paramater, but it also supports pos and target paramaters.\n * @param {Object} [params={light: {color: 0xffffff, intensity: 1}}] - The params.\n * @extends module:core.LightComponent\n * @memberof module:components/lights\n * @example <caption>Creating a DirectionalLight to fall down from vec3(10, 20, 10) to vec3(0, 0, 0)</caption>\n * new DirectionalLight({\n *   color: 0xffffff,\n *   intensity: 0.2,\n *\n *   position: [10, 20, 10]\n * }).addTo(app);\n */\nclass DirectionalLight extends LightComponent {\n  static defaults = {\n    ...LightComponent.defaults,\n\n    color: 0xffffff,\n    intensity: 1\n  };\n\n  constructor(params = {}) {\n    super(params, DirectionalLight.defaults);\n    this.wrapShadow();\n  }\n\n  build(params = {}) {\n    return this.applyBridge({light: new DirectionalLightNative(\n      params.color,\n      params.intensity\n    )}).light;\n  }\n}\n\nexport {\n  DirectionalLight\n};\n","import {HemisphereLight as HemisphereLightNative, HemisphereLightHelper} from 'three';\nimport {LightComponent} from '../../core/LightComponent';\n\n/**\n * @class HemisphereLight\n * @category components/lights\n * @description HemisphereLight is a light source positioned directly above the scene.<br/>\n * It also doesn't need position and target properties.\n * @classDesc\n * <iframe src=\"https://threejs.org/examples/webgl_lights_hemisphere.html\"></iframe>\n * @param {Object} [params={light: {skyColor: 0xffffff, groundColor: 0xffffff, intensity: 1}}] - The params.\n * @extends module:core.LightComponent\n * @memberof module:components/lights\n * @example <caption>Creating a HemisphereLight</caption>\n * new HemisphereLight({\n *   skyColor: 0xff0000,\n *   groundColor: 0x0000ff,\n *   intensity: 0.2\n * }).addTo(app);\n */\nclass HemisphereLight extends LightComponent {\n  static defaults = {\n    ...LightComponent.defaults,\n\n    skyColor: 0xffffff,\n    groundColor: 0xffffff,\n    intensity: 1\n  }\n\n  constructor(params = {}) {\n    super(params, HemisphereLight.defaults);\n  }\n\n  build(params = {}) {\n    return this.applyBridge({light: new HemisphereLightNative(\n      params.skyColor,\n      params.groundColor,\n      params.intensity\n    )}).light;\n  }\n}\n\nexport {\n  HemisphereLight\n};\n","import {PointLight as PointLightNative, PointLightHelper} from 'three';\nimport {LightComponent} from '../../core/LightComponent';\n\n/**\n * @class PointLight\n * @category components/lights\n * @description PointLight creates a light at a specific position in the scene. The light shines in all directions (roughly similar to a light bulb.)<br/><br/>\n * It has the same options as AmbientLight in light paramater, but it also supports position, distance and decay.<br/>\n * @param {Object} [params={light: {color: 0xffffff, intensity: 1, distance: 100, decay: 1}}] - The params.\n * @extends LightComponent\n * @memberof module:components/lights\n * @example <caption>Creating a PointLight</caption>\n * new PointLight( {\n *   color: 0xff0000,\n *   intensity: 2,\n *   distance: 300\n *\n *   position: [10, 20, 10]\n * }).addTo(app);\n */\nclass PointLight extends LightComponent {\n  static defaults= {\n    ...LightComponent.defaults,\n\n    color: 0xffffff,\n    intensity: 1,\n    distance: 100,\n    decay: 1\n  }\n\n  constructor(params = {}) {\n    super(params, PointLight.defaults);\n    this.wrapShadow();\n  }\n\n  build(params = {}) {\n    return this.applyBridge({light: new PointLightNative(\n      params.color,\n      params.intensity,\n      params.distance,\n      params.decay\n    )}).light;\n  }\n}\n\nexport {\n  PointLight\n};\n","import {SpotLight as SpotLightNative} from 'three';\nimport {LightComponent} from '../../core/LightComponent';\n\n/**\n * @class SpotLight\n * @category components/lights\n * @description SpotLight creates spot light that can cast shadow in one direction. <br/><br/>\n * It has the same parameters as AmbientLight in light, but it also supports pos and target. <br/><br/>\n * SpotLight affects meshes with lambert and phong material.\n * @classDesc\n * <iframe src=\"https://threejs.org/examples/webgl_lights_spotlight.html\"></iframe>\n * @param {Object} [params={light: {color: 0xffffff, intensity: 1, distance: 100, angle: Math.PI / 3, exponent: 0, decay: 1}}] - The params.\n * @extends module:core.LightComponent\n * @memberof module:components/lights\n * @example <caption>Creating a SpotLight that falls down from vec3(10, 20, 10) to vec3(0, 0, 0)</caption>\n * new SpotLight({\n *   color: 0x00ff00,\n *   intensity: 3,\n *   distance: 1000\n *\n *   position: [10, 20, 10]\n * }).addTo(app);\n */\nclass SpotLight extends LightComponent {\n  static defaults = {\n    ...LightComponent.defaults,\n\n    color: 0xffffff,\n    intensity: 1,\n    distance: 100,\n    angle: Math.PI / 3,\n    exponent: 0,\n    decay: 1\n  };\n\n  constructor(params = {}) {\n    super(params, SpotLight.defaults);\n    this.wrapShadow();\n  }\n\n  build(params = {}) {\n    return this.applyBridge({light: new SpotLightNative(\n      params.color,\n      params.intensity,\n      params.distance,\n      params.angle,\n      params.exponent,\n      params.decay\n    )}).light;\n  }\n}\n\nexport {\n  SpotLight\n};\n","import {RectAreaLight as RectAreaLightNative} from 'three';\nimport {LightComponent} from '../../core/LightComponent';\n\nclass AreaLight extends LightComponent {\n  static defaults = {\n    ...LightComponent.defaults,\n\n    color: 0xffffff,\n    intensity: 1,\n    width: 10,\n    height: 10\n  };\n\n  constructor(params = {}) {\n    super(params, AreaLight.defaults);\n  }\n\n  build(params = {}) {\n    return this.applyBridge({light: new RectAreaLightNative(\n      params.color,\n      params.intensity,\n      params.width,\n      params.height\n    )}).light;\n  }\n}\n\nexport {\n  AreaLight\n};\n","/** @module components/lights */\nexport * from './AmbientLight';\nexport * from './DirectionalLight';\nexport * from './HemisphereLight';\nexport * from './PointLight';\nexport * from './SpotLight';\nexport * from './AreaLight';\n","import {CubeCamera as CubeCameraNative} from 'three';\nimport {CameraComponent} from '../../core/CameraComponent';\n\n/**\n * @class CubeCamera\n * @category components/cameras\n * @description Creates 6 cameras that render to a WebGLRenderTargetCube\n * @param {Object} [params] - The parameters object.\n * @memberof module:components/cameras\n * @extends module:core.CameraComponent\n * @example <caption>Creates a CubeCamera and set it as app's camera</caption>\n * const camera = new CubeCamera({\n *   camera: {\n *     cubeResolution: 256\n *   },\n *\n *   position: {\n *     x: 0,\n *     y: 100,\n *     z: 0\n *   }\n * });\n *\n * app.camera = camera;\n */\nclass CubeCamera extends CameraComponent {\n\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/cameras.CubeCamera#defaults\n   * @static\n   * @default <pre>\n   * {\n   *   camera: {\n   *     near: 1,\n   *     far: 1000,\n   *     cubeResolution: 128\n   *   }\n   * }</pre>\n   */\n  static defaults = {\n    ...CameraComponent.defaults,\n\n    near: 1,\n    far: 1000,\n    cubeResolution: 128\n  };\n\n  constructor(params = {}) {\n    super(params, CubeCamera.defaults);\n  }\n\n  build(params = {}) {\n    return this.applyBridge({camera: new CubeCameraNative(\n      params.near,\n      params.far,\n      params.cubeResolution\n    )}).camera;\n  }\n}\n\nexport {\n  CubeCamera\n};\n","import {OrthographicCamera as OrthographicCameraNative} from 'three';\nimport {CameraComponent} from '../../core/CameraComponent';\nimport {system} from '../../polyfill';\n\n/**\n * @class OrthographicCamera\n * @category components/cameras\n * @description Camera with orthographic projection.\n * @param {Object} [params] - The parameters object.\n * @memberof module:components/cameras\n * @extends module:core.CameraComponent\n * @example <caption>Create an OrthographicCamera and set it as app's camera</caption>\n * const camera = new OrthographicCamera({\n *   camera: {\n *     far: 10000\n *   },\n *\n *   position: {\n *     y: 50\n *   }\n * });\n *\n * app.camera = camera;\n */\nclass OrthographicCamera extends CameraComponent {\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/cameras.OrthographicCamera#defaults\n   * @static\n   * @default <pre>\n   * {\n   *   near: 1,\n   *   far: 1000,\n   *   left: system.window.innerWidth / -2,\n   *   right: system.window.innerWidth / 2,\n   *   top: system.window.innerHeight / 2,\n   *   bottom: system.window.innerHeight / -2\n   * }</pre>\n   */\n  static defaults = {\n    ...CameraComponent.defaults,\n\n    near: 1,\n    far: 1000,\n    left: system.window.innerWidth / -2,\n    right: system.window.innerWidth / 2,\n    top: system.window.innerHeight / 2,\n    bottom: system.window.innerHeight / -2\n  };\n\n  constructor(params = {}) {\n    super(params, OrthographicCamera.defaults);\n  }\n\n  build(params = {}) {\n    return this.applyBridge({camera: new OrthographicCameraNative(\n      params.left,\n      params.right,\n      params.top,\n      params.bottom,\n      params.near,\n      params.far\n    )}).camera;\n  }\n}\n\nexport {\n  OrthographicCamera\n};\n","import {PerspectiveCamera as PerspectiveCameraNative} from 'three';\nimport {CameraComponent} from '../../core/CameraComponent';\nimport {system} from '../../polyfill';\n\n/**\n * @class PerspectiveCamera\n * @description Camera with perspective projection.\n * @category components/cameras\n * @param {Object} [params] - The parameters object.\n * @memberof module:components/cameras\n * @extends module:core.CameraComponent\n * @example <caption>Create an PerspectiveCamera and set it as app's camera</caption>\n * const camera = new PerspectiveCamera({\n *   fov: 75,\n *   aspect: window.innerWidth / window.innerHeight,\n *\n *   position: {\n *     x: 0,\n *     y: 100,\n *     z: 0\n *   }\n * });\n *\n * app.camera = camera;\n */\nclass PerspectiveCamera extends CameraComponent {\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/cameras.PerspectiveCamera#defaults\n   * @static\n   * @default <pre>\n   * {\n   *   near: 1,\n   *   far: 1000,\n   *   fov: 75,\n   *   aspect: system.window.innerWidth / system.window.innerHeight\n   * }</pre>\n   */\n  static defaults = {\n    ...CameraComponent.defaults,\n\n    near: 1,\n    far: 1000,\n    fov: 75,\n    aspect: system.window.innerWidth / system.window.innerHeight\n  };\n\n  constructor(params = {}) {\n    super(params, PerspectiveCamera.defaults);\n  }\n\n  build(params = {}) {\n    return this.applyBridge({camera: new PerspectiveCameraNative(\n      params.fov,\n      params.aspect,\n      params.near,\n      params.far\n    )}).camera;\n  }\n}\n\nexport {\n  PerspectiveCamera\n};\n","/** @module components/cameras */\nexport * from './CubeCamera';\nexport * from './OrthographicCamera';\nexport * from './PerspectiveCamera';\n","import {\n  Mesh,\n  BoxBufferGeometry,\n  BoxGeometry\n} from 'three';\n\nimport {MeshComponent} from '../../core/MeshComponent';\n\n/**\n * @class Box\n * @category components/meshes\n * @description As told on Component definition, while you can pass any of the inherited params for this component construction, you will need to\n * pass specific parameters to build this mesh as a geometry object.\n * @classDesc\n * <iframe src=\"https://threejs.org/docs/scenes/geometry-browser.html#BoxGeometry\"></iframe>\n * @param {Object} [params] - The params.\n * @extends module:core.MeshComponent\n * @memberof module:components/meshes\n * @example <caption>Creating a Box, and adding to app</caption>\n *  new Box({\n *    geometry: {\n *      width: 2,\n *      height: 2,\n *      depth: 2\n *    },\n *\n *    material: new THREE.MeshBasicMaterial({\n *      color: 0xffffff\n *    }),\n *\n *    position: [50, 60, 70]\n * }).addTo(app);\n */\nclass Box extends MeshComponent {\n\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/meshes.Box#defaults\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: {\n   *     width: 1,\n   *     height: 1,\n   *     depth: 1,\n   *     widthSegments: 1,\n   *     heightSegments: 1,\n   *     depthSegments: 1\n   *   }\n   * }</pre>\n   */\n  static defaults = {\n    ...MeshComponent.defaults,\n    geometry: {\n      width: 1,\n      height: 1,\n      depth: 1,\n      widthSegments: 1,\n      heightSegments: 1,\n      depthSegments: 1\n    }\n  };\n\n  /**\n   * Instructions\n   * @member {Object} module:components/meshes.Box#instructions\n   * @static\n   * @default geometry: ['width', 'height', 'depth', 'widthSegments', 'heightSegments', 'depthSegements']\n   */\n  static instructions = {\n    ...MeshComponent.instructions,\n    geometry: ['width', 'height', 'depth', 'widthSegments', 'heightSegments', 'depthSegements']\n  };\n\n  constructor(params = {}) {\n    super(params, Box.defaults, Box.instructions);\n  }\n\n  /**\n   * @method build\n   * @description Build lifecycle creates a mesh using input params.\n   * @param {Object} params Component parameters.\n   * @return {THREE.Mesh} Built mesh\n   * @memberof module:components/meshes.Box\n   */\n  build(params = this.params) {\n    const {geometry, material} = this.applyBridge({\n      geometry: this.buildGeometry(params),\n      material: params.material\n    });\n\n    return this.applyBridge({mesh: new Mesh(geometry, material)}).mesh;\n  }\n\n  buildGeometry(params = {}) {\n    const geometry = new (params.buffer ? BoxBufferGeometry : BoxGeometry)(\n      params.geometry.width,\n      params.geometry.height,\n      params.geometry.depth,\n      params.geometry.widthSegments,\n      params.geometry.heightSegments,\n      params.geometry.depthSegments\n    );\n\n    return geometry;\n  }\n}\n\nexport {\n  Box\n};\n","import {\n  Mesh,\n  CircleBufferGeometry,\n  CircleGeometry\n} from 'three';\n\nimport {MeshComponent} from '../../core/MeshComponent';\n\n/**\n * @class Circle\n * @category components/meshes\n * @description As told on Component definition, while you can pass any of the inherited params for this component construction, you will need to\n * pass specific parameters to build this mesh as a geometry object.\n * @classDesc\n * <iframe src=\"https://threejs.org/docs/scenes/geometry-browser.html#CircleGeometry\"></iframe>\n * @param {Object} [params] - The params.\n * @extends module:core.MeshComponent\n * @memberof module:components/meshes\n * @example <caption>Creating a Circle, and adding to app</caption>\n *  new Circle({\n *    geometry: {\n *      radius: 4,\n *      segments: 16\n *    },\n *\n *    material: new THREE.MeshBasicMaterial({\n *      color: 0xffffff\n *    }),\n *\n *    position: [50, 60, 70]\n * }).addTo(app);\n */\nclass Circle extends MeshComponent {\n\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/meshes.Circle#defaults\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: {\n   *     radius: 50,\n   *     segments: 8,\n   *     thetaStart: 0,\n   *     thetaLength: Math.PI * 2\n   *   }\n   * }</pre>\n   */\n  static defaults = {\n    ...MeshComponent.defaults,\n\n    geometry: {\n      radius: 50,\n      segments: 8,\n      thetaStart: 0,\n      thetaLength: Math.PI * 2\n    }\n  };\n\n  /**\n   * Instructions\n   * @member {Object} module:components/meshes.Circle#instructions\n   * @static\n   * @default geometry: ['radius', 'segments', 'thetaStart', 'thetaLength']\n   */\n  static instructions = {\n    ...MeshComponent.instructions,\n    geometry: ['radius', 'segments', 'thetaStart', 'thetaLength']\n  };\n\n  constructor(params = {}) {\n    super(params, Circle.defaults, Circle.instructions);\n  }\n\n  /**\n   * @method build\n   * @description Build lifecycle creates a mesh using input params.\n   * @param {Object} params Component parameters.\n   * @return {THREE.Mesh} Built mesh\n   * @memberof module:components/meshes.Circle\n   */\n  build(params = this.params) {\n    const {geometry, material} = this.applyBridge({\n      geometry: this.buildGeometry(params),\n      material: params.material\n    });\n\n    return this.applyBridge({mesh: new Mesh(geometry, material)}).mesh;\n  }\n\n  buildGeometry(params = {}) {\n    const geometry = new (params.buffer ? CircleBufferGeometry : CircleGeometry)(\n      params.geometry.radius,\n      params.geometry.segments,\n      params.geometry.thetaStart,\n      params.geometry.thetaLength\n    );\n\n    return geometry;\n  }\n}\n\nexport {\n  Circle\n};\n","import {\n  Mesh,\n  ConeBufferGeometry,\n  ConeGeometry\n} from 'three';\n\nimport {MeshComponent} from '../../core/MeshComponent';\n\n/**\n * @class Cone\n * @category components/meshes\n * @description A cylinder is one of the most basic curvilinear geometric shapes, the surface formed by the points at a fixed distance from a given straight line, the axis of the cylinder. <br/><br/>\n * The solid enclosed by this surface and by two planes perpendicular to the axis is also called a cylinder.<br/>\n * The surface area and the volume of a cylinder have been known since deep antiquity.\n * @classDesc\n * <iframe src=\"https://threejs.org/docs/scenes/geometry-browser.html#ConeGeometry\"></iframe>\n * @param {Object} [params] - The params.\n * @extends module:core.MeshComponent\n * @memberof module:components/meshes\n * @example <caption>Creating a Cone, and adding to app</caption>\n * new Cone({\n *   geometry: {\n *     radiusTop: 2,\n *     radiusBottom: 4,\n *     height: 5\n *   },\n *\n *   material: new THREE.MeshBasicMaterial({\n *     color: 0xffffff\n *   }),\n *\n *   pos: [0, 100, 0]\n * }).addTo(app);\n */\nclass Cone extends MeshComponent {\n\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/meshes.Cone#defaults\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: {\n   *     radius: 20,\n   *     height: 100,\n   *     radiusSegments: 32,\n   *     heightSegments: 1,\n   *     openEnded: false,\n   *     thetaStart: 0,\n   *     thetaLength: Math.PI * 2\n   *   }\n   * }</pre>\n   */\n  static defaults = {\n    ...MeshComponent.defaults,\n\n    geometry: {\n      radius: 20,\n      height: 100,\n      radiusSegments: 32,\n      heightSegments: 1,\n      openEnded: false,\n      thetaStart: 0,\n      thetaLength: Math.PI * 2\n    }\n  };\n\n  /**\n   * Instructions\n   * @member {Object} module:components/meshes.Cone#instructions\n   * @static\n   * @default <pre>\n   * geometry: [\n   *   'radius',\n   *   'height',\n   *   'radiusSegments',\n   *   'heightSegments',\n   *   'openEnded',\n   *   'thetaStart',\n   *   'thetaLength'\n   * ]\n   * </pre>\n   */\n  static instructions = {\n    ...MeshComponent.instructions,\n    geometry: [\n      'radius',\n      'height',\n      'radiusSegments',\n      'heightSegments',\n      'openEnded',\n      'thetaStart',\n      'thetaLength'\n    ]\n  };\n\n  constructor(params = {}) {\n    super(params, Cone.defaults, Cone.instructions);\n\n    if (params.build) {\n      this.build(params);\n      super.wrap();\n    }\n  }\n\n  /**\n   * @method build\n   * @description Build lifecycle creates a mesh using input params.\n   * @param {Object} params Component parameters.\n   * @return {THREE.Mesh} Built mesh\n   * @memberof module:components/meshes.Cone\n   */\n  build(params = this.params) {\n    const {geometry, material} = this.applyBridge({\n      geometry: this.buildGeometry(params),\n      material: params.material\n    });\n\n    return this.applyBridge({mesh: new Mesh(geometry, material)}).mesh;\n  }\n\n  buildGeometry(params = {}) {\n    const geometry = new (params.buffer ? ConeBufferGeometry : ConeGeometry)(\n      params.geometry.radius,\n      params.geometry.height,\n      params.geometry.radiusSegments,\n      params.geometry.heightSegments,\n      params.geometry.openEnded,\n      params.geometry.thetaStart,\n      params.geometry.thetaLength\n    );\n\n    return geometry;\n  }\n}\n\nexport {\n  Cone\n};\n","import {\n  Mesh,\n  CylinderBufferGeometry,\n  CylinderGeometry\n} from 'three';\n\nimport {MeshComponent} from '../../core/MeshComponent';\n\n/**\n * @class Cylinder\n * @category components/meshes\n * @description A cylinder is one of the most basic curvilinear geometric shapes, the surface formed by the points at a fixed distance from a given straight line, the axis of the cylinder. <br/><br/>\n * The solid enclosed by this surface and by two planes perpendicular to the axis is also called a cylinder.<br/>\n * The surface area and the volume of a cylinder have been known since deep antiquity.\n * @classDesc\n * <iframe src=\"https://threejs.org/docs/scenes/geometry-browser.html#CylinderGeometry\"></iframe>\n * @param {Object} [params] - The params.\n * @extends module:core.MeshComponent\n * @memberof module:components/meshes\n * @example <caption>Creating a Cylinder, and adding to app</caption>\n * new Cylinder({\n *   geometry: {\n *     radiusTop: 2,\n *     radiusBottom: 4,\n *     height: 5\n *   },\n *\n *   material: new THREE.MeshBasicMaterial({\n *     color: 0xffffff\n *   }),\n *\n *   pos: [0, 100, 0]\n * }).addTo(app);\n */\nclass Cylinder extends MeshComponent {\n\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/meshes.Cylinder#defaults\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: {\n   *     radiusTop: 20,\n   *     radiusBottom: 20,\n   *     height: 100,\n   *     radiusSegments: 32,\n   *     heightSegments: 1,\n   *     openEnded: false,\n   *     thetaStart: 0,\n   *     thetaLength: Math.PI * 2\n   *   }\n   * }</pre>\n   */\n  static defaults = {\n    ...MeshComponent.defaults,\n    geometry: {\n      radiusTop: 0,\n      radiusBottom: 1,\n      height: 1,\n      radiusSegments: 32,\n      heightSegments: 1,\n      openEnded: false,\n      thetaStart: 0,\n      thetaLength: Math.PI * 2\n    }\n  };\n\n  /**\n   * Instructions\n   * @member {Object} module:components/meshes.Cylinder#instructions\n   * @static\n   * @default <pre>\n   * geometry: [\n   *   'radiusTop',\n   *   'radiusBottom',\n   *   'height',\n   *   'radiusSegments',\n   *   'heightSegments',\n   *   'openEnded',\n   *   'thetaStart',\n   *   'thetaLength'\n   * ]\n   * </pre>\n   */\n  static instructions = {\n    ...MeshComponent.instructions,\n    geometry: [\n      'radiusTop',\n      'radiusBottom',\n      'height',\n      'radiusSegments',\n      'heightSegments',\n      'openEnded',\n      'thetaStart',\n      'thetaLength'\n    ]\n  };\n\n  constructor(params = {}) {\n    super(params, Cylinder.defaults, Cylinder.instructions);\n\n    if (params.build) {\n      this.build(params);\n      super.wrap();\n    }\n  }\n\n  /**\n   * @method build\n   * @description Build lifecycle creates a mesh using input params.\n   * @param {Object} params Component parameters.\n   * @return {THREE.Mesh} Built mesh\n   * @memberof module:components/meshes.Cylinder\n   */\n  build(params = this.params) {\n    const {geometry, material} = this.applyBridge({\n      geometry: this.buildGeometry(params),\n      material: params.material\n    });\n\n    return this.applyBridge({mesh: new Mesh(geometry, material)}).mesh;\n  }\n\n  buildGeometry(params = {}) {\n    const geometry = new (params.buffer ? CylinderBufferGeometry : CylinderGeometry)(\n      params.geometry.radiusTop,\n      params.geometry.radiusBottom,\n      params.geometry.height,\n      params.geometry.radiusSegments,\n      params.geometry.heightSegments,\n      params.geometry.openEnded,\n      params.geometry.thetaStart,\n      params.geometry.thetaLength\n    );\n\n    return geometry;\n  }\n}\n\nexport {\n  Cylinder\n};\n","import {\n  Mesh,\n  DodecahedronBufferGeometry,\n  DodecahedronGeometry\n} from 'three';\n\nimport {MeshComponent} from '../../core/MeshComponent';\n\n/**\n * @class Dodecahedron\n * @category components/meshes\n * @description In geometry, a dodecahedron is any polyhedron with twelve flat faces. <br/><br/>\n * The most familiar dodecahedron is the regular dodecahedron, which is a Platonic solid. <br/>\n * There are also three regular star dodecahedra, which are constructed as stellations of the convex form. <br/>\n * All of these have icosahedral symmetry, order 120.\n * Dodecahedron creates Dodecahedron object by it's radius and detail.\n * @classDesc\n * <iframe src=\"https://threejs.org/docs/scenes/geometry-browser.html#DodecahedronGeometry\"></iframe>\n * @param {Object} [params] - The params.\n * @extends module:core.MeshComponent\n * @memberof module:components/meshes\n * @example <caption>Creating a Dodecahedron, and adding to app</caption>\n * new Dodecahedron({\n *   geometry: {\n *     radius: 2\n *   },\n *\n *   material: new THREE.MeshBasicMaterial({\n *     color: 0xffffff\n *   }),\n *\n *   position: {\n *     y: 10\n *   }\n  * }).addTo(app);\n */\nclass Dodecahedron extends MeshComponent {\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/meshes.Dodecahedron#defaults\n   * @static\n   * @default <pre>\n   * geometry: {\n   *   radius: 1,\n   *   detail: 0\n   * }\n   * </pre>\n   */\n  static defaults = {\n    ...MeshComponent.defaults,\n    geometry: {\n      radius: 1,\n      detail: 0\n    }\n  };\n\n  /**\n   * Instructions\n   * @member {Object} module:components/meshes.Dodecahedron#instructions\n   * @static\n   * @default <pre>\n   * geometry: ['radius', 'detail']\n   * </pre>\n   */\n  static instructions = {\n    ...MeshComponent.instructions,\n    geometry: ['radius', 'detail']\n  };\n\n  constructor(params = {}) {\n    super(params, Dodecahedron.defaults, Dodecahedron.instructions);\n\n    if (params.build) {\n      this.build(params);\n      super.wrap();\n    }\n  }\n\n  /**\n   * @method build\n   * @description Build lifecycle creates a mesh using input params.\n   * @param {Object} params Component parameters.\n   * @return {THREE.Mesh} Built mesh\n   * @memberof module:components/meshes.Dodecahedron\n   */\n  build(params = this.params) {\n    const {geometry, material} = this.applyBridge({\n      geometry: this.buildGeometry(params),\n      material: params.material\n    });\n\n    return this.applyBridge({mesh: new Mesh(geometry, material)}).mesh;\n  }\n\n  buildGeometry(params = {}) {\n    return new (params.buffer ? DodecahedronBufferGeometry : DodecahedronGeometry)(\n      params.geometry.radius,\n      params.geometry.detail\n    );\n  }\n}\n\nexport {\n  Dodecahedron\n};\n","import {\n  Mesh,\n  BufferGeometry,\n  ExtrudeGeometry\n} from 'three';\n\nimport {MeshComponent} from '../../core/MeshComponent';\n\n/**\n * @class Extrude\n * @category components/meshes\n * @description Extrude geometry means that you can create a 3D mesh from any 2D shape using three.js geometry based on <a href='https://threejs.org/docs/#api/math/Vector2'>THREE.Vector2.</a> <br/>\n * Such implementation will help you to make volumed shapes that have their own depth and can be seen from all angels.<br/><br/>\n * You can also find some interesting examples made using <a href='threejs.org'>three.js</a> which is a core of whs.js, such as:\n * - <a href='http://threejs.org/examples/webgl_geometry_extrude_shapes.html'>Webgl geometry extrude</a>\n * - <a href='http://threejs.org/examples/webgl_geometry_extrude_shapes2.html'>Extrude shapes from geodata</a>\n * - <a href='http://threejs.org/examples/webgl_geometry_extrude_splines.html'>Extrude splines</a>\n *\n * Such examples can be easily implemented using whitestorm.js or it's plugins. Use `Extrude` class with <a href='https://threejs.org/docs/#api/extras/core/Shape'>THREE.Shape</a> to get extrude effect of shape defined by 2D vectors.\n * This class is similar to <a href='https://threejs.org/docs/#api/geometries/ExtrudeGeometry'>THREE.ExtrudeGeometry</a>,\n * but it also contains all properties, applied by `Shape`, such as material, mass and vectors like position (pos) and rotation (rot).\n * @classDesc\n * <iframe src=\"https://threejs.org/docs/scenes/geometry-browser.html#ExtrudeGeometry\"></iframe>\n * @param {Object} [params] - The params.\n * @extends module:core.MeshComponent\n * @memberof module:components/meshes\n * @example <caption>Creating a shape, then an Extrude from it</caption>\n * const shape = new THREE.Shape([\n *   new THREE.Vector2(-4,-4),\n *   new THREE.Vector2(-2,0),\n *   new THREE.Vector2(-4,4),\n *   new THREE.Vector2(0,2),\n *   new THREE.Vector2(4,4),\n *   new THREE.Vector2(2,0),\n *   new THREE.Vector2(4,-4),\n *   new THREE.Vector2(0,-2)\n * ]);\n *\n * const extrude = new Extrude({\n *   geometry: {\n *     shapes: shape,\n *     options: {\n *       bevelEnabled: false,\n *       bevelSize: 0,\n *       amount: 2\n *     }\n *   },\n *\n *   material: new THREE.MeshBasicMaterial({\n *     color: 0xffffff\n *   }),\n *\n *   position: [0, 100, 0]\n * });\n *\n * extrude.addTo(app);\n */\nclass Extrude extends MeshComponent {\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/meshes.Extrude#defaults\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: {\n   *     shapes: [],\n   *     options: {}\n   *   }\n   * }\n   * </pre>\n   */\n  static defaults = {\n    ...MeshComponent.defaults,\n    geometry: {\n      shapes: [],\n      options: {}\n    }\n  };\n\n  /**\n   * Instructions\n   * @member {Object} module:components/meshes.Extrude#instructions\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: ['shapes', 'options']\n   * }\n   * </pre>\n   */\n  static instructions = {\n    ...MeshComponent.instructions,\n    geometry: ['shapes', 'options']\n  };\n\n  constructor(params = {}) {\n    super(params, Extrude.defaults, Extrude.instructions);\n\n    if (params.build) {\n      this.build(params);\n      super.wrap();\n    }\n  }\n\n  /**\n   * @method build\n   * @description Build lifecycle creates a mesh using input params.\n   * @param {Object} params Component parameters.\n   * @return {THREE.Mesh} Built mesh\n   * @memberof module:components/meshes.Extrude\n   */\n  build(params = this.params) {\n    const {geometry, material} = this.applyBridge({\n      geometry: this.buildGeometry(params),\n      material: params.material\n    });\n\n    return this.applyBridge({mesh: new Mesh(geometry, material)}).mesh;\n  }\n\n  buildGeometry(params = {}) {\n    const geometry = new ExtrudeGeometry(\n      params.geometry.shapes,\n      params.geometry.options\n    );\n\n    return params.buffer ? new BufferGeometry().fromGeometry(geometry) : geometry;\n  }\n}\n\nexport {\n  Extrude\n};\n","import {\n  Mesh,\n  IcosahedronBufferGeometry,\n  IcosahedronGeometry\n} from 'three';\n\nimport {MeshComponent} from '../../core/MeshComponent';\n\n/**\n * @class Icosahedron\n * @category components/meshes\n * @description In geometry, an icosahedron is a polyhedron with 20 faces.<br/>\n * There are many kinds of icosahedra, with some being more symmetrical than others. The most well known is the Platonic, convex regular icosahedron.<br/>\n * `Icosahedron` creates an Icosahedron object by its radius and detail.\n * @classDesc\n * <iframe src=\"https://threejs.org/docs/scenes/geometry-browser.html#IcosahedronGeometry\"></iframe>\n * @param {Object} [params] - The params.\n * @extends module:core.MeshComponent\n * @memberof module:components/meshes\n * @example <caption>Creating a Icosahedron, and adding to app</caption>\n * new Icosahedron({\n *   geometry: {\n *     radius: 2,\n *     detail: 1\n *   },\n *\n *   material: new THREE.MeshBasicMaterial({\n *     color: 0xffffff\n *   }),\n *\n *   position: [0, 100, 0]\n * }).addTo(app);\n */\nclass Icosahedron extends MeshComponent {\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/meshes.Icosahedron#defaults\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: {\n   *     radius: 1,\n   *     detail: 0\n   *   }\n   * }</pre>\n   */\n  static defaults = {\n    ...MeshComponent.defaults,\n    geometry: {\n      radius: 1,\n      detail: 0\n    }\n  };\n\n  /**\n   * Instructions\n   * @member {Object} module:components/meshes.Icosahedron#instructions\n   * @static\n   * @default {geometry: ['radius', 'detail']}\n   */\n  static instructions = {\n    ...MeshComponent.instructions,\n    geometry: ['radius', 'detail']\n  };\n\n  constructor(params = {}) {\n    super(params, Icosahedron.defaults, Icosahedron.instructions);\n\n    if (params.build) {\n      this.build(params);\n      super.wrap();\n    }\n  }\n\n  /**\n   * @method build\n   * @description Build lifecycle creates a mesh using input params.\n   * @param {Object} params Component parameters.\n   * @return {THREE.Mesh} Built mesh\n   * @memberof module:components/meshes.Icosahedron\n   */\n  build(params = this.params) {\n    const {geometry, material} = this.applyBridge({\n      geometry: this.buildGeometry(params),\n      material: params.material\n    });\n\n    return this.applyBridge({mesh: new Mesh(geometry, material)}).mesh;\n  }\n\n  buildGeometry(params = {}) {\n    return new (params.buffer ? IcosahedronBufferGeometry : IcosahedronGeometry)(\n      params.geometry.radius,\n      params.geometry.detail\n    );\n  }\n}\n\nexport {\n  Icosahedron\n};\n","import {\n  Mesh,\n  LatheBufferGeometry,\n  LatheGeometry\n} from 'three';\n\nimport {MeshComponent} from '../../core/MeshComponent';\n\n/**\n * @class Lathe\n * @category components/meshes\n * @description A `LatheGeometry` allows you to create shapes from a smooth curve.\n * This curve is defined by a number of points (also called knots) and is most often called a spline. This spline is rotated around a fixed point and results in vase- and bell-like shapes.<br/><br/>\n * In 3D computer graphics, a lathed object is a 3D model whose vertex geometry is produced by rotating the points of a spline or other point set around a fixed axis.\n * The lathing may be partial; the amount of rotation is not necessarily a full 360 degrees.\n * The point set providing the initial source data can be thought of as a cross section through the object along a plane containing its axis of radial symmetry. <br/><br/>\n * The <a href='http://threejs.org/docs/scenes/geometry-browser.html#LatheGeometry'>following example</a> shows a geometry which can be generated using `Lathe` class.\n * @classDesc\n * <iframe src=\"https://threejs.org/docs/scenes/geometry-browser.html#LatheGeometry\"></iframe>\n * @param {Object} [params] - The params.\n * @extends module:core.MeshComponent\n * @memberof module:components/meshes\n * @example <caption>Creating a Lath, and adding to app</caption>\n * const points = [];\n *\n * for (let i = 0; i < 10; i++) {\n *   points.push(\n *     new THREE.Vector2(\n *       (Math.sin(i * 0.7) * 15 + 50) / 10,\n *       (i - 5) * 0.2\n *     )\n *   );\n * }\n *\n * const lathe = new Lathe({\n *   geometry: {\n *     points: points\n *   },\n *\n *   material: new THREE.MeshBasicMaterial({\n *     color: 0xffffff\n *   }),\n *\n *   position: [0, 50, 10]\n * }).addTo(app);\n */\nclass Lathe extends MeshComponent {\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/meshes.Lathe#defaults\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: {\n   *     points: []\n   *   }\n   * }\n   * </pre>\n   */\n  static defaults = {\n    ...MeshComponent.defaults,\n    geometry: {\n      points: []\n    }\n  };\n\n  /**\n   * Instructions\n   * @member {Object} module:components/meshes.Lathe#instructions\n   * @static\n   * @default <pre>{\n   *   geometry: ['points']\n   * }\n   * </pre>\n   */\n  static instructions = {\n    ...MeshComponent.instructions,\n    geometry: ['points']\n  };\n\n  constructor(params = {}) {\n    super(params, Lathe.defaults, Lathe.instructions);\n\n    if (params.build) {\n      this.build(params);\n      super.wrap();\n    }\n  }\n\n  /**\n   * @method build\n   * @description Build lifecycle creates a mesh using input params.\n   * @param {Object} params Component parameters.\n   * @return {THREE.Mesh} Built mesh\n   * @memberof module:components/meshes.Lathe\n   */\n  build(params = this.params) {\n    const {geometry, material} = this.applyBridge({\n      geometry: this.buildGeometry(params),\n      material: params.material\n    });\n\n    return this.applyBridge({mesh: new Mesh(geometry, material)}).mesh;\n  }\n\n  buildGeometry(params = {}) {\n    return new (params.buffer ? LatheBufferGeometry : LatheGeometry)(\n      params.geometry.points\n    );\n  }\n}\n\nexport {\n  Lathe\n};\n","import {\n  Line as LineNative,\n  BufferGeometry,\n  Geometry,\n  BufferAttribute,\n  LineCurve3,\n  Vector3\n} from 'three';\n\nimport {MeshComponent} from '../../core/MeshComponent';\n\n/**\n * @class Line\n * @category components/meshes\n * @description Line component is generated from a curve/line and amount of vectors that should be used (points).\n * @param {Object} [params] - The params.\n * @extends module:core.MeshComponent\n * @memberof module:components/meshes\n * @example <caption>Creating a Line, and adding to app</caption>\n * new Line({\n *   geometry: {\n *     curve: new THREE.LineCurve3(new THREE.Vector3(10, 10, 0), new THREE.Vector3(10, 30, 0))\n *   },\n *\n *   material: new THREE.MeshBasicMaterial({\n *     color: 0xffffff\n *   })\n * }).addTo(app);\n */\nclass Line extends MeshComponent {\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/meshes.Line#defaults\n   * @static\n   * @default <pre>\n   * {\n   *   curve: new LineCurve3(new Vector3(0, 0, 0), new Vector3(10, 0, 0)),\n   *   points: 50\n   * }\n   * </pre>\n   */\n  static defaults = {\n    ...MeshComponent.defaults,\n\n    curve: null,\n    points: 50\n  };\n\n  /**\n   * Instructions\n   * @member {Object} module:components/meshes.Line#instructions\n   * @static\n   * @default <pre>{\n   *   geometry: ['curve', 'points']\n   * }\n   * </pre>\n   */\n  static instructions = {\n    ...MeshComponent.instructions,\n    geometry: ['curve', 'points']\n  };\n\n  constructor(params) {\n    super(params, Line.defaults, Line.instructions);\n  }\n\n  /**\n   * @method build\n   * @description Build lifecycle creates a mesh using input params.\n   * @param {Object} params Component parameters.\n   * @return {THREE.Mesh} Built mesh\n   * @memberof module:components/meshes.Line\n   */\n  build(params = this.params) {\n    const {geometry, material} = this.applyBridge({\n      geometry: this.buildGeometry(params),\n      material: params.material\n    });\n\n    return this.applyBridge({mesh: new LineNative(geometry, material)}).mesh;\n  }\n\n  buildGeometry(params = {}) {\n    const geometry = params.buffer ? new BufferGeometry() : new Geometry();\n\n    if (params.buffer) {\n      const pp = params.curve.getPoints(params.points);\n      const verts = new Float32Array(pp.length * 3);\n\n      for (let i = 0, max = pp.length; i < max; i++) {\n        const i3 = i * 3;\n\n        verts[i3] = pp[i].x;\n        verts[i3 + 1] = pp[i].y;\n        verts[i3 + 2] = pp[i].z;\n      }\n\n      geometry.addAttribute('position', new BufferAttribute(verts, 3));\n    } else geometry.vertices = params.curve.getPoints(params.points);\n\n    return geometry;\n  }\n}\n\nexport {\n  Line\n};\n","import {\n  Mesh,\n  JSONLoader\n} from 'three';\n\nimport {MeshComponent} from '../../core/MeshComponent';\n\n/**\n * @class Importer\n * @category components/meshes\n * @description Importer is a loader for meshes and any other data to your scene\n * @param {Object} [params] - The params.\n * @extends module:core.MeshComponent\n * @memberof module:components/meshes\n * @example <caption>Creating a Importer, and adding to app</caption>\n * new Importer({\n *   loader: new THREE.OBJLoader(),\n *\n *   parser(geometry, material) { // data from loader\n *     return new THREE.Mesh(geometry, material); // should return your .native (mesh in this case)\n *   },\n *\n *   position: [0, 100, 0]\n * }).addTo(app);\n */\nclass Importer extends MeshComponent {\n\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/meshes.Importer#defaults\n   * @static\n   * @default <pre>\n   * {\n   *   url: '',\n   *   loader: new JSONLoader(),\n   *\n   *   onLoad() {},\n   *   onProgress() {},\n   *   onError() {},\n   *\n   *   texturePath: null,\n   *   useCustomMaterial: false,\n   *\n   *   parser(geometry, materials) {\n   *     return new Mesh(geometry, materials);\n   *   }\n   * }</pre>\n   */\n  static defaults = {\n    ...MeshComponent.defaults,\n\n    url: '',\n    loader: new JSONLoader(),\n\n    onLoad() {},\n    onProgress() {},\n    // TODO add onComplete?\n    onError() {},\n\n    texturePath: null,\n    useCustomMaterial: false,\n\n    parser(geometry, material) {\n      const {geom, mat} = this.applyBridge({geom: geometry, mat: material});\n\n      return this.applyBridge({\n        mesh: new Mesh(geom, mat)\n      }).mesh;\n    }\n  };\n\n  static instructions = {\n    ...MeshComponent.instructions\n  };\n\n  /**\n   * @method filter\n   * @description Default values for filter\n   * @static\n   * @param {THREE.Mesh} object Instance for iterating through it's children.\n   * @param {Function} filter Function with child as argument, should return a boolean whether include the child or not.\n   * @return {THREE.Mesh} object with children\n   * @memberof module:components/meshes.Importer\n   * @example <caption>Removing unnecessary lights from children</caption>\n   * new Importer({\n   *   loader: new THREE.OBJLoader(),\n   *\n   *   parse(group) { // data from loader\n   *     return Importer.filter(group, child => !child.isLight); // remove lights\n   *   },\n   *\n   *   position: [0, 100, 0]\n   * }).addTo(app);\n   */\n  static filter(object, filter) {\n    const processFilter = object => {\n      object.children.forEach((el, index) => {\n        if (el.children) processFilter(el);\n        if (!filter(el)) object.children.splice(index, 1);\n      });\n\n      return object;\n    };\n\n    return processFilter(object);\n  }\n\n  constructor(params = {}) {\n    super(params, Importer.defaults, Importer.instructions, false);\n  }\n\n  /**\n   * @method build\n   * @description Build lifecycle creates a mesh using input params.\n   * @param {Object} params Component parameters.\n   * @return {THREE.Mesh} Built mesh\n   * @memberof module:components/meshes.Importer\n   */\n  build(params = {}) {\n    return new Promise(resolve => {\n      if (params.texturePath) params.loader.setTexturePath(params.texturePath);\n\n      params.loader.load(params.url, (...data) => { // geometry, materials\n        params.onLoad(...data);\n\n        const object = params.parser.apply(this, data);\n        if (params.material) object.material = params.material;\n\n        resolve(object);\n      }, params.onProgress, params.onError);\n    });\n  }\n}\n\nexport {\n  Importer\n};\n","import {\n  Mesh,\n  OctahedronBufferGeometry,\n  OctahedronGeometry\n} from 'three';\n\nimport {MeshComponent} from '../../core/MeshComponent';\n\n/**\n * @class Octahedron\n * @category components/meshes\n * @description In geometry, an octahedron is a polyhedron with eight faces.\n * A regular octahedron is a Platonic solid composed of eight equilateral triangles, four of which meet at each vertex.\n * <br/><br/>\n * `Octahedron` creates an Octahedron object by its `radius` and `detail`.\n * @classDesc\n * <iframe src=\"https://threejs.org/docs/scenes/geometry-browser.html#OctahedronGeometry\"></iframe>\n * @param {Object} [params] - The params.\n * @extends module:core.MeshComponent\n * @memberof module:components/meshes\n * @example <caption>Creating an Octahedron, and adding to app</caption>\n * new Octahedron({\n *   geometry: {\n *     radius: 2,\n *     detail: 1\n *   },\n *\n *   material: new THREE.MeshBasicMaterial({\n *     color: 0xffffff\n *   }),\n *\n *   position: [0, 100, 0]\n * }).addTo(app);\n */\nclass Octahedron extends MeshComponent {\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/meshes.Octahedron#defaults\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: {\n   *     radius: 1,\n   *     detail: 0\n   *   }\n   * }\n   * </pre>\n   */\n  static defaults = {\n    ...MeshComponent.defaults,\n    geometry: {\n      radius: 1,\n      detail: 0\n    }\n  }\n\n  constructor(params = {}) {\n    super(params, Octahedron.defaults, Octahedron.instructions);\n\n    if (params.build) {\n      this.build(params);\n      super.wrap();\n    }\n  }\n\n  /**\n   * @method build\n   * @description Build lifecycle creates a mesh using input params.\n   * @param {Object} params Component parameters.\n   * @return {THREE.Mesh} Built mesh\n   * @memberof module:components/meshes.Octahedron\n   */\n  build(params = this.params) {\n    const {geometry, material} = this.applyBridge({\n      geometry: this.buildGeometry(params),\n      material: params.material\n    });\n\n    return this.applyBridge({mesh: new Mesh(geometry, material)}).mesh;\n  }\n\n  buildGeometry(params = {}) {\n    return new (params.buffer ? OctahedronBufferGeometry : OctahedronGeometry)(\n      params.geometry.radius,\n      params.geometry.detail\n    );\n  }\n}\n\nexport {\n  Octahedron\n};\n","import {\n  Mesh,\n  ParametricBufferGeometry,\n  ParametricGeometry,\n  Vector3\n} from 'three';\n\nimport {MeshComponent} from '../../core/MeshComponent';\n\n/**\n * @class Parametric\n * @category components/meshes\n * @description `Parametric` generates a geometry representing a <a href='https://en.wikipedia.org/wiki/Parametric_surface'>Parametric surface</a>\n * <br/><br/>\n * It is usually used to develop different kinds of highfields or visualize a <a href='https://stemkoski.github.io/Three.js/Graphulus-Function.html'>math function</a>.\n * <br/>\n * - <a href='http://math.hws.edu/graphicsbook/source/threejs/curves-and-surfaces.html'>Parametric surface</a>\n * - <a href='https://stemkoski.github.io/Three.js/Graphulus-Surface.html'>\"Graphulus\"</a>\n * <br/><br/>\n * @classDesc\n * <iframe src=\"https://threejs.org/docs/scenes/geometry-browser.html#ParametricGeometry\"></iframe>\n * @param {Object} [params] - The params.\n * @extends module:core.MeshComponent\n * @memberof module:components/meshes\n * @example <caption>Example creating an heightfield-like geometry. `u` and `v` are like `x` and `y` in shape, but their values are always from `0` to `1`.\n * We use them in `THREE.Vector3` like `x` and `z` and `Math.random() * 5` for `y`.</caption>\n * const createParametric = (u, v) => {\n *   return new THREE.Vector3(u * 30, Math.random() * 5, v * 30);\n * }\n *\n * new Parametric({\n *   geometry: {\n *     func: createParametric\n *   },\n *\n *   material: new THREE.MeshLambertMaterial({\n *     color: 0xffffff,\n *     side: THREE.DoubleSide\n *   }),\n *\n *   position: [0, 100, -100]\n * }).addTo(app);\n */\nclass Parametric extends MeshComponent {\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/meshes.Parametric#defaults\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: {\n   *     func: (u, v) => new Vector3(u, v, 0),\n   *     slices: 10,\n   *     tacks: 10\n   *   }\n   * }\n   * </pre>\n   */\n  static defaults = {\n    ...MeshComponent.defaults,\n    geometry: {\n      func: (u, v) => new Vector3(u, v, 0),\n      slices: 10,\n      stacks: 10\n    }\n  }\n\n  constructor(params = {}) {\n    super(params, Parametric.defaults, Parametric.instructions);\n  }\n\n  /**\n   * @method build\n   * @description Build lifecycle creates a mesh using input params.\n   * @param {Object} params Component parameters.\n   * @return {THREE.Mesh} Built mesh\n   * @memberof module:components/meshes.Parametric\n   */\n  build(params = this.params) {\n    const {geometry, material} = this.applyBridge({\n      geometry: this.buildGeometry(params),\n      material: params.material\n    });\n\n    return this.applyBridge({mesh: new Mesh(geometry, material)}).mesh;\n  }\n\n  buildGeometry(params = {}) {\n    return new (params.buffer ? ParametricBufferGeometry : ParametricGeometry)(\n      params.geometry.func,\n      params.geometry.slices,\n      params.geometry.stacks\n    );\n  }\n}\n\nexport {\n  Parametric\n};\n","import {\n  Mesh,\n  PlaneBufferGeometry,\n  PlaneGeometry\n} from 'three';\n\nimport {MeshComponent} from '../../core/MeshComponent';\n\n/**\n * @class Plane\n * @category components/meshes\n * @description `Plane` is used for creating planes given some `width` and `height`.\n * @classDesc\n * <iframe src=\"https://threejs.org/docs/scenes/geometry-browser.html#PlaneGeometry\"></iframe>\n * @param {Object} [params] - The params.\n * @extends module:core.MeshComponent\n * @memberof module:components/meshes\n * @example <caption>Creating a Plane, and adding to app</caption>\n * new Plane({\n *   geometry: {\n *     width: 20,\n *     height: 30\n *   },\n *\n *   material: new THREE.MeshBasicMaterial({\n *     color: 0xffffff\n *   })\n * }).addTo(app);\n */\nclass Plane extends MeshComponent {\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/meshes.Plane#defaults\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: {\n   *     width: 10,\n   *     height: 10,\n   *     wSegments: 1,\n   *     hSegments: 1\n   *   }\n   * }\n   * </pre>\n   */\n  static defaults = {\n    ...MeshComponent.defaults,\n    geometry: {\n      width: 10,\n      height: 10,\n      wSegments: 1,\n      hSegments: 1\n    }\n  };\n\n  /**\n   * Instructions\n   * @member {Object} module:components/meshes.Plane#instructions\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: ['width', 'height', 'wSegments', 'hSegments']\n   * }\n   * </pre>\n   */\n  static instructions = {\n    ...MeshComponent.instructions,\n    geometry: ['width', 'height', 'wSegments', 'hSegments']\n  };\n\n  constructor(params = {}) {\n    super(params, Plane.defaults, Plane.instructions);\n\n    if (params.build) {\n      this.build(params);\n      super.wrap();\n    }\n  }\n\n  /**\n   * @method build\n   * @description Build lifecycle creates a mesh using input params.\n   * @param {Object} params Component parameters.\n   * @return {THREE.Mesh} Built mesh\n   * @memberof module:components/meshes.Plane\n   */\n  build(params = this.params) {\n    const {geometry, material} = this.applyBridge({\n      geometry: this.buildGeometry(params),\n      material: params.material\n    });\n\n    return this.applyBridge({mesh: new Mesh(geometry, material)}).mesh;\n  }\n\n  buildGeometry(params = {}) {\n    const geometry = new (params.buffer ? PlaneBufferGeometry : PlaneGeometry)(\n      params.geometry.width,\n      params.geometry.height,\n      params.geometry.wSegments,\n      params.geometry.hSegments\n    );\n\n    return geometry;\n  }\n}\n\nexport {\n  Plane\n};\n","import {\n  Mesh,\n  PolyhedronBufferGeometry,\n  PolyhedronGeometry\n} from 'three';\n\nimport {MeshComponent} from '../../core/MeshComponent';\n\nconst [verticesOfCube, indicesOfFaces] = [\n  [\n    -1, -1, -1, 1, -1, -1, 1, 1, -1, -1, 1, -1,\n    -1, -1, 1, 1, -1, 1, 1, 1, 1, -1, 1, 1\n  ],\n  [\n    2, 1, 0, 0, 3, 2,\n    0, 4, 7, 7, 3, 0,\n    0, 1, 5, 5, 4, 0,\n    1, 2, 6, 6, 5, 1,\n    2, 3, 7, 7, 6, 2,\n    4, 5, 6, 6, 7, 4\n  ]\n];\n\n/**\n * @class Polyhedron\n * @category components/meshes\n * @description In elementary geometry, a polyhedron is a solid in three dimensions with flat polygonal faces, straight edges and sharp corners or vertices.\n * <br/><br/>\n * `Polyhedron` creates a Polyhedron by its `radius` and `detail`.\n * <br/><br/>\n * @param {Object} [params] - The params.\n * @extends module:core.MeshComponent\n * @memberof module:components/meshes\n * @example <caption>Creating an Polyhedron, and adding to app</caption>\n * new Polyhedron({\n *   geometry: {\n *     radius: 2,\n *     detail: 1\n *   },\n *\n *   material: new THREE.MeshBasicMaterial({\n *     color: 0xffffff\n *   }),\n *\n *   position: [0, 100, 0]\n * }).addTo(app);\n */\nclass Polyhedron extends MeshComponent {\n  static verticesOfCube = verticesOfCube;\n  static indicesOfFaces = indicesOfFaces;\n\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/meshes.Polyhedron#defaults\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: {\n   *     verticesOfCube: [\n   *       -1, -1, -1, 1, -1, -1, 1, 1, -1, -1, 1, -1,\n   *       -1, -1, 1, 1, -1, 1, 1, 1, 1, -1, 1, 1\n   *     ],\n   *\n   *     indicesOfFaces: [\n   *       2, 1, 0, 0, 3, 2,\n   *       0, 4, 7, 7, 3, 0,\n   *       0, 1, 5, 5, 4, 0,\n   *       1, 2, 6, 6, 5, 1,\n   *       2, 3, 7, 7, 6, 2,\n   *       4, 5, 6, 6, 7, 4\n   *     ],\n   *\n   *     radius: 6,\n   *     detail: 2\n   *   }\n   * }\n   * </pre>\n   */\n  static defaults = {\n    ...MeshComponent.defaults,\n    geometry: {\n      verticesOfCube,\n      indicesOfFaces,\n      radius: 6,\n      detail: 2\n    }\n  };\n\n  /**\n   * Instructions\n   * @member {Object} module:components/meshes.Polyhedron#instructions\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: ['verticesOfCube', 'indicesOfFaces', 'radius', 'detail']\n   * }\n   * </pre>\n   */\n  static instructions = {\n    ...MeshComponent.instructions,\n    geometry: ['verticesOfCube', 'indicesOfFaces', 'radius', 'detail']\n  };\n\n  constructor(params = {}) {\n    super(params, Polyhedron.defaults, Polyhedron.instructions);\n\n    if (params.build) {\n      this.build(params);\n      super.wrap();\n    }\n  }\n\n  /**\n   * @method build\n   * @description Build lifecycle creates a mesh using input params.\n   * @param {Object} params Component parameters.\n   * @return {THREE.Mesh} Built mesh\n   * @memberof module:components/meshes.Polyhedron\n   */\n  build(params = this.params) {\n    const {geometry, material} = this.applyBridge({\n      geometry: this.buildGeometry(params),\n      material: params.material\n    });\n\n    return this.applyBridge({mesh: new Mesh(geometry, material)}).mesh;\n  }\n\n  buildGeometry(params = {}) {\n    return new (params.buffer ? PolyhedronBufferGeometry : PolyhedronGeometry)(\n      params.geometry.verticesOfCube,\n      params.geometry.indicesOfFaces,\n      params.geometry.radius,\n      params.geometry.detail\n    );\n  }\n}\n\nexport {\n  Polyhedron\n};\n","import {\n  Mesh,\n  RingGeometry,\n  RingBufferGeometry\n} from 'three';\n\nimport {MeshComponent} from '../../core/MeshComponent';\n\n/**\n * @class Ring\n * @category components/meshes\n * @description Ring class creates a circle or just 2D Torus. Does not support physics.\n * @classDesc\n * <iframe src=\"https://threejs.org/docs/scenes/geometry-browser.html#RingGeometry\"></iframe>\n * @param {Object} [params] - The params.\n * @extends module:core.MeshComponent\n * @memberof module:components/meshes\n * @example <caption>Creating a Ring, and adding to app</caption>\n * new Ring({\n *   geometry: {\n *     innerRadius: 5,\n *     outerRadius: 2\n *   },\n *\n *   material: new THREE.MeshLambertMaterial({\n *     color: 0xffffff,\n *     side THREE.DoubleSide\n *   }),\n *\n *   position: [0, 8, 0],\n *\n *   rotation: {\n *     x: Math.PI/4\n *   }\n * }).addTo(app);\n */\nclass Ring extends MeshComponent {\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/meshes.Ring#defaults\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: {\n   *     innerRadius: 0,\n   *     outerRadius: 50,\n   *     thetaSegments: 8,\n   *     phiSegments: 8,\n   *     thetaStart: 0,\n   *     thetaLength: Math.PI * 2\n   *   }\n   * }\n   * </pre>\n   */\n  static defaults = {\n    ...MeshComponent.defaults,\n    geometry: {\n      innerRadius: 0,\n      outerRadius: 50,\n      thetaSegments: 8,\n      phiSegments: 8,\n      thetaStart: 0,\n      thetaLength: Math.PI * 2\n    }\n  };\n\n  /**\n   * Instructions\n   * @member {Object} module:components/meshes.Ring#instructions\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: [\n   *     'innerRadius',\n   *     'outerRadius',\n   *     'thetaSegments',\n   *     'phiSegments',\n   *     'thetaStart',\n   *     'thetaLength'\n   *   ]\n   * }\n   * </pre>\n   */\n  static instructions = {\n    ...MeshComponent.defaults,\n    geometry: [\n      'innerRadius',\n      'outerRadius',\n      'thetaSegments',\n      'phiSegments',\n      'thetaStart',\n      'thetaLength'\n    ]\n  };\n\n  constructor(params = {}) {\n    super(params, Ring.defaults, Ring.instructions);\n\n    if (params.build) {\n      this.build(params);\n      super.wrap();\n    }\n  }\n\n  /**\n   * @method build\n   * @description Build lifecycle creates a mesh using input params.\n   * @param {Object} params Component parameters.\n   * @return {THREE.Mesh} Built mesh\n   * @memberof module:components/meshes.Ring\n   */\n  build(params = this.params) {\n    const {geometry, material} = this.applyBridge({\n      geometry: this.buildGeometry(params),\n      material: params.material\n    });\n\n    return this.applyBridge({mesh: new Mesh(geometry, material)}).mesh;\n  }\n\n  buildGeometry(params = {}) {\n    return new (params.buffer ? RingBufferGeometry : RingGeometry)(\n      params.geometry.innerRadius,\n      params.geometry.outerRadius,\n      params.geometry.thetaSegments,\n      params.geometry.phiSegments,\n      params.geometry.thetaStart,\n      params.geometry.thetaLength\n    );\n  }\n}\n\nexport {\n  Ring\n};\n","import {\n  Mesh,\n  ShapeBufferGeometry,\n  ShapeGeometry\n} from 'three';\n\nimport {MeshComponent} from '../../core/MeshComponent';\n\n/**\n * @class Shape\n * @category components/meshes\n * @description Shape is a universal class. It allows you to create different 2D shapes in 3D scene.<br/>\n * Unfortunately, not all of them support physics, an alternative is to make a similar 3D object and scale its width down to near zero.\n * <br/><br/>\n * `Shape` consists of shapes that are in its shapes parameter.\n * @classDesc\n * <iframe src=\"https://threejs.org/docs/scenes/geometry-browser.html#ShapeGeometry\"></iframe>\n * @param {Object} [params] - The params.\n * @extends module:core.MeshComponent\n * @memberof module:components/meshes\n * @example <caption>Creating a plane looking Shape from a THREE.Shape, and adding it to app</caption>\n * const rectWidth = 10,\n * rectLength = 5;\n *\n * const rectShape = new THREE.Shape();\n * rectShape.moveTo(0,0);\n * rectShape.lineTo(0, rectWidth);\n * rectShape.lineTo(rectLength, rectWidth);\n * rectShape.lineTo(rectLength, 0);\n * rectShape.lineTo(0, 0);\n *\n * const plane = new Shape({\n *   geometry: {\n *     shape: rectShape\n *   },\n *\n *   material: new THREE.MeshBasicMaterial({\n *     color: 0xffffff\n *   })\n * }).addTo(app);\n */\nclass Shape extends MeshComponent {\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/meshes.Shape#defaults\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: {\n   *     shapes: []\n   * }\n   * </pre>\n   */\n  static defaults = {\n    ...MeshComponent.defaults,\n    geometry: {\n      shapes: []\n    }\n  };\n\n  /**\n   * Instructions\n   * @member {Object} module:components/meshes.Shape#instructions\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: ['shapes']\n   * }\n   * </pre>\n   */\n  static instructions = {\n    ...MeshComponent.instructions,\n    geometry: ['shapes']\n  };\n\n  constructor(params = {}) {\n    super(params, Shape.defaults, Shape.instructions);\n\n    if (params.build) {\n      this.build(params);\n      super.wrap();\n    }\n  }\n\n  /**\n   * @method build\n   * @description Build lifecycle creates a mesh using input params.\n   * @param {Object} params Component parameters.\n   * @return {THREE.Mesh} Built mesh\n   * @memberof module:components/meshes.Shape\n   */\n  build(params = this.params) {\n    const {geometry, material} = this.applyBridge({\n      geometry: this.buildGeometry(params),\n      material: params.material\n    });\n\n    return this.applyBridge({mesh: new Mesh(geometry, material)}).mesh;\n  }\n\n  buildGeometry(params = {}) {\n    return new (params.buffer ? ShapeBufferGeometry : ShapeGeometry)(\n      params.geometry.shapes\n    );\n  }\n}\n\nexport {\n  Shape\n};\n","import {\n  Mesh,\n  SphereBufferGeometry,\n  SphereGeometry\n} from 'three';\n\nimport {MeshComponent} from '../../core/MeshComponent';\n\n/**\n * @class Sphere\n * @category components/meshes\n * @description Sphere class is used to create sphere objects by its radius property and other values that determines its detality.\n * <br/><br/>\n * It is similar to THREE.SphereGeometry, but it also contains all `Shape` properties, such as material, mass and vectors like position (pos) and rotation (rot).\n * <br/><br/>\n * Then it creates an `Three.js mesh` or a `Physijs mesh`, that is similar to `Three.js mesh`, but it also take into consideration collision calculations.\n * This mesh is a combination of `Three.js geometry` and `Physijs material` (The same as in three.js, but with friction and restitution).\n * @classDesc\n * <iframe src=\"https://threejs.org/docs/scenes/geometry-browser.html#SphereGeometry\"></iframe>\n * @param {Object} [params] - The params.\n * @extends module:core.MeshComponent\n * @memberof module:components/meshes\n * @example <caption>Creating a Sphere, and adding it to app</caption>\n * new Sphere({\n *   geometry: {\n *     radius: 2\n *   },\n *\n *   material: new THREE.MeshBasicMaterial({\n *     color: 0xffffff\n *   }),\n *\n *   position: {\n *     y: 100\n *   }\n * }).addTo(app);\n */\nclass Sphere extends MeshComponent {\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/meshes.Sphere#defaults\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: {\n   *     radius: 1,\n   *     widthSegments: 8,\n   *     heightSegments: 6\n   * }\n   * </pre>\n   */\n  static defaults = {\n    ...MeshComponent.defaults,\n    geometry: {\n      radius: 1,\n      widthSegments: 8,\n      heightSegments: 6\n    }\n  };\n\n  /**\n   * Instructions\n   * @member {Object} module:components/meshes.Sphere#instructions\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: ['radius', 'widthSegments', 'heightSegments']\n   * }\n   * </pre>\n   */\n  static instructions = {\n    ...MeshComponent.instructions,\n    geometry: ['radius', 'widthSegments', 'heightSegments']\n  };\n\n  constructor(params = {}) {\n    super(params, Sphere.defaults, Sphere.instructions);\n  }\n\n  /**\n   * @method build\n   * @description Build lifecycle creates a mesh using input params.\n   * @param {Object} params Component parameters.\n   * @return {THREE.Mesh} Built mesh\n   * @memberof module:components/meshes.Sphere\n   */\n  build(params = this.params) {\n    const {geometry, material} = this.applyBridge({\n      geometry: this.buildGeometry(params),\n      material: params.material\n    });\n\n    return this.applyBridge({mesh: new Mesh(geometry, material)}).mesh;\n  }\n\n  buildGeometry(params = {}) {\n    const geometry = new (params.buffer ? SphereBufferGeometry : SphereGeometry)(\n      params.geometry.radius,\n      params.geometry.widthSegments,\n      params.geometry.heightSegments\n    );\n\n    return geometry;\n  }\n}\n\nexport {\n  Sphere\n};\n","import {\n  Mesh,\n  TetrahedronBufferGeometry,\n  TetrahedronGeometry\n} from 'three';\n\nimport {MeshComponent} from '../../core/MeshComponent';\n\n/**\n * @class Tetrahedron\n * @category components/meshes\n * @description In geometry, a tetrahedron is a polyhedron composed of four triangular faces, six straight edges, and four vertex corners.\n * The tetrahedron is the simplest of all the ordinary convex polyhedra and the only one that has fewer than 5 faces.\n * <br/><br/>\n * `Tetrahedron` creates a Tetrahedron object by its `radius` and `detail`\n * @classDesc\n * <iframe src=\"https://threejs.org/docs/scenes/geometry-browser.html#TetrahedronGeometry\"></iframe>\n * @param {Object} [params] - The params.\n * @extends module:core.MeshComponent\n * @memberof module:components/meshes\n * @example <caption>Creating a Tetrahedron, and adding it to app</caption>\n * new Tetrahedron({\n *   geometry: {\n *     radius: 2,\n *     detail: 1\n *   },\n *\n *   material: new THREE.MeshBasicMaterial({\n *     color: 0xffffff\n *   }),\n *\n *   position: {\n *     x: 0,\n *     y: 100,\n *     z: 0\n *   }\n * }).addTo(app);\n */\nclass Tetrahedron extends MeshComponent {\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/meshes.Tetrahedron#defaults\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: {\n   *     radius: 1,\n   *     detail: 0\n   * }\n   * </pre>\n   */\n  static defaults = {\n    ...MeshComponent.defaults,\n    geometry: {\n      radius: 1,\n      detail: 0\n    }\n  };\n\n  /**\n   * Instructions\n   * @member {Object} module:components/meshes.Tetrahedron#instructions\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: ['radius', 'detail']\n   * }\n   * </pre>\n   */\n  static instructions = {\n    ...MeshComponent.instructions,\n    geometry: ['radius', 'detail']\n  };\n\n  constructor(params = {}) {\n    super(params, Tetrahedron.defaults, Tetrahedron.instructions);\n\n    if (params.build) {\n      this.build(params);\n      super.wrap();\n    }\n  }\n\n  /**\n   * @method build\n   * @description Build lifecycle creates a mesh using input params.\n   * @param {Object} params Component parameters.\n   * @return {THREE.Mesh} Built mesh\n   * @memberof module:components/meshes.Tetrahedron\n   */\n  build(params = this.params) {\n    const {geometry, material} = this.applyBridge({\n      geometry: this.buildGeometry(params),\n      material: params.material\n    });\n\n    return this.applyBridge({mesh: new Mesh(geometry, material)}).mesh;\n  }\n\n  buildGeometry(params = {}) {\n    return new (params.buffer ? TetrahedronBufferGeometry : TetrahedronGeometry)(\n      params.geometry.radius,\n      params.geometry.detail\n    );\n  }\n}\n\nexport {\n  Tetrahedron\n};\n","import {\n  Font,\n  Mesh,\n  TextGeometry,\n  FontLoader\n} from 'three';\n\nimport {MeshComponent} from '../../core/MeshComponent';\n\n/**\n * @class Text\n * @category components/meshes\n * @description Text class is made for creating 3D text objects.\n * @classDesc\n * <iframe src=\"https://threejs.org/docs/scenes/geometry-browser.html#TextGeometry\"></iframe>\n * <br/><br/>\n * Physics text object can be convex or concave. By default it's convex but you can also switch to concave.\n * @param {Object} [params] - The params.\n * @extends module:core.MeshComponent\n * @memberof module:components/meshes\n * @example <caption>Creating a Text, and adding it to app</caption>\n * new Text({\n *     text: 'Some text',\n *     parameters: {\n *       font: 'path/to/font.typeface.js',\n *       size: 20,\n *       height: 5,\n *       curveSegments: 6\n *     }\n *   },\n *\n *   material: new THREE.MeshBasicMaterial({\n *     color: 0xffffff\n *   }),\n *\n *   position: {\n *     x: -40,\n *     y: 20,\n *     z: 0\n *   }\n * }).addTo(app);\n */\nclass Text extends MeshComponent {\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/meshes.Text#defaults\n   * @static\n   * @default <pre>\n   * {\n   *   text: 'Hello World!',\n   *   font: null,\n   *\n   *   geometry: {\n   *     size: 12,\n   *     height: 50,\n   *     curveSegments: 12,\n   *     font: new Font(),\n   *     bevelEnabled: false,\n   *     bevelThickness: 10,\n   *     bevelSize: 8\n   *   }\n   * }\n   * </pre>\n   */\n  static defaults = {\n    ...MeshComponent.defaults,\n    text: 'Hello World!',\n    font: null,\n\n    geometry: {\n      size: 12,\n      height: 50,\n      curveSegments: 12,\n      font: new Font(),\n      bevelEnabled: false,\n      bevelThickness: 10,\n      bevelSize: 8\n    }\n  };\n\n  static instructions = {\n    ...MeshComponent.instructions\n  };\n\n  /**\n   * Default FontLoader\n   * @member {Object} module:components/meshes.Text#loader\n   * @static\n   * @default new FontLoader()\n   */\n  static loader = new FontLoader();\n\n  /**\n   * @method load\n   * @static\n   * @description load() preloads a Font object and returns a Promise with it.\n   * @param {String} path Path to the font\n   * @return {Promise} A promise resolved with a font\n   * @memberof module:components/meshes.Text\n   */\n  static load(path, loader = Text.loader) {\n    return new Promise(resolve => {\n      loader.load(path, resolve);\n    });\n  }\n\n  constructor(params = {}) {\n    super(params, Text.defaults, Text.instructions);\n  }\n\n  /**\n   * @method build\n   * @description Build is called as part of the lifecycle to create a mesh using input params.\n   * @param {Object} params Component parameters.\n   * @return {THREE.Mesh} Built mesh\n   * @memberof module:components/meshes.Text\n   */\n  build(params = this.params) {\n    const promise = new Promise(resolve => {\n      (params.font instanceof Promise ? params.font : Promise.resolve(params.font))\n      .then(font => {\n        const {geometry, material} = this.applyBridge({\n          geometry: new TextGeometry(\n            params.text,\n            Object.assign(\n              params.geometry,\n              {font}\n            )\n          ),\n\n          material: params.material\n        });\n\n        resolve(\n          this.applyBridge({\n            mesh: new Mesh(geometry, material)\n          }).mesh\n        );\n      });\n    });\n\n    super.wait(promise);\n\n    return promise;\n  }\n}\n\nexport {\n  Text\n};\n","import {\n  Mesh,\n  TorusGeometry\n} from 'three';\n\nimport {MeshComponent} from '../../core/MeshComponent';\n\n/**\n * @class Torus\n * @category components/meshes\n * @description Torus class makes a torus figure. A donut is a torus.\n * @classDesc\n * <iframe src=\"https://threejs.org/docs/index.html#api/geometries/TorusGeometry\"></iframe>\n * @param {Object} [params] - The params.\n * @extends module:core.MeshComponent\n * @memberof module:components/meshes\n * @example <caption>Creating a Torus, and adding it to app</caption>\n * new Torus({\n *   geometry: {\n *     radius: 5,\n *     tube: 2\n *   },\n *\n *   material: new THREE.MeshBasicMaterial({\n *     color: 0xffffff\n *   }),\n *\n *   position: {\n *     y: 35\n *   }\n * }).addTo(app);\n */\nclass Torus extends MeshComponent {\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/meshes.Torus#defaults\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: {\n   *     radius: 100,\n   *     tube: 40,\n   *     radialSegments: 8,\n   *     tubularSegments: 6,\n   *     arc: Math.PI * 2\n   *   }\n   * }\n   * </pre>\n   */\n  static defaults = {\n    ...MeshComponent.defaults,\n    geometry: {\n      radius: 100,\n      tube: 40,\n      radialSegments: 8,\n      tubularSegments: 6,\n      arc: Math.PI * 2\n    }\n  };\n\n  /**\n   * Instructions\n   * @member {Object} module:components/meshes.Torus#instructions\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: [\n   *     'radius',\n   *     'tube',\n   *     'radialSegments',\n   *     'tubularSegments',\n   *     'arc'\n   *   ]\n   * }\n   * </pre>\n   */\n  static instructions = {\n    ...MeshComponent.instructions,\n    geometry: [\n      'radius',\n      'tube',\n      'radialSegments',\n      'tubularSegments',\n      'arc'\n    ]\n  };\n\n  constructor(params = {}) {\n    super(params, Torus.defaults, Torus.instructions);\n\n    if (params.build) {\n      this.build(params);\n      super.wrap();\n    }\n  }\n\n  /**\n   * @method build\n   * @description Build lifecycle creates a mesh using input params.\n   * @param {Object} params Component parameters.\n   * @return {THREE.Mesh} Built mesh\n   * @memberof module:components/meshes.Torus\n   */\n  build(params = this.params) {\n    const {geometry, material} = this.applyBridge({\n      geometry: this.buildGeometry(params),\n      material: params.material\n    });\n\n    return this.applyBridge({mesh: new Mesh(geometry, material)}).mesh;\n  }\n\n  buildGeometry(params = {}) {\n    return new TorusGeometry(\n      params.geometry.radius,\n      params.geometry.tube,\n      params.geometry.radialSegments,\n      params.geometry.tubularSegments,\n      params.geometry.arc\n    );\n  }\n}\n\nexport {\n  Torus\n};\n","import {\n  Mesh,\n  TorusKnotBufferGeometry,\n  TorusKnotGeometry\n} from 'three';\n\nimport {MeshComponent} from '../../core/MeshComponent';\n\n/**\n * @class Torusknot\n * @category components/meshes\n * @description Torusknot class makes a torusknot figure. It's like a crooked donut, very crooked.\n * @classDesc\n * <iframe src=\"https://threejs.org/docs/scenes/geometry-browser.html#TorusKnotGeometry\"></iframe>\n * @param {Object} [params] - The params.\n * @extends module:core.MeshComponent\n * @memberof module:components/meshes\n * @example <caption>Creating a Torusknot, and adding it to app</caption>\n * new Torusknot({\n *   geometry: {\n *     radius:5,\n *     tube: 2\n *   },\n *\n *   material: new THREE.MeshBasicMaterial({\n *     color: 0xffffff\n *   }),\n *\n *   pos: {\n *     y: 100\n *   }\n * }).addTo(app);\n */\nclass Torusknot extends MeshComponent {\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/meshes.Torusknot#defaults\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: {\n   *     radius: 100,\n   *     tube: 40,\n   *     radialSegments: 64,\n   *     tubularSegments: 8,\n   *     p: 2,\n   *     q: 3\n   *   }\n   * }\n   * </pre>\n   */\n  static defaults = {\n    ...MeshComponent.defaults,\n    geometry: {\n      radius: 100,\n      tube: 40,\n      radialSegments: 64,\n      tubularSegments: 8,\n      p: 2,\n      q: 3\n    }\n  };\n\n  /**\n   * Instructions\n   * @member {Object} module:components/meshes.Torusknot#instructions\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: [\n   *     'radius',\n   *     'tube',\n   *     'radialSegments',\n   *     'tubularSegments',\n   *     'p',\n   *     'q'\n   *   ]\n   * }\n   * </pre>\n   */\n  static instructions = {\n    ...MeshComponent.instructions,\n    geometry: [\n      'radius',\n      'tube',\n      'radialSegments',\n      'tubularSegments',\n      'p',\n      'q'\n    ]\n  };\n\n  constructor(params = {}) {\n    super(params, Torusknot.defaults, Torusknot.instructions);\n\n    if (params.build) {\n      this.build(params);\n      super.wrap();\n    }\n  }\n\n  /**\n   * @method build\n   * @description Build lifecycle creates a mesh using input params.\n   * @param {Object} params Component parameters.\n   * @return {THREE.Mesh} Built mesh\n   * @memberof module:components/meshes.Torusknot\n   */\n  build(params = this.params) {\n    const {geometry, material} = this.applyBridge({\n      geometry: this.buildGeometry(params),\n      material: params.material\n    });\n\n    return this.applyBridge({mesh: new Mesh(geometry, material)}).mesh;\n  }\n\n  buildGeometry(params = {}) {\n    const GConstruct = params.buffer ? TorusKnotBufferGeometry : TorusKnotGeometry;\n\n    return new GConstruct(\n      params.geometry.radius,\n      params.geometry.tube,\n      params.geometry.radialSegments,\n      params.geometry.tubularSegments,\n      params.geometry.p,\n      params.geometry.q\n    );\n  }\n}\n\nexport {\n  Torusknot\n};\n","import {\n  Mesh,\n  LineCurve3,\n  Vector3,\n  TubeBufferGeometry,\n  TubeGeometry\n} from 'three';\n\nimport {MeshComponent} from '../../core/MeshComponent';\n\n/**\n * @class Tube\n * @category components/meshes\n * @description Tube class makes a tube that extrudes along a 3d curve.\n * @classDesc\n * <iframe src=\"https://threejs.org/docs/index.html#api/geometries/TubeGeometry\"></iframe>\n * @param {Object} [params] - The params.\n * @extends module:core.MeshComponent\n * @memberof module:components/meshes\n * @example <caption>Creating a Tube from a three.js Curve, and adding it to app</caption>\n * const CustomSinCurve = THREE.Curve.create(\n *   function (scale) { // custom curve constructor\n *     this.scale = (scale === undefined) ? 1 : scale;\n *   },\n *\n *   function (t) { // getPoint: t is between 0-1\n *     const tx = t * 3 - 1.5,\n *     ty = Math.sin( 2 * Math.PI * t ),\n *     tz = 0;\n *\n *     return new THREE.Vector3(tx, ty, tz).multiplyScalar(this.scale);\n *   }\n * );\n *\n * const path = new CustomSinCurve(10);\n *\n * new Tube({\n *   geometry: {\n *     path: path\n *   },\n *\n *   material: new THREE.MeshBasicMaterial({\n *     color: 0xffffff\n *   })\n * }).addTo(app);\n */\nclass Tube extends MeshComponent {\n  /**\n   * Default values for parameters\n   * @member {Object} module:components/meshes.Tube#defaults\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: {\n   *     path: new THREE.LineCurve3(new Vector3(0, 0, 0), new Vector3(0, 0, 1)),\n   *     segments: 20,\n   *     radius: 2,\n   *     radiusSegments: 8,\n   *     closed: false\n   *   }\n   * }\n   * </pre>\n   */\n  static defaults = {\n    ...MeshComponent.defaults,\n    geometry: {\n      path: new LineCurve3(new Vector3(0, 0, 0), new Vector3(0, 0, 1)),\n      segments: 20,\n      radius: 2,\n      radiusSegments: 8,\n      closed: false\n    }\n  };\n\n  /**\n   * Instructions\n   * @member {Object} module:components/meshes.Tube#instructions\n   * @static\n   * @default <pre>\n   * {\n   *   geometry: [\n   *     'path',\n   *     'segments',\n   *     'radius',\n   *     'radiusSegments',\n   *     'closed'\n   *   ]\n   * }\n   * </pre>\n   */\n  static instructions = {\n    ...MeshComponent.instructions,\n    geometry: [\n      'path',\n      'segments',\n      'radius',\n      'radiusSegments',\n      'closed'\n    ]\n  };\n\n  constructor(params = {}) {\n    super(params, Tube.defaults, Tube.instructions);\n\n    if (params.build) {\n      this.build(params);\n      super.wrap();\n    }\n  }\n\n  /**\n   * @method build\n   * @description Build lifecycle creates a mesh using input params.\n   * @param {Object} params Component parameters.\n   * @return {THREE.Mesh} Built mesh\n   * @memberof module:components/meshes.Tube\n   */\n  build(params = this.params) {\n    const {geometry, material} = this.applyBridge({\n      geometry: this.buildGeometry(params),\n      material: params.material\n    });\n\n    return this.applyBridge({mesh: new Mesh(geometry, material)}).mesh;\n  }\n\n  buildGeometry(params = {}) {\n    const geometry = new (params.buffer ? TubeBufferGeometry : TubeGeometry)(\n      params.geometry.path,\n      params.geometry.segments,\n      params.geometry.radius,\n      params.geometry.radiusSegments,\n      params.geometry.closed\n    );\n\n    return geometry;\n  }\n}\n\nexport {\n  Tube\n};\n","import {Object3D} from 'three';\nimport {MeshComponent} from '../../core/MeshComponent';\nimport {Component} from '../../core/Component';\n\n/**\n * @class Group\n * @category components/meshes\n * @description Sometimes you need to make groups of objects (it's not conveniently to apply transforms to each object when can make just one to a group).<br/>\n * In Three.js you make it using `THREE.Object3D` and it's children. <br/><br/>\n * In whs.js we have `Group`\n * @extends module:core.MeshComponent\n * @memberof module:components/meshes\n * @example <caption>Approach 2 - Adding objects to an empty group</caption>\n * const sphere = new Sphere();\n * const box = new Box();\n * const group = new Group();\n *\n * sphere.addTo(group);\n * box.addTo(group);\n* @example <caption>Approach 2 - Making a group from objects</caption>\n * const sphere = new Sphere();\n * const box = new Box();\n * const group = new Group(box, sphere);\n * // OR: const group = new Group([box, sphere]);\n */\nclass Group extends MeshComponent {\n  constructor(...objects) {\n    super({});\n\n    for (let i = 0; i < objects.length; i++) {\n      const obj = objects[i];\n\n      if (obj instanceof Component) obj.addTo(this);\n      else if (obj instanceof Object3D) this.native.add(obj);\n    }\n  }\n\n  build() {\n    return new Object3D();\n  }\n}\n\nexport {\n  Group\n};\n","/** @module components/meshes */\nexport * from './Box';\nexport * from './Circle';\nexport * from './Cone';\nexport * from './Cylinder';\nexport * from './Dodecahedron';\nexport * from './Extrude';\nexport * from './Icosahedron';\nexport * from './Lathe';\nexport * from './Line';\nexport * from './Importer';\nexport * from './Octahedron';\nexport * from './Parametric';\nexport * from './Plane';\nexport * from './Polyhedron';\nexport * from './Ring';\nexport * from './Shape';\nexport * from './Sphere';\nexport * from './Tetrahedron';\nexport * from './Text';\nexport * from './Torus';\nexport * from './Torusknot';\nexport * from './Tube';\nexport * from './Group';\n","/**\n * @class ElementModule\n * @category modules/app\n * @param {Object} [container=document.body] container is the DOM object to which application's canvas will be added to.\n * @memberof module:modules/app\n * @example <caption>Creating an element module, passing it to the App</caption>\n * new App([\n *   new ElementModule(document.getElementById('app'))\n * ]);\n */\nexport class ElementModule {\n  constructor(container = document.body) {\n    if (container.container) {\n      console.warn('ElementModule now accepts only argument which is a DOM object, not a params object.');\n      this.container = container.container;\n    } else this.container = container;\n\n    this.createElement();\n  }\n\n  /**\n   * @method createElement\n   * @instance\n   * @description Creates a canvas element.\n   * @memberof module:modules/app.ResizeModule\n   */\n  createElement() {\n    this.element = window.document.createElement('div');\n\n    this.element.className = 'whs-app';\n    this.element.style.width = 'inherit';\n    this.element.style.height = 'inherit';\n    this.element.style.position = 'relative';\n  }\n\n  manager(manager) {\n    manager.set('element', this.element);\n    manager.set('container', this.container);\n  }\n\n  integrate(self) {\n    self.container.appendChild(self.element);\n  }\n}\n","import {\n  WebGLRenderer,\n  Vector2\n} from 'three';\n\nimport {Loop} from '../../core/Loop';\n\n/**\n * @class RenderingModule\n * @category modules/app\n * @param {Object} [params]\n * @memberof module:modules/app\n * @example <caption> Creating a rendering module and passing it to App's modules</caption>\n * new App([\n *   new ElementModule(),\n *   new SceneModule(),\n *   new DefineModule('camera', new PerspectiveCamera({\n *     position: new THREE.Vector3(0, 6, 18),\n *     far: 10000\n *   })),\n *   new RenderingModule({\n *     bgColor: 0x162129,\n *\n *     renderer: {\n *       antialias: true\n *     }\n *   }, {shadow: true})\n * ]);\n */\nexport class RenderingModule {\n  /**\n   * additional\n   * @description collection of additional scripts\n   * @static\n   * @member {Object} module:core.App#additional\n   * @public\n   */\n  static additional = {\n    shadow(renderer) {\n      renderer.shadowMap.enabled = true;\n    }\n  }\n\n  /**\n   * enabled\n   * @static\n   * @member {Boolean} module:core.App#enabled\n   * @public\n   */\n  enabled = true;\n\n  constructor(params = {}, additional) {\n    this.params = Object.assign({\n      width: window.innerWidth,\n      height: window.innerHeight,\n\n      resolution: new Vector2(1, 1),\n      pixelRatio: window.devicePixelRatio,\n\n      bgColor: 0x000000,\n      bgOpacity: 1,\n\n      renderer: {},\n      fix() {}\n    }, params);\n\n    const {\n      bgColor,\n      bgOpacity,\n      renderer,\n      pixelRatio,\n      width,\n      height,\n      resolution,\n      fix\n    } = this.params;\n\n    this.renderer = new WebGLRenderer(renderer);\n    this.effects = [];\n\n    this.renderer.setClearColor(\n      bgColor,\n      bgOpacity\n    );\n\n    if (pixelRatio) this.renderer.setPixelRatio(pixelRatio);\n\n    this.setSize(\n      Number(width * resolution.x).toFixed(),\n      Number(height * resolution.y).toFixed()\n    );\n\n    for (const key in additional)\n      if (additional[key]) this.applyAdditional(key);\n\n    fix(this.renderer);\n  }\n\n  /**\n   * @method applyAdditional\n   * @description Apply additional script from RenderingModule.additional\n   * @param {Stirng} name Script name\n   * @return {this}\n   * @memberof module:modules/app.RenderingModule\n   */\n  applyAdditional(name) {\n    RenderingModule.additional[name].apply(this, [this.renderer]);\n  }\n\n  /**\n   * @method integrateRenderer\n   * @description Integrate renderer\n   * @param {NodeElement} element DOM object\n   * @param {THREE.Scene} scene used scene\n   * @param {THREE.Camera} camera used camera\n   * @return {Loop} renderLoop\n   * @memberof module:modules/app.RenderingModule\n   */\n  integrateRenderer(element, scene, camera) {\n    this.scene = scene;\n    this.camera = camera;\n    this.attachToCanvas(element);\n\n    return new Loop(() => this.renderer.render(this.scene, this.camera));\n  }\n\n  /**\n   * @method effect\n   * @description Add three.js effect\n   * @param {Object} effect three.js effect\n   * @param {function} effectLoop update function for effect\n   * @return {this}\n   * @memberof module:modules/app.RenderingModule\n   */\n  effect(effect, effectLoop = () => {\n    effect.render(this.scene, this.camera);\n  }) {\n    this.renderLoop.stop();\n\n    const size = this.renderer.getSize();\n    effect.setSize(size.width, size.height);\n\n    const loop = new Loop(effectLoop);\n\n    this.effects.push(loop);\n    if (this.enabled) loop.start(this.app);\n\n    return this;\n  }\n\n  /**\n   * @method setSize\n   * @description Update render target width and height.\n   * @param {Number} width\n   * @param {Number} height\n   * @memberof module:modules/app.RenderingModule\n   */\n  setSize(width, height) {\n    if (this.renderer) this.renderer.setSize(width, height);\n  }\n\n  /**\n   * @method attachToCanvas\n   * @description Attach renderer.domElement to element\n   * @param {NodeElement} element DOM object\n   * @memberof module:modules/app.RenderingModule\n   */\n  attachToCanvas(element) {\n    const canvas = this.renderer.domElement;\n\n    // attach to new parent world dom\n    element.appendChild(canvas);\n    canvas.style.width = '100%';\n    canvas.style.height = '100%';\n  }\n\n  /**\n   * @method stop\n   * @description Stops renderLoop and effect loops\n   * @memberof module:modules/app.RenderingModule\n   */\n  stop() {\n    this.enabled = false;\n    this.renderLoop.stop();\n    this.effects.forEach(loop => loop.stop());\n  }\n\n  /**\n   * @method play\n   * @description Resumes renderLoop and effect loops\n   * @memberof module:modules/app.RenderingModule\n   */\n  play() {\n    this.enabled = true;\n    this.renderLoop.start();\n    this.effects.forEach(loop => loop.start());\n  }\n\n  manager(manager) {\n    manager.define('rendering');\n    manager.set('renderer', this.renderer);\n\n    this.app = manager.handler;\n\n    this.renderLoop = this.integrateRenderer(\n      manager.get('element'),\n      manager.get('scene'),\n      manager.get('camera').native\n    );\n\n    manager.update({\n      element: element => {\n        this.attachToCanvas(element);\n      },\n      scene: scene => {\n        this.scene = scene;\n      },\n      camera: camera => {\n        this.camera = camera.native;\n      }\n    });\n  }\n\n  integrate(self) {\n    self.renderLoop.start(this);\n    self.effects.forEach(loop => loop.start(this));\n  }\n\n  /**\n   * @method dispose\n   * @description Dispose rendering context\n   * @memberof module:modules/app.RenderingModule\n   */\n  dispose() {\n    this.stop();\n    this.renderer.forceContextLoss();\n  }\n}\n","import {\n  Scene\n} from 'three';\n\n/**\n * @class SceneModule\n * @category modules/app\n * @param {Boolean} [willSceneBeReplaced=false] willSceneBeReplaced should be true only if you are going to overwrite scene dependency even without the use of default one.\n * @memberof module:modules/app\n */\nexport class SceneModule {\n  constructor(willSceneBeReplaced = false) {\n    this.scene = willSceneBeReplaced ? null : new Scene();\n  }\n\n  manager(manager) {\n    manager.set('scene', this.scene);\n  }\n\n  integrate(self) {\n    this.children = [];\n\n    this.add = function (object) {\n      object.parent = this;\n\n      return new Promise((resolve, reject) => {\n        object.defer(() => {\n          const {native} = object;\n          if (!native) reject();\n\n          const addPromise = this.applyBridge({onAdd: object}).onAdd;\n\n          const resolver = () => {\n            self.scene.add(native);\n            this.children.push(object);\n\n            resolve(object);\n          };\n\n          if (addPromise instanceof Promise)\n            addPromise.then(resolver);\n          else resolver();\n        });\n      });\n    };\n\n    this.remove = function (object) {\n      object.parent = null;\n      self.scene.remove(object.native);\n    };\n\n    this.setScene = function (scene) {\n      self.scene = scene;\n      this.manager.set('scene', scene);\n    };\n  }\n}\n","// import {addResizeListener} from 'detect-element-resize';\n\n/**\n * @class ResizeModule\n * @category modules/app\n * @param {Object} [params={auto: true}] - If auto is set to true - resize will be triggered when container resizes\n * @memberof module:modules/app\n */\nexport class ResizeModule {\n  constructor(params = {}) {\n    this.params = Object.assign({\n      auto: true\n    }, params);\n\n    this.callbacks = [this.setSize.bind(this)];\n  }\n\n  /**\n   * @function setSize\n   * @instance\n   * @description This function sets the provided width & height to the renderer object.\n   * @param {Number} [width=1] - The promise that should be added to a queue.\n   * @param {Number} [height=1] - that is resolved when all promises completed.\n   * @memberof module:modules/app.ResizeModule\n   */\n  setSize(width = 1, height = 1) {\n    this.camera.native.aspect = width / height;\n    this.camera.native.updateProjectionMatrix();\n\n    if (this.rendering) this.rendering.setSize(width, height);\n  }\n\n  /**\n   * @method trigger\n   * @instance\n   * @description Triggers resize when called. width & height are determined automatically\n   * This invokes each callbacks with the new width and height as params\n   * @memberof module:modules/app.ResizeModule\n   */\n  trigger() {\n    const {\n      container: {\n        offsetWidth,\n        offsetHeight\n      },\n      resolution\n    } = this;\n\n    const width = Number(offsetWidth * resolution.x).toFixed();\n    const height = Number(offsetHeight * resolution.y).toFixed();\n\n    this.callbacks.forEach(cb => {\n      cb(width, height);\n    });\n  }\n\n  /**\n   * @method addAutoresize\n   * @instance\n   * @description Sets module to autoresize, this adds an event listene on window resize to trigger the resize\n   * @memberof module:modules/app.ResizeModule\n   */\n  addAutoresize() {\n    this.container = this.getContainer();\n    this.resolution = this.getResolution();\n\n    if (this.params.auto) window.addEventListener('resize', this.trigger.bind(this));\n  }\n\n  /**\n   * @method addCallback\n   * @instance\n   * @description Adds a call back function to the existing callbacks list.\n   * @param {Function} func - The callback function to add\n   * @memberof module:modules/app.ResizeModule\n   */\n  addCallback(func) {\n    this.callbacks.push(func);\n  }\n\n  manager(manager) {\n    manager.define('resize');\n\n    this.rendering = manager.get('renderer');\n    this.camera = manager.get('camera');\n\n    this.getResolution = () => manager.use('rendering').params.resolution;\n    this.getContainer = () => manager.get('container');\n\n    manager.update({\n      container: container => {\n        this.container = container;\n      }\n    });\n\n    this.addAutoresize();\n  }\n}\n","import { ShaderMaterial, Uniform } from \"three\";\r\n\r\nconst fragment = \"uniform sampler2D tPreviousLum;\\r\\nuniform sampler2D tCurrentLum;\\r\\nuniform float minLuminance;\\r\\nuniform float delta;\\r\\nuniform float tau;\\r\\n\\r\\nvarying vec2 vUv;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tfloat previousLum = texture2D(tPreviousLum, vUv, MIP_LEVEL_1X1).r;\\r\\n\\tfloat currentLum = texture2D(tCurrentLum, vUv, MIP_LEVEL_1X1).r;\\r\\n\\r\\n\\tpreviousLum = max(minLuminance, previousLum);\\r\\n\\tcurrentLum = max(minLuminance, currentLum);\\r\\n\\r\\n\\t// Adapt the luminance using Pattanaik's technique.\\r\\n\\tfloat adaptedLum = previousLum + (currentLum - previousLum) * (1.0 - exp(-delta * tau));\\r\\n\\r\\n\\tgl_FragColor.r = adaptedLum;\\r\\n\\r\\n}\\r\\n\";\r\nconst vertex = \"varying vec2 vUv;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvUv = uv;\\r\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\r\\n\\r\\n}\\r\\n\";\r\n\r\n/**\r\n * An adaptive luminosity shader material.\r\n */\r\n\r\nexport class AdaptiveLuminosityMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new adaptive luminosity material.\r\n\t */\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"AdaptiveLuminosityMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\r\n\t\t\t\tMIP_LEVEL_1X1: \"0.0\"\r\n\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\ttPreviousLum: new Uniform(null),\r\n\t\t\t\ttCurrentLum: new Uniform(null),\r\n\t\t\t\tminLuminance: new Uniform(0.01),\r\n\t\t\t\tdelta: new Uniform(0.0),\r\n\t\t\t\ttau: new Uniform(1.0)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragment,\r\n\t\t\tvertexShader: vertex,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n}\r\n","import { ShaderMaterial, Uniform } from \"three\";\r\n\r\nconst fragment = \"uniform sampler2D tDiffuse;\\r\\nuniform sampler2D tDepth;\\r\\n\\r\\nuniform float focus;\\r\\nuniform float aspect;\\r\\nuniform float aperture;\\r\\nuniform float maxBlur;\\r\\n\\r\\nvarying vec2 vUv;\\r\\n\\r\\n#ifndef USE_LOGDEPTHBUF\\r\\n\\r\\n\\t#include <packing>\\r\\n\\r\\n\\tuniform float cameraNear;\\r\\n\\tuniform float cameraFar;\\r\\n\\r\\n\\tfloat readDepth(sampler2D depthSampler, vec2 coord) {\\r\\n\\r\\n\\t\\tfloat fragCoordZ = texture2D(depthSampler, coord).x;\\r\\n\\t\\tfloat viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);\\r\\n\\r\\n\\t\\treturn viewZToOrthographicDepth(viewZ, cameraNear, cameraFar);\\r\\n\\r\\n\\t}\\r\\n\\r\\n#endif\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvec2 aspectCorrection = vec2(1.0, aspect);\\r\\n\\r\\n\\t#ifdef USE_LOGDEPTHBUF\\r\\n\\r\\n\\t\\tfloat depth = texture2D(tDepth, vUv).x;\\r\\n\\r\\n\\t#else\\r\\n\\r\\n\\t\\tfloat depth = readDepth(tDepth, vUv);\\r\\n\\r\\n\\t#endif\\r\\n\\r\\n\\tfloat factor = depth - focus;\\r\\n\\r\\n\\tvec2 dofBlur = vec2(clamp(factor * aperture, -maxBlur, maxBlur));\\r\\n\\r\\n\\tvec2 dofblur9 = dofBlur * 0.9;\\r\\n\\tvec2 dofblur7 = dofBlur * 0.7;\\r\\n\\tvec2 dofblur4 = dofBlur * 0.4;\\r\\n\\r\\n\\tvec4 color = vec4(0.0);\\r\\n\\r\\n\\tcolor += texture2D(tDiffuse, vUv);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.0,   0.4 ) * aspectCorrection) * dofBlur);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.15,  0.37) * aspectCorrection) * dofBlur);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.29,  0.29) * aspectCorrection) * dofBlur);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.37,  0.15) * aspectCorrection) * dofBlur);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.40,  0.0 ) * aspectCorrection) * dofBlur);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.37, -0.15) * aspectCorrection) * dofBlur);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.29, -0.29) * aspectCorrection) * dofBlur);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.15, -0.37) * aspectCorrection) * dofBlur);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.0,  -0.4 ) * aspectCorrection) * dofBlur);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.15,  0.37) * aspectCorrection) * dofBlur);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.29,  0.29) * aspectCorrection) * dofBlur);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.37,  0.15) * aspectCorrection) * dofBlur);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.4,   0.0 ) * aspectCorrection) * dofBlur);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.37, -0.15) * aspectCorrection) * dofBlur);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.29, -0.29) * aspectCorrection) * dofBlur);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.15, -0.37) * aspectCorrection) * dofBlur);\\r\\n\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.15,  0.37) * aspectCorrection) * dofblur9);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.37,  0.15) * aspectCorrection) * dofblur9);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.37, -0.15) * aspectCorrection) * dofblur9);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.15, -0.37) * aspectCorrection) * dofblur9);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.15,  0.37) * aspectCorrection) * dofblur9);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.37,  0.15) * aspectCorrection) * dofblur9);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.37, -0.15) * aspectCorrection) * dofblur9);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.15, -0.37) * aspectCorrection) * dofblur9);\\r\\n\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.29,  0.29) * aspectCorrection) * dofblur7);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.40,  0.0 ) * aspectCorrection) * dofblur7);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.29, -0.29) * aspectCorrection) * dofblur7);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.0,  -0.4 ) * aspectCorrection) * dofblur7);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.29,  0.29) * aspectCorrection) * dofblur7);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.4,   0.0 ) * aspectCorrection) * dofblur7);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.29, -0.29) * aspectCorrection) * dofblur7);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.0,   0.4 ) * aspectCorrection) * dofblur7);\\r\\n\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.29,  0.29) * aspectCorrection) * dofblur4);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.4,   0.0 ) * aspectCorrection) * dofblur4);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.29, -0.29) * aspectCorrection) * dofblur4);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.0,  -0.4 ) * aspectCorrection) * dofblur4);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.29,  0.29) * aspectCorrection) * dofblur4);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.4,   0.0 ) * aspectCorrection) * dofblur4);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2(-0.29, -0.29) * aspectCorrection) * dofblur4);\\r\\n\\tcolor += texture2D(tDiffuse, vUv + (vec2( 0.0,   0.4 ) * aspectCorrection) * dofblur4);\\r\\n\\r\\n\\tgl_FragColor = color / 41.0;\\r\\n\\r\\n}\\r\\n\";\r\nconst vertex = \"varying vec2 vUv;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvUv = uv;\\r\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\r\\n\\r\\n}\\r\\n\";\r\n\r\n/**\r\n * Depth of Field shader (Bokeh).\r\n *\r\n * Original shader code by Martins Upitis:\r\n *  http://artmartinsh.blogspot.com/2010/02/glsl-lens-blur-filter-with-bokeh.html\r\n */\r\n\r\nexport class BokehMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new bokeh material.\r\n\t *\r\n\t * @param {PerspectiveCamera} [camera] - A camera.\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {Number} [options.focus=1.0] - Focus distance.\r\n\t * @param {Number} [options.aperture=0.025] - Camera aperture scale. Bigger values for shallower depth of field.\r\n\t * @param {Number} [options.maxBlur=1.0] - Maximum blur strength.\r\n\t */\r\n\r\n\tconstructor(camera = null, options = {}) {\r\n\r\n\t\tif(options.focus === undefined) { options.focus = 1.0; }\r\n\t\tif(options.aperture === undefined) { options.aperture = 0.025; }\r\n\t\tif(options.maxBlur === undefined) { options.maxBlur = 1.0; }\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"BokehMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\tcameraNear: new Uniform(0.1),\r\n\t\t\t\tcameraFar: new Uniform(2000),\r\n\t\t\t\taspect: new Uniform(1.0),\r\n\r\n\t\t\t\ttDiffuse: new Uniform(null),\r\n\t\t\t\ttDepth: new Uniform(null),\r\n\r\n\t\t\t\tfocus: new Uniform(options.focus),\r\n\t\t\t\taperture: new Uniform(options.aperture),\r\n\t\t\t\tmaxBlur: new Uniform(options.maxBlur)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragment,\r\n\t\t\tvertexShader: vertex,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\tif(camera !== null) { this.adoptCameraSettings(camera); }\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adopts the settings of the given camera.\r\n\t *\r\n\t * @param {PerspectiveCamera} camera - A camera.\r\n\t */\r\n\r\n\tadoptCameraSettings(camera) {\r\n\r\n\t\tthis.uniforms.cameraNear.value = camera.near;\r\n\t\tthis.uniforms.cameraFar.value = camera.far;\r\n\t\tthis.uniforms.aspect.value = camera.aspect;\r\n\r\n\t}\r\n\r\n}\r\n","import { ShaderMaterial, Uniform, Vector2, Vector3 } from \"three\";\r\n\r\nconst fragment = \"uniform sampler2D tDiffuse;\\r\\nuniform sampler2D tDepth;\\r\\n\\r\\nuniform vec2 texelSize;\\r\\nuniform vec2 halfTexelSize;\\r\\n\\r\\nuniform float cameraNear;\\r\\nuniform float cameraFar;\\r\\n\\r\\nuniform float focalLength;\\r\\nuniform float focalStop;\\r\\n\\r\\nuniform float maxBlur;\\r\\nuniform vec3 luminanceCoefficients;\\r\\nuniform float luminanceThreshold;\\r\\nuniform float luminanceGain;\\r\\nuniform float bias;\\r\\nuniform float fringe;\\r\\nuniform float ditherStrength;\\r\\n\\r\\n#ifdef SHADER_FOCUS\\r\\n\\r\\n\\tuniform vec2 focusCoords;\\r\\n\\r\\n#else\\r\\n\\r\\n\\tuniform float focalDepth;\\r\\n\\r\\n#endif\\r\\n\\r\\nvarying vec2 vUv;\\r\\n\\r\\n#ifndef USE_LOGDEPTHBUF\\r\\n\\r\\n\\t#include <packing>\\r\\n\\r\\n\\tfloat readDepth(sampler2D depthSampler, vec2 coord) {\\r\\n\\r\\n\\t\\tfloat fragCoordZ = texture2D(depthSampler, coord).x;\\r\\n\\t\\tfloat viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);\\r\\n\\r\\n\\t\\treturn viewZToOrthographicDepth(viewZ, cameraNear, cameraFar);\\r\\n\\r\\n\\t}\\r\\n\\r\\n#endif\\r\\n\\r\\n#ifdef PENTAGON\\r\\n\\r\\n\\tfloat penta(vec2 coords) {\\r\\n\\r\\n\\t\\tconst vec4 HS0 = vec4( 1.0,          0.0,         0.0, 1.0);\\r\\n\\t\\tconst vec4 HS1 = vec4( 0.309016994,  0.951056516, 0.0, 1.0);\\r\\n\\t\\tconst vec4 HS2 = vec4(-0.809016994,  0.587785252, 0.0, 1.0);\\r\\n\\t\\tconst vec4 HS3 = vec4(-0.809016994, -0.587785252, 0.0, 1.0);\\r\\n\\t\\tconst vec4 HS4 = vec4( 0.309016994, -0.951056516, 0.0, 1.0);\\r\\n\\t\\tconst vec4 HS5 = vec4( 0.0,          0.0,         1.0, 1.0);\\r\\n\\r\\n\\t\\tconst vec4 ONE = vec4(1.0);\\r\\n\\r\\n\\t\\tconst float P_FEATHER = 0.4;\\r\\n\\t\\tconst float N_FEATHER = -P_FEATHER;\\r\\n\\r\\n\\t\\tfloat inOrOut = -4.0;\\r\\n\\r\\n\\t\\tvec4 P = vec4(coords, vec2(RINGS_FLOAT - 1.3));\\r\\n\\r\\n\\t\\tvec4 dist = vec4(\\r\\n\\t\\t\\tdot(P, HS0),\\r\\n\\t\\t\\tdot(P, HS1),\\r\\n\\t\\t\\tdot(P, HS2),\\r\\n\\t\\t\\tdot(P, HS3)\\r\\n\\t\\t);\\r\\n\\r\\n\\t\\tdist = smoothstep(N_FEATHER, P_FEATHER, dist);\\r\\n\\r\\n\\t\\tinOrOut += dot(dist, ONE);\\r\\n\\r\\n\\t\\tdist.x = dot(P, HS4);\\r\\n\\t\\tdist.y = HS5.w - abs(P.z);\\r\\n\\r\\n\\t\\tdist = smoothstep(N_FEATHER, P_FEATHER, dist);\\r\\n\\t\\tinOrOut += dist.x;\\r\\n\\r\\n\\t\\treturn clamp(inOrOut, 0.0, 1.0);\\r\\n\\r\\n\\t}\\r\\n\\r\\n#endif\\r\\n\\r\\n#ifdef SHOW_FOCUS\\r\\n\\r\\n\\tvec3 debugFocus(vec3 c, float blur, float depth) {\\r\\n\\r\\n\\t\\tfloat edge = 0.002 * depth;\\r\\n\\t\\tfloat m = clamp(smoothstep(0.0, edge, blur), 0.0, 1.0);\\r\\n\\t\\tfloat e = clamp(smoothstep(1.0 - edge, 1.0, blur), 0.0, 1.0);\\r\\n\\r\\n\\t\\tc = mix(c, vec3(1.0, 0.5, 0.0), (1.0 - m) * 0.6);\\r\\n\\t\\tc = mix(c, vec3(0.0, 0.5, 1.0), ((1.0 - e) - (1.0 - m)) * 0.2);\\r\\n\\r\\n\\t\\treturn c;\\r\\n\\r\\n\\t}\\r\\n\\r\\n#endif\\r\\n\\r\\n#ifdef VIGNETTE\\r\\n\\r\\n\\tfloat vignette() {\\r\\n\\r\\n\\t\\tconst vec2 CENTER = vec2(0.5);\\r\\n\\r\\n\\t\\tconst float VIGNETTE_OUT = 1.3;\\r\\n\\t\\tconst float VIGNETTE_IN = 0.0;\\r\\n\\t\\tconst float VIGNETTE_FADE = 22.0; \\r\\n\\r\\n\\t\\tfloat d = distance(vUv, CENTER);\\r\\n\\t\\td = smoothstep(VIGNETTE_OUT + (focalStop / VIGNETTE_FADE), VIGNETTE_IN + (focalStop / VIGNETTE_FADE), d);\\r\\n\\r\\n\\t\\treturn clamp(d, 0.0, 1.0);\\r\\n\\r\\n\\t}\\r\\n\\r\\n#endif\\r\\n\\r\\nvec2 rand(vec2 coord) {\\r\\n\\r\\n\\tvec2 noise;\\r\\n\\r\\n\\t#ifdef NOISE\\r\\n\\r\\n\\t\\tconst float a = 12.9898;\\r\\n\\t\\tconst float b = 78.233;\\r\\n\\t\\tconst float c = 43758.5453;\\r\\n\\r\\n\\t\\tnoise.x = clamp(fract(sin(mod(dot(coord, vec2(a, b)), 3.14)) * c), 0.0, 1.0) * 2.0 - 1.0;\\r\\n\\t\\tnoise.y = clamp(fract(sin(mod(dot(coord, vec2(a, b) * 2.0), 3.14)) * c), 0.0, 1.0) * 2.0 - 1.0;\\r\\n\\r\\n\\t#else\\r\\n\\r\\n\\t\\tnoise.x = ((fract(1.0 - coord.s * halfTexelSize.x) * 0.25) + (fract(coord.t * halfTexelSize.y) * 0.75)) * 2.0 - 1.0;\\r\\n\\t\\tnoise.y = ((fract(1.0 - coord.s * halfTexelSize.x) * 0.75) + (fract(coord.t * halfTexelSize.y) * 0.25)) * 2.0 - 1.0;\\r\\n\\r\\n\\t#endif\\r\\n\\r\\n\\treturn noise;\\r\\n\\r\\n}\\r\\n\\r\\nvec3 processTexel(vec2 coords, float blur) {\\r\\n\\r\\n\\tvec3 c;\\r\\n\\tc.r = texture2D(tDiffuse, coords + vec2(0.0, 1.0) * texelSize * fringe * blur).r;\\r\\n\\tc.g = texture2D(tDiffuse, coords + vec2(-0.866, -0.5) * texelSize * fringe * blur).g;\\r\\n\\tc.b = texture2D(tDiffuse, coords + vec2(0.866, -0.5) * texelSize * fringe * blur).b;\\r\\n\\r\\n\\t// Calculate the luminance of the constructed colour.\\r\\n\\tfloat luminance = dot(c, luminanceCoefficients);\\r\\n\\tfloat threshold = max((luminance - luminanceThreshold) * luminanceGain, 0.0);\\r\\n\\r\\n\\treturn c + mix(vec3(0.0), c, threshold * blur);\\r\\n\\r\\n}\\r\\n\\r\\nfloat linearize(float depth) {\\r\\n\\r\\n\\treturn -cameraFar * cameraNear / (depth * (cameraFar - cameraNear) - cameraFar);\\r\\n\\r\\n}\\r\\n\\r\\nfloat gather(float i, float j, float ringSamples, inout vec3 color, float w, float h, float blur) {\\r\\n\\r\\n\\tconst float TWO_PI = 6.28318531;\\r\\n\\r\\n\\tfloat step = TWO_PI / ringSamples;\\r\\n\\tfloat pw = cos(j * step) * i;\\r\\n\\tfloat ph = sin(j * step) * i;\\r\\n\\r\\n\\t#ifdef PENTAGON\\r\\n\\r\\n\\t\\tfloat p = penta(vec2(pw, ph));\\r\\n\\r\\n\\t#else\\r\\n\\r\\n\\t\\tfloat p = 1.0;\\r\\n\\r\\n\\t#endif\\r\\n\\r\\n\\tcolor += processTexel(vUv + vec2(pw * w, ph * h), blur) * mix(1.0, i / RINGS_FLOAT, bias) * p;\\r\\n\\r\\n\\treturn mix(1.0, i / RINGS_FLOAT, bias) * p;\\r\\n\\r\\n}\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\t#ifdef USE_LOGDEPTHBUF\\r\\n\\r\\n\\t\\tfloat depth = linearize(texture2D(tDepth, vUv).x);\\r\\n\\r\\n\\t#else\\r\\n\\r\\n\\t\\tfloat depth = linearize(readDepth(tDepth, vUv));\\r\\n\\r\\n\\t#endif\\r\\n\\r\\n\\t#ifdef SHADER_FOCUS\\r\\n\\r\\n\\t\\t#ifdef USE_LOGDEPTHBUF\\r\\n\\r\\n\\t\\t\\tfloat fDepth = linearize(texture2D(tDepth, focusCoords).x);\\r\\n\\r\\n\\t\\t#else\\r\\n\\r\\n\\t\\t\\tfloat fDepth = linearize(readDepth(tDepth, focusCoords));\\r\\n\\r\\n\\t\\t#endif\\r\\n\\r\\n\\t#else\\r\\n\\r\\n\\t\\tfloat fDepth = focalDepth;\\r\\n\\r\\n\\t#endif\\r\\n\\r\\n\\t#ifdef MANUAL_DOF\\r\\n\\r\\n\\t\\tconst float nDoFStart = 1.0; \\r\\n\\t\\tconst float nDoFDist = 2.0;\\r\\n\\t\\tconst float fDoFStart = 1.0;\\r\\n\\t\\tconst float fDoFDist = 3.0;\\r\\n\\r\\n\\t\\tfloat focalPlane = depth - fDepth;\\r\\n\\t\\tfloat farDoF = (focalPlane - fDoFStart) / fDoFDist;\\r\\n\\t\\tfloat nearDoF = (-focalPlane - nDoFStart) / nDoFDist;\\r\\n\\r\\n\\t\\tfloat blur = (focalPlane > 0.0) ? farDoF : nearDoF;\\r\\n\\r\\n\\t#else\\r\\n\\r\\n\\t\\tconst float CIRCLE_OF_CONFUSION = 0.03; // 35mm film = 0.03mm CoC.\\r\\n\\r\\n\\t\\tfloat focalPlaneMM = fDepth * 1000.0;\\r\\n\\t\\tfloat depthMM = depth * 1000.0;\\r\\n\\r\\n\\t\\tfloat focalPlane = (depthMM * focalLength) / (depthMM - focalLength);\\r\\n\\t\\tfloat farDoF = (focalPlaneMM * focalLength) / (focalPlaneMM - focalLength);\\r\\n\\t\\tfloat nearDoF = (focalPlaneMM - focalLength) / (focalPlaneMM * focalStop * CIRCLE_OF_CONFUSION);\\r\\n\\r\\n\\t\\tfloat blur = abs(focalPlane - farDoF) * nearDoF;\\r\\n\\r\\n\\t#endif\\r\\n\\r\\n\\tblur = clamp(blur, 0.0, 1.0);\\r\\n\\r\\n\\t// Dithering.\\r\\n\\tvec2 noise = rand(vUv) * ditherStrength * blur;\\r\\n\\r\\n\\tfloat blurFactorX = texelSize.x * blur * maxBlur + noise.x;\\r\\n\\tfloat blurFactorY = texelSize.y * blur * maxBlur + noise.y;\\r\\n\\r\\n\\tconst int MAX_RING_SAMPLES = RINGS_INT * SAMPLES_INT;\\r\\n\\r\\n\\t// Calculation of final color.\\r\\n\\tvec4 color;\\r\\n\\r\\n\\tif(blur < 0.05) {\\r\\n\\r\\n\\t\\tcolor = texture2D(tDiffuse, vUv);\\r\\n\\r\\n\\t} else {\\r\\n\\r\\n\\t\\tcolor = texture2D(tDiffuse, vUv);\\r\\n\\r\\n\\t\\tfloat s = 1.0;\\r\\n\\t\\tint ringSamples;\\r\\n\\r\\n\\t\\tfor(int i = 1; i <= RINGS_INT; ++i) {\\r\\n\\r\\n\\t\\t\\tringSamples = i * SAMPLES_INT;\\r\\n\\r\\n\\t\\t\\t// Constant loop.\\r\\n\\t\\t\\tfor(int j = 0; j < MAX_RING_SAMPLES; ++j) {\\r\\n\\r\\n\\t\\t\\t\\t// Break earlier.\\r\\n\\t\\t\\t\\tif(j >= ringSamples) { break; }\\r\\n\\r\\n\\t\\t\\t\\ts += gather(float(i), float(j), float(ringSamples), color.rgb, blurFactorX, blurFactorY, blur);\\r\\n\\r\\n\\t\\t\\t}\\r\\n\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\tcolor.rgb /= s; // Divide by sample count.\\r\\n\\r\\n\\t}\\r\\n\\r\\n\\t#ifdef SHOW_FOCUS\\r\\n\\r\\n\\t\\tcolor.rgb = debugFocus(color.rgb, blur, depth);\\r\\n\\r\\n\\t#endif\\r\\n\\r\\n\\t#ifdef VIGNETTE\\r\\n\\r\\n\\t\\tcolor.rgb *= vignette();\\r\\n\\r\\n\\t#endif\\r\\n\\r\\n\\tgl_FragColor = color;\\r\\n\\r\\n}\\r\\n\";\r\nconst vertex = \"varying vec2 vUv;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvUv = uv;\\r\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\r\\n\\r\\n}\\r\\n\";\r\n\r\n/**\r\n * Depth of Field shader version 2.4.\r\n *\r\n * Original shader code by Martins Upitis:\r\n *  http://blenderartists.org/forum/showthread.php?237488-GLSL-depth-of-field-with-bokeh-v2-4-(update)\r\n */\r\n\r\nexport class Bokeh2Material extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new bokeh2 material.\r\n\t *\r\n\t * @param {PerspectiveCamera} [camera] - The main camera.\r\n\t * @param {Object} [options] - Additional options.\r\n\t * @param {Vector2} [options.texelSize] - The absolute screen texel size.\r\n\t * @param {Boolean} [options.showFocus=false] - Whether the focus point should be highlighted.\r\n\t * @param {Boolean} [options.manualDoF=false] - Enables manual depth of field blur.\r\n\t * @param {Boolean} [options.vignette=false] - Enables a vignette effect.\r\n\t * @param {Boolean} [options.pentagon=false] - Enable to use a pentagonal shape to scale gathered texels.\r\n\t * @param {Boolean} [options.shaderFocus=true] - Disable if you compute your own focalDepth (in metres!).\r\n\t * @param {Boolean} [options.noise=true] - Disable if you don't want noise patterns for dithering.\r\n\t */\r\n\r\n\tconstructor(camera = null, options = {}) {\r\n\r\n\t\tif(options.rings === undefined) { options.rings = 3; }\r\n\t\tif(options.samples === undefined) { options.samples = 2; }\r\n\t\tif(options.showFocus === undefined) { options.showFocus = false; }\r\n\t\tif(options.showFocus === undefined) { options.showFocus = false; }\r\n\t\tif(options.manualDoF === undefined) { options.manualDoF = false; }\r\n\t\tif(options.vignette === undefined) { options.vignette = false; }\r\n\t\tif(options.pentagon === undefined) { options.pentagon = false; }\r\n\t\tif(options.shaderFocus === undefined) { options.shaderFocus = true; }\r\n\t\tif(options.noise === undefined) { options.noise = true; }\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"Bokeh2Material\",\r\n\r\n\t\t\tdefines: {\r\n\r\n\t\t\t\tRINGS_INT: options.rings.toFixed(0),\r\n\t\t\t\tRINGS_FLOAT: options.rings.toFixed(1),\r\n\t\t\t\tSAMPLES_INT: options.samples.toFixed(0),\r\n\t\t\t\tSAMPLES_FLOAT: options.samples.toFixed(1)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\ttDiffuse: new Uniform(null),\r\n\t\t\t\ttDepth: new Uniform(null),\r\n\r\n\t\t\t\ttexelSize: new Uniform(new Vector2()),\r\n\t\t\t\thalfTexelSize: new Uniform(new Vector2()),\r\n\r\n\t\t\t\tcameraNear: new Uniform(0.1),\r\n\t\t\t\tcameraFar: new Uniform(2000),\r\n\r\n\t\t\t\tfocalLength: new Uniform(24.0),\r\n\t\t\t\tfocalStop: new Uniform(0.9),\r\n\r\n\t\t\t\tmaxBlur: new Uniform(1.0),\r\n\t\t\t\tluminanceThreshold: new Uniform(0.5),\r\n\t\t\t\tluminanceGain: new Uniform(2.0),\r\n\t\t\t\tluminanceCoefficients: new Uniform(new Vector3(0.2126, 0.7152, 0.0722)),\r\n\t\t\t\tbias: new Uniform(0.5),\r\n\t\t\t\tfringe: new Uniform(0.7),\r\n\t\t\t\tditherStrength: new Uniform(0.0001),\r\n\r\n\t\t\t\tfocusCoords: new Uniform(new Vector2(0.5, 0.5)),\r\n\t\t\t\tfocalDepth: new Uniform(1.0)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragment,\r\n\t\t\tvertexShader: vertex,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\tif(options.showFocus) { this.defines.SHOW_FOCUS = \"1\"; }\r\n\t\tif(options.manualDoF) { this.defines.MANUAL_DOF = \"1\"; }\r\n\t\tif(options.vignette) { this.defines.VIGNETTE = \"1\"; }\r\n\t\tif(options.pentagon) { this.defines.PENTAGON = \"1\"; }\r\n\t\tif(options.shaderFocus) { this.defines.SHADER_FOCUS = \"1\"; }\r\n\t\tif(options.noise) { this.defines.NOISE = \"1\"; }\r\n\r\n\t\tif(options.texelSize !== undefined) { this.setTexelSize(options.texelSize.x, options.texelSize.y); }\r\n\t\tif(camera !== null) { this.adoptCameraSettings(camera); }\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the texel size.\r\n\t *\r\n\t * @param {Number} x - The texel width.\r\n\t * @param {Number} y - The texel height.\r\n\t */\r\n\r\n\tsetTexelSize(x, y) {\r\n\r\n\t\tthis.uniforms.texelSize.value.set(x, y);\r\n\t\tthis.uniforms.halfTexelSize.value.set(x, y).multiplyScalar(0.5);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adopts the near and far plane and the focal length of the given camera.\r\n\t *\r\n\t * @param {PerspectiveCamera} camera - The main camera.\r\n\t */\r\n\r\n\tadoptCameraSettings(camera) {\r\n\r\n\t\tthis.uniforms.cameraNear.value = camera.near;\r\n\t\tthis.uniforms.cameraFar.value = camera.far;\r\n\t\tthis.uniforms.focalLength.value = camera.getFocalLength(); // unit: mm.\r\n\r\n\t}\r\n\r\n}\r\n","import { ShaderMaterial, Uniform } from \"three\";\r\n\r\nconst fragment = \"uniform sampler2D texture1;\\r\\nuniform sampler2D texture2;\\r\\n\\r\\nuniform float opacity1;\\r\\nuniform float opacity2;\\r\\n\\r\\nvarying vec2 vUv;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvec4 texel1 = opacity1 * texture2D(texture1, vUv);\\r\\n\\tvec4 texel2 = opacity2 * texture2D(texture2, vUv);\\r\\n\\r\\n\\t#ifdef SCREEN_MODE\\r\\n\\r\\n\\t\\tvec3 invTexel1 = vec3(1.0) - texel1.rgb;\\r\\n\\t\\tvec3 invTexel2 = vec3(1.0) - texel2.rgb;\\r\\n\\r\\n\\t\\tvec4 color = vec4(\\r\\n\\t\\t\\tvec3(1.0) - invTexel1 * invTexel2,\\r\\n\\t\\t\\ttexel1.a + texel2.a\\r\\n\\t\\t);\\r\\n\\r\\n\\t#else\\r\\n\\r\\n\\t\\tvec4 color = texel1 + texel2;\\r\\n\\r\\n\\t#endif\\r\\n\\r\\n\\tgl_FragColor = color;\\r\\n\\r\\n}\\r\\n\";\r\nconst vertex = \"varying vec2 vUv;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvUv = uv;\\r\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\r\\n\\r\\n}\\r\\n\";\r\n\r\n/**\r\n * A material for combining two textures.\r\n *\r\n * This material supports the two blend modes Add and Screen.\r\n *\r\n * In Screen mode, the two textures are effectively projected on a white screen\r\n * simultaneously. In Add mode, the textures are simply added together which\r\n * often produces undesired, washed out results.\r\n */\r\n\r\nexport class CombineMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new combine material.\r\n\t *\r\n\t * @param {Boolean} [screenMode=false] - Whether the screen blend mode should be used.\r\n\t */\r\n\r\n\tconstructor(screenMode = false) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"CombineMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\ttexture1: new Uniform(null),\r\n\t\t\t\ttexture2: new Uniform(null),\r\n\r\n\t\t\t\topacity1: new Uniform(1.0),\r\n\t\t\t\topacity2: new Uniform(1.0)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragment,\r\n\t\t\tvertexShader: vertex,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\tif(screenMode) { this.defines.SCREEN_MODE = \"1\"; }\r\n\r\n\t}\r\n\r\n}\r\n","import { ShaderMaterial, Uniform, Vector2 } from \"three\";\r\n\r\nconst fragment = \"uniform sampler2D tDiffuse;\\r\\n\\r\\nvarying vec2 vUv0;\\r\\nvarying vec2 vUv1;\\r\\nvarying vec2 vUv2;\\r\\nvarying vec2 vUv3;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\t// Sample top left texel.\\r\\n\\tvec4 sum = texture2D(tDiffuse, vUv0);\\r\\n\\r\\n\\t// Sample top right texel.\\r\\n\\tsum += texture2D(tDiffuse, vUv1);\\r\\n\\r\\n\\t// Sample bottom right texel.\\r\\n\\tsum += texture2D(tDiffuse, vUv2);\\r\\n\\r\\n\\t// Sample bottom left texel.\\r\\n\\tsum += texture2D(tDiffuse, vUv3);\\r\\n\\r\\n\\t// Compute the average.\\r\\n\\tgl_FragColor = sum * 0.25;\\r\\n\\r\\n}\\r\\n\";\r\nconst vertex = \"uniform vec2 texelSize;\\r\\nuniform vec2 halfTexelSize;\\r\\nuniform float kernel;\\r\\n\\r\\nvarying vec2 vUv0;\\r\\nvarying vec2 vUv1;\\r\\nvarying vec2 vUv2;\\r\\nvarying vec2 vUv3;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvec2 dUv = (texelSize * vec2(kernel)) + halfTexelSize;\\r\\n\\r\\n\\tvUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\\r\\n\\tvUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\\r\\n\\tvUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\\r\\n\\tvUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\\r\\n\\r\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\r\\n\\r\\n}\\r\\n\";\r\n\r\n/**\r\n * An optimised convolution shader material.\r\n *\r\n * Based on the GDC2003 Presentation by Masaki Kawase, Bunkasha Games:\r\n *  Frame Buffer Postprocessing Effects in DOUBLE-S.T.E.A.L (Wreckless)\r\n * and an article by Filip Strugar, Intel:\r\n *  An investigation of fast real-time GPU-based image blur algorithms\r\n *\r\n * Further modified according to Apple's\r\n * [Best Practices for Shaders](https://goo.gl/lmRoM5).\r\n */\r\n\r\nexport class ConvolutionMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new convolution material.\r\n\t *\r\n\t * @param {Vector2} [texelSize] - The absolute screen texel size.\r\n\t */\r\n\r\n\tconstructor(texelSize = new Vector2()) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"ConvolutionMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\ttDiffuse: new Uniform(null),\r\n\t\t\t\ttexelSize: new Uniform(new Vector2()),\r\n\t\t\t\thalfTexelSize: new Uniform(new Vector2()),\r\n\t\t\t\tkernel: new Uniform(0.0)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragment,\r\n\t\t\tvertexShader: vertex,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\tthis.setTexelSize(texelSize.x, texelSize.y);\r\n\r\n\t\t/**\r\n\t\t * The current kernel size.\r\n\t\t *\r\n\t\t * @type {KernelSize}\r\n\t\t * @default KernelSize.LARGE\r\n\t\t */\r\n\r\n\t\tthis.kernelSize = KernelSize.LARGE;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the kernel.\r\n\t *\r\n\t * @return {Float32Array} The kernel.\r\n\t */\r\n\r\n\tgetKernel() { return kernelPresets[this.kernelSize]; }\r\n\r\n\t/**\r\n\t * Sets the texel size.\r\n\t *\r\n\t * @param {Number} x - The texel width.\r\n\t * @param {Number} y - The texel height.\r\n\t */\r\n\r\n\tsetTexelSize(x, y) {\r\n\r\n\t\tthis.uniforms.texelSize.value.set(x, y);\r\n\t\tthis.uniforms.halfTexelSize.value.set(x, y).multiplyScalar(0.5);\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * The Kawase blur kernel presets.\r\n *\r\n * @type {Float32Array[]}\r\n * @private\r\n */\r\n\r\nconst kernelPresets = [\r\n\tnew Float32Array([0.0, 0.0]),\r\n\tnew Float32Array([0.0, 1.0, 1.0]),\r\n\tnew Float32Array([0.0, 1.0, 1.0, 2.0]),\r\n\tnew Float32Array([0.0, 1.0, 2.0, 2.0, 3.0]),\r\n\tnew Float32Array([0.0, 1.0, 2.0, 3.0, 4.0, 4.0, 5.0]),\r\n\tnew Float32Array([0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 7.0, 8.0, 9.0, 10.0])\r\n];\r\n\r\n/**\r\n * A kernel size enumeration.\r\n *\r\n * @type {Object}\r\n * @property {Number} VERY_SMALL - A very small kernel that matches a 7x7 Gauss blur kernel.\r\n * @property {Number} SMALL - A small kernel that matches a 15x15 Gauss blur kernel.\r\n * @property {Number} MEDIUM - A medium sized kernel that matches a 23x23 Gauss blur kernel.\r\n * @property {Number} LARGE - A large kernel that matches a 35x35 Gauss blur kernel.\r\n * @property {Number} VERY_LARGE - A very large kernel that matches a 63x63 Gauss blur kernel.\r\n * @property {Number} HUGE - A huge kernel that matches a 127x127 Gauss blur kernel.\r\n */\r\n\r\nexport const KernelSize = {\r\n\r\n\tVERY_SMALL: 0,\r\n\tSMALL: 1,\r\n\tMEDIUM: 2,\r\n\tLARGE: 3,\r\n\tVERY_LARGE: 4,\r\n\tHUGE: 5\r\n\r\n};\r\n","import { ShaderMaterial, Uniform } from \"three\";\r\n\r\nconst fragment = \"uniform sampler2D tDiffuse;\\r\\nuniform float opacity;\\r\\n\\r\\nvarying vec2 vUv;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvec4 texel = texture2D(tDiffuse, vUv);\\r\\n\\tgl_FragColor = opacity * texel;\\r\\n\\r\\n}\\r\\n\";\r\nconst vertex = \"varying vec2 vUv;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvUv = uv;\\r\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\r\\n\\r\\n}\\r\\n\";\r\n\r\n/**\r\n * A simple copy shader material.\r\n */\r\n\r\nexport class CopyMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new copy material.\r\n\t */\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"CopyMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\ttDiffuse: new Uniform(null),\r\n\t\t\t\topacity: new Uniform(1.0)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragment,\r\n\t\t\tvertexShader: vertex,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n}\r\n","import { ShaderMaterial, Uniform } from \"three\";\r\n\r\nconst fragment = \"uniform sampler2D tDepth;\\r\\n\\r\\nvarying vec2 vUv;\\r\\n\\r\\n#ifndef USE_LOGDEPTHBUF\\r\\n\\r\\n\\t#include <packing>\\r\\n\\r\\n\\tuniform float cameraNear;\\r\\n\\tuniform float cameraFar;\\r\\n\\r\\n\\tfloat readDepth(sampler2D depthSampler, vec2 coord) {\\r\\n\\r\\n\\t\\tfloat fragCoordZ = texture2D(depthSampler, coord).x;\\r\\n\\t\\tfloat viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);\\r\\n\\r\\n\\t\\treturn viewZToOrthographicDepth(viewZ, cameraNear, cameraFar);\\r\\n\\r\\n\\t}\\r\\n\\r\\n#endif\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\t#ifdef USE_LOGDEPTHBUF\\r\\n\\r\\n\\t\\tfloat depth = texture2D(tDepth, vUv).x;\\r\\n\\r\\n\\t#else\\r\\n\\r\\n\\t\\tfloat depth = readDepth(tDepth, vUv);\\r\\n\\r\\n\\t#endif\\r\\n\\r\\n\\tgl_FragColor = vec4(depth, depth, depth, 1.0);\\r\\n\\r\\n}\\r\\n\";\r\nconst vertex = \"varying vec2 vUv;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvUv = uv;\\r\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\r\\n\\r\\n}\\r\\n\";\r\n\r\n/**\r\n * A depth shader material.\r\n */\r\n\r\nexport class DepthMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new depth material.\r\n\t *\r\n\t * @param {PerspectiveCamera} [camera] - A camera.\r\n\t */\r\n\r\n\tconstructor(camera = null) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"DepthMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\tcameraNear: new Uniform(0.1),\r\n\t\t\t\tcameraFar: new Uniform(2000),\r\n\r\n\t\t\t\ttDepth: new Uniform(null)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragment,\r\n\t\t\tvertexShader: vertex,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\tif(camera !== null) { this.adoptCameraSettings(camera); }\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adopts the settings of the given camera.\r\n\t *\r\n\t * @param {PerspectiveCamera} camera - A camera.\r\n\t */\r\n\r\n\tadoptCameraSettings(camera) {\r\n\r\n\t\tthis.uniforms.cameraNear.value = camera.near;\r\n\t\tthis.uniforms.cameraFar.value = camera.far;\r\n\r\n\t}\r\n\r\n}\r\n","import { ShaderMaterial, Uniform, Vector4 } from \"three\";\r\n\r\nconst fragment = \"uniform sampler2D tDiffuse;\\r\\n\\r\\nuniform float angle;\\r\\nuniform float scale;\\r\\nuniform float intensity;\\r\\n\\r\\nvarying vec2 vUv;\\r\\nvarying vec2 vUvPattern;\\r\\n\\r\\nfloat pattern() {\\r\\n\\r\\n\\tfloat s = sin(angle);\\r\\n\\tfloat c = cos(angle);\\r\\n\\r\\n\\tvec2 point = vec2(c * vUvPattern.x - s * vUvPattern.y, s * vUvPattern.x + c * vUvPattern.y) * scale;\\r\\n\\r\\n\\treturn (sin(point.x) * sin(point.y)) * 4.0;\\r\\n\\r\\n}\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvec4 texel = texture2D(tDiffuse, vUv);\\r\\n\\tvec3 color = texel.rgb;\\r\\n\\r\\n\\t#ifdef AVERAGE\\r\\n\\r\\n\\t\\tcolor = vec3((color.r + color.g + color.b) / 3.0);\\r\\n\\r\\n\\t#endif\\r\\n\\r\\n\\tcolor = vec3(color * 10.0 - 5.0 + pattern());\\r\\n\\tcolor = texel.rgb + (color - texel.rgb) * intensity;\\r\\n\\r\\n\\tgl_FragColor = vec4(color, texel.a);\\r\\n\\r\\n}\\r\\n\";\r\nconst vertex = \"uniform vec4 offsetRepeat;\\r\\n\\r\\nvarying vec2 vUv;\\r\\nvarying vec2 vUvPattern;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvUv = uv;\\r\\n\\tvUvPattern = uv * offsetRepeat.zw + offsetRepeat.xy;\\r\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\r\\n\\r\\n}\\r\\n\";\r\n\r\n/**\r\n * A dot screen shader material.\r\n */\r\n\r\nexport class DotScreenMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new dot screen material.\r\n\t *\r\n\t * @param {Boolean} [average=false] - Whether the shader should output the colour average (black and white).\r\n\t */\r\n\r\n\tconstructor(average = false) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"DotScreenMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\ttDiffuse: new Uniform(null),\r\n\r\n\t\t\t\tangle: new Uniform(1.57),\r\n\t\t\t\tscale: new Uniform(1.0),\r\n\t\t\t\tintensity: new Uniform(1.0),\r\n\r\n\t\t\t\toffsetRepeat: new Uniform(new Vector4(0.5, 0.5, 1.0, 1.0))\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragment,\r\n\t\t\tvertexShader: vertex,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\tif(average) { this.defines.AVERAGE = \"1\"; }\r\n\r\n\t}\r\n\r\n}\r\n","import { ShaderMaterial, Uniform, Vector3 } from \"three\";\r\n\r\nconst fragment = \"uniform sampler2D tDiffuse;\\r\\nuniform float time;\\r\\n\\r\\nvarying vec2 vUv;\\r\\n\\r\\n#ifdef NOISE\\r\\n\\r\\n\\tuniform float noiseIntensity;\\r\\n\\r\\n#endif\\r\\n\\r\\n#ifdef SCANLINES\\r\\n\\r\\n\\tuniform float scanlineIntensity;\\r\\n\\tuniform float scanlineCount;\\r\\n\\r\\n#endif\\r\\n\\r\\n#ifdef GREYSCALE\\r\\n\\r\\n\\tuniform vec3 luminanceCoefficients;\\r\\n\\tuniform float greyscaleIntensity;\\r\\n\\r\\n#elif defined(SEPIA)\\r\\n\\r\\n\\tuniform float sepiaIntensity;\\r\\n\\r\\n#endif\\r\\n\\r\\n#ifdef VIGNETTE\\r\\n\\r\\n\\tuniform float vignetteOffset;\\r\\n\\tuniform float vignetteDarkness;\\r\\n\\r\\n#endif\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvec4 texel = texture2D(tDiffuse, vUv);\\r\\n\\tvec3 color = texel.rgb;\\r\\n\\r\\n\\t#ifdef SCREEN_MODE\\r\\n\\r\\n\\t\\tvec3 invColor;\\r\\n\\r\\n\\t#endif\\r\\n\\r\\n\\t#ifdef NOISE\\r\\n\\r\\n\\t\\tfloat x = vUv.x * vUv.y * time * 1000.0;\\r\\n\\t\\tx = mod(x, 13.0) * mod(x, 123.0);\\r\\n\\t\\tx = mod(x, 0.01);\\r\\n\\r\\n\\t\\tvec3 noise = texel.rgb * clamp(0.1 + x * 100.0, 0.0, 1.0) * noiseIntensity;\\r\\n\\r\\n\\t\\t#ifdef SCREEN_MODE\\r\\n\\r\\n\\t\\t\\tinvColor = vec3(1.0) - color;\\r\\n\\t\\t\\tvec3 invNoise = vec3(1.0) - noise;\\r\\n\\r\\n\\t\\t\\tcolor = vec3(1.0) - invColor * invNoise;\\r\\n\\r\\n\\t\\t#else\\r\\n\\r\\n\\t\\t\\tcolor += noise;\\r\\n\\r\\n\\t\\t#endif\\r\\n\\r\\n\\t#endif\\r\\n\\r\\n\\t#ifdef SCANLINES\\r\\n\\r\\n\\t\\tvec2 sl = vec2(sin(vUv.y * scanlineCount), cos(vUv.y * scanlineCount));\\r\\n\\t\\tvec3 scanlines = texel.rgb * vec3(sl.x, sl.y, sl.x) * scanlineIntensity;\\r\\n\\r\\n\\t\\t#ifdef SCREEN_MODE\\r\\n\\r\\n\\t\\t\\tinvColor = vec3(1.0) - color;\\r\\n\\t\\t\\tvec3 invScanlines = vec3(1.0) - scanlines;\\r\\n\\r\\n\\t\\t\\tcolor = vec3(1.0) - invColor * invScanlines;\\r\\n\\r\\n\\t\\t#else\\r\\n\\r\\n\\t\\t\\tcolor += scanlines;\\r\\n\\r\\n\\t\\t#endif\\r\\n\\r\\n\\t#endif\\r\\n\\r\\n\\t#ifdef GREYSCALE\\r\\n\\r\\n\\t\\tcolor = mix(color, vec3(dot(color, luminanceCoefficients)), greyscaleIntensity);\\r\\n\\r\\n\\t#elif defined(SEPIA)\\r\\n\\r\\n\\t\\tvec3 c = color.rgb;\\r\\n\\r\\n\\t\\tcolor.r = dot(c, vec3(1.0 - 0.607 * sepiaIntensity, 0.769 * sepiaIntensity, 0.189 * sepiaIntensity));\\r\\n\\t\\tcolor.g = dot(c, vec3(0.349 * sepiaIntensity, 1.0 - 0.314 * sepiaIntensity, 0.168 * sepiaIntensity));\\r\\n\\t\\tcolor.b = dot(c, vec3(0.272 * sepiaIntensity, 0.534 * sepiaIntensity, 1.0 - 0.869 * sepiaIntensity));\\r\\n\\r\\n\\t#endif\\r\\n\\r\\n\\t#ifdef VIGNETTE\\r\\n\\r\\n\\t\\tconst vec2 center = vec2(0.5);\\r\\n\\r\\n\\t\\t#ifdef ESKIL\\r\\n\\r\\n\\t\\t\\tvec2 uv = (vUv - center) * vec2(vignetteOffset);\\r\\n\\t\\t\\tcolor = mix(color.rgb, vec3(1.0 - vignetteDarkness), dot(uv, uv));\\r\\n\\r\\n\\t\\t#else\\r\\n\\r\\n\\t\\t\\tfloat dist = distance(vUv, center);\\r\\n\\t\\t\\tcolor *= smoothstep(0.8, vignetteOffset * 0.799, dist * (vignetteDarkness + vignetteOffset));\\r\\n\\r\\n\\t\\t#endif\\t\\t\\r\\n\\r\\n\\t#endif\\r\\n\\r\\n\\tgl_FragColor = vec4(clamp(color, 0.0, 1.0), texel.a);\\r\\n\\r\\n}\\r\\n\";\r\nconst vertex = \"varying vec2 vUv;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvUv = uv;\\r\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\r\\n\\r\\n}\\r\\n\";\r\n\r\n/**\r\n * A cinematic shader that provides the following effects:\r\n *  - Film Grain\r\n *  - Scanlines\r\n *  - Vignette\r\n *  - Greyscale\r\n *  - Sepia\r\n *\r\n * Original scanlines algorithm by Pat \"Hawthorne\" Shearon.\r\n *  http://www.truevision3d.com/forums/showcase/staticnoise_colorblackwhite_scanline_shaders-t18698.0.html\r\n *\r\n * Optimised scanlines and noise with intensity scaling by Georg \"Leviathan\"\r\n * Steinrohder. This version was provided under a Creative Commons Attribution\r\n * 3.0 License: http://creativecommons.org/licenses/by/3.0.\r\n *\r\n * The sepia effect is based on:\r\n *  https://github.com/evanw/glfx.js\r\n *\r\n * The vignette code is based on PaintEffect postprocess from ro.me:\r\n *  http://code.google.com/p/3-dreams-of-black/source/browse/deploy/js/effects/PaintEffect.js\r\n */\r\n\r\nexport class FilmMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new film material.\r\n\t *\r\n\t * @param {Object} [options] - The options. Disabled effects will not be included in the final shader and have no negative impact on performance.\r\n\t * @param {Boolean} [options.greyscale=false] - Enable greyscale effect. Greyscale and sepia are mutually exclusive.\r\n\t * @param {Boolean} [options.sepia=false] - Enable sepia effect. Greyscale and sepia are mutually exclusive.\r\n\t * @param {Boolean} [options.vignette=false] - Apply vignette effect.\r\n\t * @param {Boolean} [options.eskil=false] - Use Eskil's vignette approach. The default looks dusty while Eskil looks burned out.\r\n\t * @param {Boolean} [options.screenMode=true] - Whether the screen blend mode should be used for noise and scanlines. Both of these effects are computed independently.\r\n\t * @param {Boolean} [options.noise=true] - Show noise-based film grain.\r\n\t * @param {Boolean} [options.scanlines=true] - Show scanlines.\r\n\t * @param {Number} [options.noiseIntensity=0.5] - The noise intensity. 0.0 to 1.0.\r\n\t * @param {Number} [options.scanlineIntensity=0.05] - The scanline intensity. 0.0 to 1.0.\r\n\t * @param {Number} [options.greyscaleIntensity=1.0] - The intensity of the greyscale effect. 0.0 to 1.0.\r\n\t * @param {Number} [options.sepiaIntensity=1.0] - The intensity of the sepia effect. 0.0 to 1.0.\r\n\t * @param {Number} [options.vignetteOffset=1.0] - The offset of the vignette effect. 0.0 to 1.0.\r\n\t * @param {Number} [options.vignetteDarkness=1.0] - The darkness of the vignette effect. 0.0 to 1.0.\r\n\t */\r\n\r\n\tconstructor(options = {}) {\r\n\r\n\t\tif(options.screenMode === undefined) { options.screenMode = true; }\r\n\t\tif(options.noise === undefined) { options.noise = true; }\r\n\t\tif(options.scanlines === undefined) { options.scanlines = true; }\r\n\r\n\t\tif(options.greyscale === undefined) { options.greyscale = false; }\r\n\t\tif(options.sepia === undefined) { options.sepia = false; }\r\n\t\tif(options.vignette === undefined) { options.vignette = false; }\r\n\t\tif(options.eskil === undefined) { options.eskil = false; }\r\n\r\n\t\tif(options.noiseIntensity === undefined) { options.noiseIntensity = 0.5; }\r\n\t\tif(options.scanlineIntensity === undefined) { options.scanlineIntensity = 0.05; }\r\n\t\tif(options.greyscaleIntensity === undefined) { options.greyscaleIntensity = 1.0; }\r\n\t\tif(options.sepiaIntensity === undefined) { options.sepiaIntensity = 1.0; }\r\n\r\n\t\tif(options.vignetteOffset === undefined) { options.vignetteOffset = 1.0; }\r\n\t\tif(options.vignetteDarkness === undefined) { options.vignetteDarkness = 1.0; }\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"FilmMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\ttDiffuse: new Uniform(null),\r\n\t\t\t\ttime: new Uniform(0.0),\r\n\r\n\t\t\t\tnoiseIntensity: new Uniform(options.noiseIntensity),\r\n\t\t\t\tscanlineIntensity: new Uniform(options.scanlineIntensity),\r\n\t\t\t\tscanlineCount: new Uniform(0.0),\r\n\r\n\t\t\t\tluminanceCoefficients: new Uniform(new Vector3(0.2126, 0.7152, 0.0722)),\r\n\t\t\t\tgreyscaleIntensity: new Uniform(options.greyscaleIntensity),\r\n\t\t\t\tsepiaIntensity: new Uniform(options.sepiaIntensity),\r\n\r\n\t\t\t\tvignetteOffset: new Uniform(options.vignetteOffset),\r\n\t\t\t\tvignetteDarkness: new Uniform(options.vignetteDarkness)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragment,\r\n\t\t\tvertexShader: vertex,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\tif(options.greyscale) { this.defines.GREYSCALE = \"1\"; }\r\n\t\tif(options.sepia) { this.defines.SEPIA = \"1\"; }\r\n\t\tif(options.vignette) { this.defines.VIGNETTE = \"1\"; }\r\n\t\tif(options.eskil) { this.defines.ESKIL = \"1\"; }\r\n\r\n\t\tif(options.screenMode) { this.defines.SCREEN_MODE = \"1\"; }\r\n\t\tif(options.noise) { this.defines.NOISE = \"1\"; }\r\n\t\tif(options.scanlines) { this.defines.SCANLINES = \"1\"; }\r\n\r\n\t}\r\n\r\n}\r\n","import { ShaderMaterial, Uniform } from \"three\";\r\n\r\nconst fragment = \"uniform sampler2D tDiffuse;\\r\\nuniform sampler2D tPerturb;\\r\\n\\r\\nuniform bool active;\\r\\n\\r\\nuniform float amount;\\r\\nuniform float angle;\\r\\nuniform float seed;\\r\\nuniform float seedX;\\r\\nuniform float seedY;\\r\\nuniform float distortionX;\\r\\nuniform float distortionY;\\r\\nuniform float colS;\\r\\n\\r\\nvarying vec2 vUv;\\r\\n\\r\\nfloat rand(vec2 tc) {\\r\\n\\r\\n\\tconst float a = 12.9898;\\r\\n\\tconst float b = 78.233;\\r\\n\\tconst float c = 43758.5453;\\r\\n\\r\\n\\tfloat dt = dot(tc, vec2(a, b));\\r\\n\\tfloat sn = mod(dt, 3.14);\\r\\n\\r\\n\\treturn fract(sin(sn) * c);\\r\\n\\r\\n}\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvec2 coord = vUv;\\r\\n\\r\\n\\tfloat xs, ys;\\r\\n\\tvec4 normal;\\r\\n\\r\\n\\tvec2 offset;\\r\\n\\tvec4 cr, cga, cb;\\r\\n\\tvec4 snow, color;\\r\\n\\r\\n\\tfloat sx, sy;\\r\\n\\r\\n\\tif(active) {\\r\\n\\r\\n\\t\\txs = floor(gl_FragCoord.x / 0.5);\\r\\n\\t\\tys = floor(gl_FragCoord.y / 0.5);\\r\\n\\r\\n\\t\\tnormal = texture2D(tPerturb, coord * seed * seed);\\r\\n\\r\\n\\t\\tif(coord.y < distortionX + colS && coord.y > distortionX - colS * seed) {\\r\\n\\r\\n\\t\\t\\tsx = clamp(ceil(seedX), 0.0, 1.0);\\r\\n\\t\\t\\tcoord.y = sx * (1.0 - (coord.y + distortionY)) + (1.0 - sx) * distortionY;\\r\\n\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\tif(coord.x < distortionY + colS && coord.x > distortionY - colS * seed) {\\r\\n\\r\\n\\t\\t\\tsy = clamp(ceil(seedY), 0.0, 1.0);\\r\\n\\t\\t\\tcoord.x = sy * distortionX + (1.0 - sy) * (1.0 - (coord.x + distortionX));\\r\\n\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\tcoord.x += normal.x * seedX * (seed / 5.0);\\r\\n\\t\\tcoord.y += normal.y * seedY * (seed / 5.0);\\r\\n\\r\\n\\t\\toffset = amount * vec2(cos(angle), sin(angle));\\r\\n\\r\\n\\t\\tcr = texture2D(tDiffuse, coord + offset);\\r\\n\\t\\tcga = texture2D(tDiffuse, coord);\\r\\n\\t\\tcb = texture2D(tDiffuse, coord - offset);\\r\\n\\r\\n\\t\\tcolor = vec4(cr.r, cga.g, cb.b, cga.a);\\r\\n\\t\\tsnow = 200.0 * amount * vec4(rand(vec2(xs * seed, ys * seed * 50.0)) * 0.2);\\r\\n\\t\\tcolor += snow;\\r\\n\\r\\n\\t} else {\\r\\n\\r\\n\\t\\tcolor = texture2D(tDiffuse, vUv);\\r\\n\\r\\n\\t}\\r\\n\\r\\n\\tgl_FragColor = color;\\r\\n\\r\\n}\\r\\n\";\r\nconst vertex = \"varying vec2 vUv;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvUv = uv;\\r\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\r\\n\\r\\n}\\r\\n\";\r\n\r\n/**\r\n * A glitch shader material.\r\n *\r\n * Reference:\r\n *  https://github.com/staffantan/unityglitch\r\n */\r\n\r\nexport class GlitchMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new glitch material.\r\n\t */\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"GlitchMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\ttDiffuse: new Uniform(null),\r\n\t\t\t\ttPerturb: new Uniform(null),\r\n\r\n\t\t\t\tactive: new Uniform(1),\r\n\r\n\t\t\t\tamount: new Uniform(0.8),\r\n\t\t\t\tangle: new Uniform(0.02),\r\n\t\t\t\tseed: new Uniform(0.02),\r\n\t\t\t\tseedX: new Uniform(0.02),\r\n\t\t\t\tseedY: new Uniform(0.02),\r\n\t\t\t\tdistortionX: new Uniform(0.5),\r\n\t\t\t\tdistortionY: new Uniform(0.6),\r\n\t\t\t\tcolS: new Uniform(0.05)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragment,\r\n\t\t\tvertexShader: vertex,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n}\r\n","import { ShaderMaterial, Uniform } from \"three\";\r\n\r\nconst fragment = \"uniform sampler2D tDiffuse;\\r\\nuniform vec3 lightPosition;\\r\\n\\r\\nuniform float exposure;\\r\\nuniform float decay;\\r\\nuniform float density;\\r\\nuniform float weight;\\r\\nuniform float clampMax;\\r\\n\\r\\nvarying vec2 vUv;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvec2 texCoord = vUv;\\r\\n\\r\\n\\t// Calculate vector from pixel to light source in screen space.\\r\\n\\tvec2 deltaTexCoord = texCoord - lightPosition.st;\\r\\n\\tdeltaTexCoord *= 1.0 / NUM_SAMPLES_FLOAT * density;\\r\\n\\r\\n\\t// A decreasing illumination factor.\\r\\n\\tfloat illuminationDecay = 1.0;\\r\\n\\r\\n\\tvec4 sample;\\r\\n\\tvec4 color = vec4(0.0);\\r\\n\\r\\n\\t// Estimate the probability of occlusion at each pixel by summing samples along a ray to the light source.\\r\\n\\tfor(int i = 0; i < NUM_SAMPLES_INT; ++i) {\\r\\n\\r\\n\\t\\ttexCoord -= deltaTexCoord;\\r\\n\\t\\tsample = texture2D(tDiffuse, texCoord);\\r\\n\\r\\n\\t\\t// Apply sample attenuation scale/decay factors.\\r\\n\\t\\tsample *= illuminationDecay * weight;\\r\\n\\r\\n\\t\\tcolor += sample;\\r\\n\\r\\n\\t\\t// Update exponential decay factor.\\r\\n\\t\\tilluminationDecay *= decay;\\r\\n\\r\\n\\t}\\r\\n\\r\\n\\tgl_FragColor = clamp(color * exposure, 0.0, clampMax);\\r\\n\\r\\n}\\r\\n\";\r\nconst vertex = \"varying vec2 vUv;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvUv = uv;\\r\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\r\\n\\r\\n}\\r\\n\";\r\n\r\n/**\r\n * A crepuscular rays shader material.\r\n *\r\n * References:\r\n *\r\n * Thibaut Despoulain, 2012:\r\n *  [(WebGL) Volumetric Light Approximation in Three.js](\r\n *  http://bkcore.com/blog/3d/webgl-three-js-volumetric-light-godrays.html)\r\n *\r\n * Nvidia, GPU Gems 3, 2008:\r\n *  [Chapter 13. Volumetric Light Scattering as a Post-Process](\r\n *  https://developer.nvidia.com/gpugems/GPUGems3/gpugems3_ch13.html)\r\n */\r\n\r\nexport class GodRaysMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new god rays material.\r\n\t */\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"GodRaysMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\r\n\t\t\t\tNUM_SAMPLES_FLOAT: \"60.0\",\r\n\t\t\t\tNUM_SAMPLES_INT: \"60\"\r\n\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\ttDiffuse: new Uniform(null),\r\n\t\t\t\tlightPosition: new Uniform(null),\r\n\r\n\t\t\t\texposure: new Uniform(0.6),\r\n\t\t\t\tdecay: new Uniform(0.93),\r\n\t\t\t\tdensity: new Uniform(0.96),\r\n\t\t\t\tweight: new Uniform(0.4),\r\n\t\t\t\tclampMax: new Uniform(1.0)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragment,\r\n\t\t\tvertexShader: vertex,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n}\r\n","import { ShaderMaterial, Uniform, Vector2, Vector3 } from \"three\";\r\n\r\nconst fragment = \"uniform sampler2D tDiffuse;\\r\\nuniform float distinction;\\r\\nuniform vec2 range;\\r\\nuniform vec3 luminanceCoefficients;\\r\\n\\r\\nvarying vec2 vUv;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvec4 texel = texture2D(tDiffuse, vUv);\\r\\n\\tfloat v = dot(texel.rgb, luminanceCoefficients);\\r\\n\\r\\n\\t#ifdef RANGE\\r\\n\\r\\n\\t\\tfloat low = step(range.x, v);\\r\\n\\t\\tfloat high = step(v, range.y);\\r\\n\\r\\n\\t\\t// Apply the mask.\\r\\n\\t\\tv *= low * high;\\r\\n\\r\\n\\t#endif\\r\\n\\r\\n\\tv = pow(abs(v), distinction);\\r\\n\\r\\n\\t#ifdef COLOR\\r\\n\\r\\n\\t\\tgl_FragColor = vec4(texel.rgb * v, texel.a);\\r\\n\\r\\n\\t#else\\r\\n\\r\\n\\t\\tgl_FragColor = vec4(v, v, v, texel.a);\\r\\n\\r\\n\\t#endif\\r\\n\\r\\n}\\r\\n\";\r\nconst vertex = \"varying vec2 vUv;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvUv = uv;\\r\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\r\\n\\r\\n}\\r\\n\";\r\n\r\n/**\r\n * A luminosity shader material.\r\n *\r\n * This shader produces a greyscale luminance map that describes the absolute\r\n * amount of light emitted by a scene. It can also be configured to output\r\n * colours that are scaled with their respective luminance value. Additionally,\r\n * a range may be provided to mask out undesired texels.\r\n *\r\n * The alpha channel will remain unaffected in all cases.\r\n *\r\n * On luminance coefficients:\r\n *  http://www.poynton.com/notes/colour_and_gamma/ColorFAQ.html#RTFToC9\r\n *\r\n * Coefficients for different colour spaces:\r\n *  https://hsto.org/getpro/habr/post_images/2ab/69d/084/2ab69d084f9a597e032624bcd74d57a7.png\r\n *\r\n * Luminance range reference:\r\n *  https://cycling74.com/2007/05/23/your-first-shader/#.Vty9FfkrL4Z\r\n */\r\n\r\nexport class LuminosityMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new luminosity material.\r\n\t *\r\n\t * @param {Boolean} [color=false] - Defines whether the shader should output colours scaled with their luminance value.\r\n\t * @param {Vector2} [range] - If provided, the shader will mask out texels that aren't in the specified luminance range.\r\n\t */\r\n\r\n\tconstructor(color = false, range = null) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"LuminosityMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\ttDiffuse: new Uniform(null),\r\n\t\t\t\tdistinction: new Uniform(1.0),\r\n\t\t\t\trange: new Uniform((range !== null) ? range : new Vector2()),\r\n\t\t\t\tluminanceCoefficients: new Uniform(new Vector3(0.2126, 0.7152, 0.0722))\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragment,\r\n\t\t\tvertexShader: vertex\r\n\r\n\t\t});\r\n\r\n\t\tif(color) { this.defines.COLOR = \"1\"; }\r\n\t\tif(range !== null) { this.defines.RANGE = \"1\"; }\r\n\r\n\t}\r\n\r\n}\r\n","import { ShaderMaterial, Uniform, Vector2 } from \"three\";\r\n\r\nconst fragment = \"uniform sampler2D tDiffuse;\\r\\nuniform float granularity;\\r\\nuniform float dx;\\r\\nuniform float dy;\\r\\n\\r\\nvarying vec2 vUv;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvec4 texel;\\r\\n\\r\\n\\tif(granularity > 0.0) {\\r\\n\\r\\n\\t\\tvec2 coord = vec2(\\r\\n\\t\\t\\tdx * (floor(vUv.x / dx) + 0.5),\\r\\n\\t\\t\\tdy * (floor(vUv.y / dy) + 0.5)\\r\\n\\t\\t);\\r\\n\\r\\n\\t\\ttexel = texture2D(tDiffuse, coord);\\r\\n\\r\\n\\t} else {\\r\\n\\r\\n\\t\\ttexel = texture2D(tDiffuse, vUv);\\r\\n\\r\\n\\t}\\r\\n\\r\\n\\tgl_FragColor = texel;\\r\\n\\r\\n}\\r\\n\";\r\nconst vertex = \"varying vec2 vUv;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvUv = uv;\\r\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\r\\n\\r\\n}\\r\\n\";\r\n\r\n/**\r\n * A pixelation shader material.\r\n *\r\n * Original shader code by Robert Casanova:\r\n *  https://github.com/robertcasanova/pixelate-shader\r\n */\r\n\r\nexport class PixelationMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new pixelation material.\r\n\t */\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"PixelationMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\ttDiffuse: new Uniform(null),\r\n\t\t\t\tgranularity: new Uniform(1.0),\r\n\t\t\t\tresolution: new Uniform(new Vector2(1.0, 1.0)),\r\n\t\t\t\tdx: new Uniform(1.0),\r\n\t\t\t\tdy: new Uniform(1.0)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragment,\r\n\t\t\tvertexShader: vertex,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The pixel granularity.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget granularity() { return this.uniforms.granularity.value; }\r\n\r\n\t/**\r\n\t * A higher value yields coarser visuals.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset granularity(x) {\r\n\r\n\t\tconst uniforms = this.uniforms;\r\n\t\tconst resolution = uniforms.resolution.value;\r\n\r\n\t\tuniforms.granularity.value = x;\r\n\t\tuniforms.dx.value = x / resolution.x;\r\n\t\tuniforms.dy.value = x / resolution.y;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the resolution.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetResolution(width, height) {\r\n\r\n\t\tthis.uniforms.resolution.value.set(width, height);\r\n\t\tthis.granularity = this.granularity;\r\n\r\n\t}\r\n\r\n}\r\n","import { ShaderMaterial, Uniform, Vector2 } from \"three\";\r\n\r\nconst fragment = \"#include <common>\\r\\n\\r\\nuniform sampler2D tDiffuse;\\r\\nuniform vec2 center;\\r\\nuniform float aspect;\\r\\nuniform float waveSize;\\r\\nuniform float radius;\\r\\nuniform float maxRadius;\\r\\nuniform float amplitude;\\r\\n\\r\\nvarying vec2 vUv;\\r\\nvarying float vSize;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvec2 aspectCorrection = vec2(aspect, 1.0);\\r\\n\\r\\n\\tvec2 difference = vUv * aspectCorrection - center * aspectCorrection;\\r\\n\\tfloat distance = sqrt(dot(difference, difference)) * vSize;\\r\\n\\r\\n\\tvec2 displacement = vec2(0.0);\\r\\n\\r\\n\\tif(distance > radius) {\\r\\n\\r\\n\\t\\tif(distance < radius + waveSize) {\\r\\n\\r\\n\\t\\t\\tfloat angle = (distance - radius) * PI2 / waveSize;\\r\\n\\t\\t\\tfloat cosSin = (1.0 - cos(angle)) * 0.5;\\r\\n\\r\\n\\t\\t\\tfloat extent = maxRadius + waveSize;\\r\\n\\t\\t\\tfloat decay = max(extent - distance * distance, 0.0) / extent;\\r\\n\\r\\n\\t\\t\\tdisplacement = ((cosSin * amplitude * difference) / distance) * decay;\\r\\n\\r\\n\\t\\t}\\r\\n\\r\\n\\t}\\r\\n\\r\\n\\tgl_FragColor = texture2D(tDiffuse, vUv - displacement);\\r\\n\\r\\n}\\r\\n\";\r\nconst vertex = \"uniform float size;\\r\\nuniform float scale;\\r\\nuniform float cameraDistance;\\r\\n\\r\\nvarying vec2 vUv;\\r\\nvarying float vSize;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvUv = uv;\\r\\n\\tvSize = (0.1 * cameraDistance) / size;\\r\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\r\\n\\r\\n}\\r\\n\";\r\n\r\n/**\r\n * A shock wave shader material.\r\n *\r\n * Based on a Gist by Jean-Philippe Sarda:\r\n *  https://gist.github.com/jpsarda/33cea67a9f2ecb0a0eda\r\n */\r\n\r\nexport class ShockWaveMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new shock wave material.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {Number} [options.waveSize=0.2] - The wave size.\r\n\t * @param {Number} [options.amplitude=0.05] - The distortion amplitude.\r\n\t */\r\n\r\n\tconstructor(options = {}) {\r\n\r\n\t\tif(options.maxRadius === undefined) { options.maxRadius = 1.0; }\r\n\t\tif(options.waveSize === undefined) { options.waveSize = 0.2; }\r\n\t\tif(options.amplitude === undefined) { options.amplitude = 0.05; }\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"ShockWaveMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\ttDiffuse: new Uniform(null),\r\n\r\n\t\t\t\tcenter: new Uniform(new Vector2(0.5, 0.5)),\r\n\t\t\t\taspect: new Uniform(1.0),\r\n\t\t\t\tcameraDistance: new Uniform(1.0),\r\n\r\n\t\t\t\tsize: new Uniform(1.0),\r\n\t\t\t\tradius: new Uniform(-options.waveSize),\r\n\t\t\t\tmaxRadius: new Uniform(options.maxRadius),\r\n\t\t\t\twaveSize: new Uniform(options.waveSize),\r\n\t\t\t\tamplitude: new Uniform(options.amplitude)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragment,\r\n\t\t\tvertexShader: vertex,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n}\r\n","import { ShaderMaterial, Uniform, Vector2 } from \"three\";\r\n\r\nconst fragment = \"uniform sampler2D tDiffuse;\\r\\nuniform sampler2D tWeights;\\r\\n\\r\\nuniform vec2 texelSize;\\r\\n\\r\\nvarying vec2 vUv;\\r\\nvarying vec4 vOffset;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\t// Fetch the blending weights for current pixel.\\r\\n\\tvec4 a;\\r\\n\\ta.xz = texture2D(tWeights, vUv).xz;\\r\\n\\ta.y = texture2D(tWeights, vOffset.zw).g;\\r\\n\\ta.w = texture2D(tWeights, vOffset.xy).a;\\r\\n\\r\\n\\tvec4 color;\\r\\n\\r\\n\\t// Check if there is any blending weight with a value greater than 0.0.\\r\\n\\tif(dot(a, vec4(1.0)) < 1e-5) {\\r\\n\\r\\n\\t\\tcolor = texture2D(tDiffuse, vUv, 0.0);\\r\\n\\r\\n\\t} else {\\r\\n\\r\\n\\t\\t/* Up to four lines can be crossing a pixel (one through each edge). We favor\\r\\n\\t\\t * blending by choosing the line with the maximum weight for each direction.\\r\\n\\t\\t */\\r\\n\\r\\n\\t\\tvec2 offset;\\r\\n\\t\\toffset.x = a.a > a.b ? a.a : -a.b; // Left vs. right.\\r\\n\\t\\toffset.y = a.g > a.r ? -a.g : a.r; // Top vs. bottom (changed signs).\\r\\n\\r\\n\\t\\t// Then we go in the direction that has the maximum weight (horizontal vs. vertical).\\r\\n\\t\\tif(abs(offset.x) > abs(offset.y)) {\\r\\n\\r\\n\\t\\t\\toffset.y = 0.0;\\r\\n\\r\\n\\t\\t} else {\\r\\n\\r\\n\\t\\t\\toffset.x = 0.0;\\r\\n\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\t// Fetch the opposite color and lerp by hand.\\r\\n\\t\\tcolor = texture2D(tDiffuse, vUv, 0.0);\\r\\n\\t\\tvec2 coord = vUv + sign(offset) * texelSize;\\r\\n\\t\\tvec4 oppositeColor = texture2D(tDiffuse, coord, 0.0);\\r\\n\\t\\tfloat s = abs(offset.x) > abs(offset.y) ? abs(offset.x) : abs(offset.y);\\r\\n\\r\\n\\t\\t// Gamma correction.\\r\\n\\t\\tcolor.rgb = pow(abs(color.rgb), vec3(2.2));\\r\\n\\t\\toppositeColor.rgb = pow(abs(oppositeColor.rgb), vec3(2.2));\\r\\n\\t\\tcolor = mix(color, oppositeColor, s);\\r\\n\\t\\tcolor.rgb = pow(abs(color.rgb), vec3(1.0 / 2.2));\\r\\n\\r\\n\\t}\\r\\n\\r\\n\\tgl_FragColor = color;\\r\\n\\r\\n}\\r\\n\";\r\nconst vertex = \"uniform vec2 texelSize;\\r\\n\\r\\nvarying vec2 vUv;\\r\\nvarying vec4 vOffset;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvUv = uv;\\r\\n\\r\\n\\tvOffset = uv.xyxy + texelSize.xyxy * vec4(1.0, 0.0, 0.0, -1.0); // Changed sign in W component.\\r\\n\\r\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\r\\n\\r\\n}\\r\\n\";\r\n\r\n/**\r\n * Subpixel Morphological Antialiasing.\r\n *\r\n * This material is used to render the final antialiasing.\r\n */\r\n\r\nexport class SMAABlendMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new SMAA blend material.\r\n\t *\r\n\t * @param {Vector2} [texelSize] - The absolute screen texel size.\r\n\t */\r\n\r\n\tconstructor(texelSize = new Vector2()) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"SMAABlendMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\ttDiffuse: new Uniform(null),\r\n\t\t\t\ttWeights: new Uniform(null),\r\n\t\t\t\ttexelSize: new Uniform(texelSize)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragment,\r\n\t\t\tvertexShader: vertex,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n}\r\n","import { ShaderMaterial, Uniform, Vector2 } from \"three\";\r\n\r\nconst fragment = \"uniform sampler2D tDiffuse;\\r\\n\\r\\nvarying vec2 vUv;\\r\\nvarying vec4 vOffset[3];\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tconst vec2 THRESHOLD = vec2(EDGE_THRESHOLD);\\r\\n\\r\\n\\t// Calculate color deltas.\\r\\n\\tvec4 delta;\\r\\n\\tvec3 c = texture2D(tDiffuse, vUv).rgb;\\r\\n\\r\\n\\tvec3 cLeft = texture2D(tDiffuse, vOffset[0].xy).rgb;\\r\\n\\tvec3 t = abs(c - cLeft);\\r\\n\\tdelta.x = max(max(t.r, t.g), t.b);\\r\\n\\r\\n\\tvec3 cTop = texture2D(tDiffuse, vOffset[0].zw).rgb;\\r\\n\\tt = abs(c - cTop);\\r\\n\\tdelta.y = max(max(t.r, t.g), t.b);\\r\\n\\r\\n\\t// We do the usual threshold.\\r\\n\\tvec2 edges = step(THRESHOLD, delta.xy);\\r\\n\\r\\n\\t// Then discard if there is no edge.\\r\\n\\tif(dot(edges, vec2(1.0)) == 0.0) {\\r\\n\\r\\n\\t\\tdiscard;\\r\\n\\r\\n\\t}\\r\\n\\r\\n\\t// Calculate right and bottom deltas.\\r\\n\\tvec3 cRight = texture2D(tDiffuse, vOffset[1].xy).rgb;\\r\\n\\tt = abs(c - cRight);\\r\\n\\tdelta.z = max(max(t.r, t.g), t.b);\\r\\n\\r\\n\\tvec3 cBottom  = texture2D(tDiffuse, vOffset[1].zw).rgb;\\r\\n\\tt = abs(c - cBottom);\\r\\n\\tdelta.w = max(max(t.r, t.g), t.b);\\r\\n\\r\\n\\t// Calculate the maximum delta in the direct neighborhood.\\r\\n\\tfloat maxDelta = max(max(max(delta.x, delta.y), delta.z), delta.w);\\r\\n\\r\\n\\t// Calculate left-left and top-top deltas.\\r\\n\\tvec3 cLeftLeft  = texture2D(tDiffuse, vOffset[2].xy).rgb;\\r\\n\\tt = abs(c - cLeftLeft);\\r\\n\\tdelta.z = max(max(t.r, t.g), t.b);\\r\\n\\r\\n\\tvec3 cTopTop = texture2D(tDiffuse, vOffset[2].zw).rgb;\\r\\n\\tt = abs(c - cTopTop);\\r\\n\\tdelta.w = max(max(t.r, t.g), t.b);\\r\\n\\r\\n\\t// Calculate the final maximum delta.\\r\\n\\tmaxDelta = max(max(maxDelta, delta.z), delta.w);\\r\\n\\r\\n\\t// Local contrast adaptation in action.\\r\\n\\tedges.xy *= step(0.5 * maxDelta, delta.xy);\\r\\n\\r\\n\\tgl_FragColor = vec4(edges, 0.0, 0.0);\\r\\n\\r\\n}\\r\\n\";\r\nconst vertex = \"uniform vec2 texelSize;\\r\\n\\r\\nvarying vec2 vUv;\\r\\nvarying vec4 vOffset[3];\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvUv = uv;\\r\\n\\r\\n\\tvOffset[0] = uv.xyxy + texelSize.xyxy * vec4(-1.0, 0.0, 0.0, 1.0); // Changed sign in W component.\\r\\n\\tvOffset[1] = uv.xyxy + texelSize.xyxy * vec4(1.0, 0.0, 0.0, -1.0); // Changed sign in W component.\\r\\n\\tvOffset[2] = uv.xyxy + texelSize.xyxy * vec4(-2.0, 0.0, 0.0, 2.0); // Changed sign in W component.\\r\\n\\r\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\r\\n\\r\\n}\\r\\n\";\r\n\r\n/**\r\n * Subpixel Morphological Antialiasing.\r\n *\r\n * This material detects edges in a color texture.\r\n */\r\n\r\nexport class SMAAColorEdgesMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new SMAA color edges material.\r\n\t *\r\n\t * @param {Vector2} [texelSize] - The absolute screen texel size.\r\n\t */\r\n\r\n\tconstructor(texelSize = new Vector2()) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"SMAAColorEdgesMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\r\n\t\t\t\tEDGE_THRESHOLD: \"0.1\"\r\n\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\ttDiffuse: new Uniform(null),\r\n\t\t\t\ttexelSize: new Uniform(texelSize)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragment,\r\n\t\t\tvertexShader: vertex,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n}\r\n","export default \"data:image/png;base64,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\";\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII=\";\r\n","import { ShaderMaterial, Uniform, Vector2 } from \"three\";\r\n\r\nimport areaImage from \"./images/smaa/areaImage.js\";\r\nimport searchImage from \"./images/smaa/searchImage.js\";\r\n\r\nconst fragment = \"#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + float(offset) * texelSize, 0.0)\\r\\n\\r\\nuniform sampler2D tDiffuse;\\r\\nuniform sampler2D tArea;\\r\\nuniform sampler2D tSearch;\\r\\n\\r\\nuniform vec2 texelSize;\\r\\n\\r\\nvarying vec2 vUv;\\r\\nvarying vec4 vOffset[3];\\r\\nvarying vec2 vPixCoord;\\r\\n\\r\\nvec2 round(vec2 x) {\\r\\n\\r\\n\\treturn sign(x) * floor(abs(x) + 0.5);\\r\\n\\r\\n}\\r\\n\\r\\nfloat searchLength(vec2 e, float bias, float scale) {\\r\\n\\r\\n\\t// Not required if tSearch accesses are set to point.\\r\\n\\t// const vec2 SEARCH_TEX_PIXEL_SIZE = 1.0 / vec2(66.0, 33.0);\\r\\n\\t// e = vec2(bias, 0.0) + 0.5 * SEARCH_TEX_PIXEL_SIZE + e * vec2(scale, 1.0) * vec2(64.0, 32.0) * SEARCH_TEX_PIXEL_SIZE;\\r\\n\\r\\n\\te.r = bias + e.r * scale;\\r\\n\\r\\n\\treturn 255.0 * texture2D(tSearch, e, 0.0).r;\\r\\n\\r\\n}\\r\\n\\r\\nfloat searchXLeft(vec2 texCoord, float end) {\\r\\n\\r\\n\\t/* @PSEUDO_GATHER4\\r\\n\\t * This texCoord has been offset by (-0.25, -0.125) in the vertex shader to\\r\\n\\t * sample between edge, thus fetching four edges in a row.\\r\\n\\t * Sampling with different offsets in each direction allows to disambiguate\\r\\n\\t * which edges are active from the four fetched ones.\\r\\n\\t */\\r\\n\\r\\n\\tvec2 e = vec2(0.0, 1.0);\\r\\n\\r\\n\\tfor(int i = 0; i < SMAA_MAX_SEARCH_STEPS_INT; ++i) {\\r\\n\\r\\n\\t\\te = texture2D(tDiffuse, texCoord, 0.0).rg;\\r\\n\\t\\ttexCoord -= vec2(2.0, 0.0) * texelSize;\\r\\n\\r\\n\\t\\tif(!(texCoord.x > end && e.g > 0.8281 && e.r == 0.0)) { break; }\\r\\n\\r\\n\\t}\\r\\n\\r\\n\\t// Correct the previously applied offset (-0.25, -0.125).\\r\\n\\ttexCoord.x += 0.25 * texelSize.x;\\r\\n\\r\\n\\t// The searches are biased by 1, so adjust the coords accordingly.\\r\\n\\ttexCoord.x += texelSize.x;\\r\\n\\r\\n\\t// Disambiguate the length added by the last step.\\r\\n\\ttexCoord.x += 2.0 * texelSize.x; // Undo last step.\\r\\n\\ttexCoord.x -= texelSize.x * searchLength(e, 0.0, 0.5);\\r\\n\\r\\n\\treturn texCoord.x;\\r\\n\\r\\n}\\r\\n\\r\\nfloat searchXRight(vec2 texCoord, float end) {\\r\\n\\r\\n\\tvec2 e = vec2(0.0, 1.0);\\r\\n\\r\\n\\tfor(int i = 0; i < SMAA_MAX_SEARCH_STEPS_INT; ++i) {\\r\\n\\r\\n\\t\\te = texture2D(tDiffuse, texCoord, 0.0).rg;\\r\\n\\t\\ttexCoord += vec2(2.0, 0.0) * texelSize;\\r\\n\\r\\n\\t\\tif(!(texCoord.x < end && e.g > 0.8281 && e.r == 0.0)) { break; }\\r\\n\\r\\n\\t}\\r\\n\\r\\n\\ttexCoord.x -= 0.25 * texelSize.x;\\r\\n\\ttexCoord.x -= texelSize.x;\\r\\n\\ttexCoord.x -= 2.0 * texelSize.x;\\r\\n\\ttexCoord.x += texelSize.x * searchLength(e, 0.5, 0.5);\\r\\n\\r\\n\\treturn texCoord.x;\\r\\n\\r\\n}\\r\\n\\r\\nfloat searchYUp(vec2 texCoord, float end) {\\r\\n\\r\\n\\tvec2 e = vec2(1.0, 0.0);\\r\\n\\r\\n\\tfor(int i = 0; i < SMAA_MAX_SEARCH_STEPS_INT; ++i) {\\r\\n\\r\\n\\t\\te = texture2D(tDiffuse, texCoord, 0.0).rg;\\r\\n\\t\\ttexCoord += vec2(0.0, 2.0) * texelSize; // Changed sign.\\r\\n\\r\\n\\t\\tif(!(texCoord.y > end && e.r > 0.8281 && e.g == 0.0)) { break; }\\r\\n\\r\\n\\t}\\r\\n\\r\\n\\ttexCoord.y -= 0.25 * texelSize.y; // Changed sign.\\r\\n\\ttexCoord.y -= texelSize.y; // Changed sign.\\r\\n\\ttexCoord.y -= 2.0 * texelSize.y; // Changed sign.\\r\\n\\ttexCoord.y += texelSize.y * searchLength(e.gr, 0.0, 0.5); // Changed sign.\\r\\n\\r\\n\\treturn texCoord.y;\\r\\n\\r\\n}\\r\\n\\r\\nfloat searchYDown(vec2 texCoord, float end) {\\r\\n\\r\\n\\tvec2 e = vec2(1.0, 0.0);\\r\\n\\r\\n\\tfor(int i = 0; i < SMAA_MAX_SEARCH_STEPS_INT; ++i ) {\\r\\n\\r\\n\\t\\te = texture2D(tDiffuse, texCoord, 0.0).rg;\\r\\n\\t\\ttexCoord -= vec2(0.0, 2.0) * texelSize; // Changed sign.\\r\\n\\r\\n\\t\\tif(!(texCoord.y < end && e.r > 0.8281 && e.g == 0.0)) { break; }\\r\\n\\r\\n\\t}\\r\\n\\r\\n\\ttexCoord.y += 0.25 * texelSize.y; // Changed sign.\\r\\n\\ttexCoord.y += texelSize.y; // Changed sign.\\r\\n\\ttexCoord.y += 2.0 * texelSize.y; // Changed sign.\\r\\n\\ttexCoord.y -= texelSize.y * searchLength(e.gr, 0.5, 0.5); // Changed sign.\\r\\n\\r\\n\\treturn texCoord.y;\\r\\n\\r\\n}\\r\\n\\r\\nvec2 area(vec2 dist, float e1, float e2, float offset) {\\r\\n\\r\\n\\t// Rounding prevents precision errors of bilinear filtering.\\r\\n\\tvec2 texCoord = SMAA_AREATEX_MAX_DISTANCE * round(4.0 * vec2(e1, e2)) + dist;\\r\\n\\r\\n\\t// Scale and bias for texel space translation.\\r\\n\\ttexCoord = SMAA_AREATEX_PIXEL_SIZE * texCoord + (0.5 * SMAA_AREATEX_PIXEL_SIZE);\\r\\n\\r\\n\\t// Move to proper place, according to the subpixel offset.\\r\\n\\ttexCoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;\\r\\n\\r\\n\\treturn texture2D(tArea, texCoord, 0.0).rg;\\r\\n\\r\\n}\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvec4 weights = vec4(0.0);\\r\\n\\tvec4 subsampleIndices = vec4(0.0);\\r\\n\\tvec2 e = texture2D(tDiffuse, vUv).rg;\\r\\n\\r\\n\\tif(e.g > 0.0) {\\r\\n\\r\\n\\t\\t// Edge at north.\\r\\n\\t\\tvec2 d;\\r\\n\\r\\n\\t\\t// Find the distance to the left.\\r\\n\\t\\tvec2 coords;\\r\\n\\t\\tcoords.x = searchXLeft(vOffset[0].xy, vOffset[2].x);\\r\\n\\t\\tcoords.y = vOffset[1].y; // vOffset[1].y = vUv.y - 0.25 * texelSize.y (@CROSSING_OFFSET)\\r\\n\\t\\td.x = coords.x;\\r\\n\\r\\n\\t\\t/* Now fetch the left crossing edges, two at a time using bilinear filtering.\\r\\n\\t\\tSampling at -0.25 (see @CROSSING_OFFSET) enables to discern what value each edge has. */\\r\\n\\r\\n\\t\\tfloat e1 = texture2D(tDiffuse, coords, 0.0).r;\\r\\n\\r\\n\\t\\t// Find the distance to the right.\\r\\n\\t\\tcoords.x = searchXRight(vOffset[0].zw, vOffset[2].y);\\r\\n\\t\\td.y = coords.x;\\r\\n\\r\\n\\t\\t// Translate distances to pixel units for better interleave arithmetic and memory accesses.\\r\\n\\t\\td = d / texelSize.x - vPixCoord.x;\\r\\n\\r\\n\\t\\t// The area below needs a sqrt, as the areas texture is compressed quadratically.\\r\\n\\t\\tvec2 sqrtD = sqrt(abs(d));\\r\\n\\r\\n\\t\\t// Fetch the right crossing edges.\\r\\n\\t\\tcoords.y -= texelSize.y; // WebGL port note: Added.\\r\\n\\t\\tfloat e2 = sampleLevelZeroOffset(tDiffuse, coords, ivec2(1, 0)).r;\\r\\n\\r\\n\\t\\t// Pattern recognised, now get the actual area.\\r\\n\\t\\tweights.rg = area(sqrtD, e1, e2, subsampleIndices.y);\\r\\n\\r\\n\\t}\\r\\n\\r\\n\\tif(e.r > 0.0) {\\r\\n\\r\\n\\t\\t// Edge at west.\\r\\n\\t\\tvec2 d;\\r\\n\\r\\n\\t\\t// Find the distance to the top.\\r\\n\\t\\tvec2 coords;\\r\\n\\r\\n\\t\\tcoords.y = searchYUp(vOffset[1].xy, vOffset[2].z);\\r\\n\\t\\tcoords.x = vOffset[0].x; // vOffset[1].x = vUv.x - 0.25 * texelSize.x;\\r\\n\\t\\td.x = coords.y;\\r\\n\\r\\n\\t\\t// Fetch the top crossing edges.\\r\\n\\t\\tfloat e1 = texture2D(tDiffuse, coords, 0.0).g;\\r\\n\\r\\n\\t\\t// Find the distance to the bottom.\\r\\n\\t\\tcoords.y = searchYDown(vOffset[1].zw, vOffset[2].w);\\r\\n\\t\\td.y = coords.y;\\r\\n\\r\\n\\t\\t// Distances in pixel units.\\r\\n\\t\\td = d / texelSize.y - vPixCoord.y;\\r\\n\\r\\n\\t\\t// The area below needs a sqrt, as the areas texture is compressed quadratically.\\r\\n\\t\\tvec2 sqrtD = sqrt(abs(d));\\r\\n\\r\\n\\t\\t// Fetch the bottom crossing edges.\\r\\n\\t\\tcoords.y -= texelSize.y; // WebGL port note: Added.\\r\\n\\t\\tfloat e2 = sampleLevelZeroOffset(tDiffuse, coords, ivec2(0, 1)).g;\\r\\n\\r\\n\\t\\t// Get the area for this direction.\\r\\n\\t\\tweights.ba = area(sqrtD, e1, e2, subsampleIndices.x);\\r\\n\\r\\n\\t}\\r\\n\\r\\n\\tgl_FragColor = weights;\\r\\n\\r\\n}\\r\\n\";\r\nconst vertex = \"uniform vec2 texelSize;\\r\\n\\r\\nvarying vec2 vUv;\\r\\nvarying vec4 vOffset[3];\\r\\nvarying vec2 vPixCoord;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvUv = uv;\\r\\n\\r\\n\\tvPixCoord = uv / texelSize;\\r\\n\\r\\n\\t// Offsets for the searches (see @PSEUDO_GATHER4).\\r\\n\\tvOffset[0] = uv.xyxy + texelSize.xyxy * vec4(-0.25, 0.125, 1.25, 0.125); // Changed sign in Y and W components.\\r\\n\\tvOffset[1] = uv.xyxy + texelSize.xyxy * vec4(-0.125, 0.25, -0.125, -1.25); //Changed sign in Y and W components.\\r\\n\\r\\n\\t// This indicates the ends of the loops.\\r\\n\\tvOffset[2] = vec4(vOffset[0].xz, vOffset[1].yw) + vec4(-2.0, 2.0, -2.0, 2.0) * texelSize.xxyy * SMAA_MAX_SEARCH_STEPS_FLOAT;\\r\\n\\r\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\r\\n\\r\\n}\\r\\n\";\r\n\r\n/**\r\n * Subpixel Morphological Antialiasing.\r\n *\r\n * This material computes weights for detected edges.\r\n */\r\n\r\nexport class SMAAWeightsMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new SMAA weights material.\r\n\t *\r\n\t * @param {Vector2} [texelSize] - The absolute screen texel size.\r\n\t */\r\n\r\n\tconstructor(texelSize = new Vector2()) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"SMAAWeightsMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\r\n\t\t\t\tSMAA_MAX_SEARCH_STEPS_INT: \"8\",\r\n\t\t\t\tSMAA_MAX_SEARCH_STEPS_FLOAT: \"8.0\",\r\n\r\n\t\t\t\tSMAA_AREATEX_MAX_DISTANCE: \"16.0\",\r\n\r\n\t\t\t\tSMAA_AREATEX_PIXEL_SIZE: \"(1.0 / vec2(160.0, 560.0))\",\r\n\t\t\t\tSMAA_AREATEX_SUBTEX_SIZE: \"(1.0 / 7.0)\"\r\n\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\ttDiffuse: new Uniform(null),\r\n\t\t\t\ttArea: new Uniform(null),\r\n\t\t\t\ttSearch: new Uniform(null),\r\n\t\t\t\ttexelSize: new Uniform(texelSize)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragment,\r\n\t\t\tvertexShader: vertex,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * The area pattern recognition image. Encoded as base64.\r\n\t\t *\r\n\t\t * @type {String}\r\n\t\t */\r\n\r\n\t\tthis.areaImage = areaImage;\r\n\r\n\t\t/**\r\n\t\t * The search image. Encoded as base64.\r\n\t\t *\r\n\t\t * @type {String}\r\n\t\t */\r\n\r\n\t\tthis.searchImage = searchImage;\r\n\r\n\t}\r\n\r\n}\r\n","import { ShaderMaterial, Uniform, Vector3 } from \"three\";\r\n\r\nconst fragment = \"uniform sampler2D tDiffuse;\\r\\nuniform float middleGrey;\\r\\nuniform float maxLuminance;\\r\\nuniform vec3 luminanceCoefficients;\\r\\n\\r\\n#ifdef ADAPTED_LUMINANCE\\r\\n\\r\\n\\tuniform sampler2D luminanceMap;\\r\\n\\r\\n#else\\r\\n\\r\\n\\tuniform float averageLuminance;\\r\\n\\r\\n#endif\\r\\n\\r\\nvarying vec2 vUv;\\r\\n\\r\\nvec3 toneMap(vec3 c) {\\r\\n\\r\\n\\t#ifdef ADAPTED_LUMINANCE\\r\\n\\r\\n\\t\\t// Get the calculated average luminance by sampling the center.\\r\\n\\t\\tfloat lumAvg = texture2D(luminanceMap, vec2(0.5)).r;\\r\\n\\r\\n\\t#else\\r\\n\\r\\n\\t\\tfloat lumAvg = averageLuminance;\\r\\n\\r\\n\\t#endif\\r\\n\\r\\n\\t// Calculate the luminance of the current pixel.\\r\\n\\tfloat lumPixel = dot(c, luminanceCoefficients);\\r\\n\\r\\n\\t// Apply the modified operator (Reinhard Eq. 4).\\r\\n\\tfloat lumScaled = (lumPixel * middleGrey) / lumAvg;\\r\\n\\r\\n\\tfloat lumCompressed = (lumScaled * (1.0 + (lumScaled / (maxLuminance * maxLuminance)))) / (1.0 + lumScaled);\\r\\n\\r\\n\\treturn lumCompressed * c;\\r\\n\\r\\n}\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvec4 texel = texture2D(tDiffuse, vUv);\\r\\n\\tgl_FragColor = vec4(toneMap(texel.rgb), texel.a);\\r\\n\\r\\n}\\r\\n\";\r\nconst vertex = \"varying vec2 vUv;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\tvUv = uv;\\r\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\r\\n\\r\\n}\\r\\n\";\r\n\r\n/**\r\n * Full-screen tone-mapping shader material.\r\n *\r\n * Reference:\r\n *  http://www.cis.rit.edu/people/faculty/ferwerda/publications/sig02_paper.pdf\r\n */\r\n\r\nexport class ToneMappingMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new tone mapping material.\r\n\t */\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"ToneMappingMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\ttDiffuse: new Uniform(null),\r\n\t\t\t\tluminanceMap: new Uniform(null),\r\n\t\t\t\taverageLuminance: new Uniform(1.0),\r\n\t\t\t\tluminanceCoefficients: new Uniform(new Vector3(0.2126, 0.7152, 0.0722)),\r\n\t\t\t\tmaxLuminance: new Uniform(16.0),\r\n\t\t\t\tmiddleGrey: new Uniform(0.6)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragment,\r\n\t\t\tvertexShader: vertex,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n}\r\n","/**\r\n * A collection of shader materials that are used in the post processing passes.\r\n *\r\n * @module postprocessing/materials\r\n */\r\n\r\nexport { AdaptiveLuminosityMaterial } from \"./AdaptiveLuminosityMaterial.js\";\r\nexport { BokehMaterial } from \"./BokehMaterial.js\";\r\nexport { Bokeh2Material } from \"./Bokeh2Material.js\";\r\nexport { CombineMaterial } from \"./CombineMaterial.js\";\r\nexport { ConvolutionMaterial, KernelSize } from \"./ConvolutionMaterial.js\";\r\nexport { CopyMaterial } from \"./CopyMaterial.js\";\r\nexport { DepthMaterial } from \"./DepthMaterial.js\";\r\nexport { DotScreenMaterial } from \"./DotScreenMaterial.js\";\r\nexport { FilmMaterial } from \"./FilmMaterial.js\";\r\nexport { GlitchMaterial } from \"./GlitchMaterial.js\";\r\nexport { GodRaysMaterial } from \"./GodRaysMaterial.js\";\r\nexport { LuminosityMaterial } from \"./LuminosityMaterial.js\";\r\nexport { PixelationMaterial } from \"./PixelationMaterial.js\";\r\nexport { ShockWaveMaterial } from \"./ShockWaveMaterial.js\";\r\nexport { SMAABlendMaterial } from \"./SMAABlendMaterial.js\";\r\nexport { SMAAColorEdgesMaterial } from \"./SMAAColorEdgesMaterial.js\";\r\nexport { SMAAWeightsMaterial } from \"./SMAAWeightsMaterial.js\";\r\nexport { ToneMappingMaterial } from \"./ToneMappingMaterial.js\";\r\n","import { Scene, Mesh, OrthographicCamera, PlaneBufferGeometry } from \"three\";\r\n\r\n/**\r\n * An abstract pass.\r\n *\r\n * Passes that do not rely on the depth buffer should explicitly disable the\r\n * depth test and depth write in their respective shader materials.\r\n *\r\n * This class implements a {@link Pass#dispose} method that frees memory on\r\n * demand.\r\n */\r\n\r\nexport class Pass {\r\n\r\n\t/**\r\n\t * Constructs a new pass.\r\n\t *\r\n\t * @param {Scene} [scene] - The scene to render.\r\n\t * @param {Camera} [camera] - The camera.\r\n\t * @param {Mesh} [quad] - A quad that fills the screen to render 2D filter effects. Set this to null, if you don't need it (see {@link RenderPass}).\r\n\t */\r\n\r\n\tconstructor(\r\n\t\tscene = new Scene(),\r\n\t\tcamera = new OrthographicCamera(-1, 1, 1, -1, 0, 1),\r\n\t\tquad = new Mesh(new PlaneBufferGeometry(2, 2), null)\r\n\t) {\r\n\r\n\t\t/**\r\n\t\t * The name of this pass.\r\n\t\t *\r\n\t\t * @type {String}\r\n\t\t */\r\n\r\n\t\tthis.name = \"Pass\";\r\n\r\n\t\t/**\r\n\t\t * The scene to render.\r\n\t\t *\r\n\t\t * @type {Scene}\r\n\t\t * @protected\r\n\t\t * @default new Scene()\r\n\t\t */\r\n\r\n\t\tthis.scene = scene;\r\n\r\n\t\t/**\r\n\t\t * The camera.\r\n\t\t *\r\n\t\t * @type {Camera}\r\n\t\t * @protected\r\n\t\t * @default new OrthographicCamera(-1, 1, 1, -1, 0, 1)\r\n\t\t */\r\n\r\n\t\tthis.camera = camera;\r\n\r\n\t\t/**\r\n\t\t * A quad mesh that fills the screen.\r\n\t\t *\r\n\t\t * Assign your shader material to this mesh!\r\n\t\t *\r\n\t\t * @type {Mesh}\r\n\t\t * @protected\r\n\t\t * @default new Mesh(new PlaneBufferGeometry(2, 2), null)\r\n\t\t * @example this.quad.material = this.myMaterial;\r\n\t\t */\r\n\r\n\t\tthis.quad = quad;\r\n\r\n\t\tif(this.quad !== null) {\r\n\r\n\t\t\tthis.quad.frustumCulled = false;\r\n\r\n\t\t\tif(this.scene !== null) {\r\n\r\n\t\t\t\tthis.scene.add(this.quad);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Indicates whether the read and write buffers should be swapped after this\r\n\t\t * pass has finished rendering.\r\n\t\t *\r\n\t\t * Set this to true if this pass renders to the write buffer so that a\r\n\t\t * following pass can find the result in the read buffer.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t */\r\n\r\n\t\tthis.needsSwap = false;\r\n\r\n\t\t/**\r\n\t\t * Enabled flag.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t * @default true\r\n\t\t */\r\n\r\n\t\tthis.enabled = true;\r\n\r\n\t\t/**\r\n\t\t * Render to screen flag.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t */\r\n\r\n\t\tthis.renderToScreen = false;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the effect.\r\n\t *\r\n\t * This is an abstract method that must be overridden.\r\n\t *\r\n\t * @abstract\r\n\t * @throws {Error} An error is thrown if the method is not overridden.\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} readBuffer - A read buffer. Contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} writeBuffer - A write buffer. Normally used as the render target when the read buffer is used as input.\r\n\t * @param {Number} [delta] - The delta time.\r\n\t * @param {Boolean} [maskActive] - Indicates whether a stencil test mask is active or not.\r\n\t */\r\n\r\n\trender(renderer, readBuffer, writeBuffer, delta, maskActive) {\r\n\r\n\t\tthrow new Error(\"Render method not implemented!\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this pass with the renderer's size.\r\n\t *\r\n\t * You may override this method in case you want to be informed about the main\r\n\t * render size.\r\n\t *\r\n\t * The {@link EffectComposer} calls this method before this pass is\r\n\t * initialised and every time its own size is updated.\r\n\t *\r\n\t * @param {Number} width - The renderer's width.\r\n\t * @param {Number} height - The renderer's height.\r\n\t * @example this.myRenderTarget.setSize(width, height);\r\n\t */\r\n\r\n\tsetSize(width, height) {}\r\n\r\n\t/**\r\n\t * Performs initialisation tasks.\r\n\t *\r\n\t * By overriding this method you gain access to the renderer. You'll also be\r\n\t * able to configure your custom render targets to use the appropriate format\r\n\t * (RGB or RGBA).\r\n\t *\r\n\t * The provided renderer can be used to warm up special off-screen render\r\n\t * targets by performing a preliminary render operation.\r\n\t *\r\n\t * The {@link EffectComposer} calls this method when this pass is added to its\r\n\t * queue.\r\n\t *\r\n\t * @method initialise\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t * @example if(!alpha) { this.myRenderTarget.texture.format = RGBFormat; }\r\n\t */\r\n\r\n\tinitialise(renderer, alpha) {}\r\n\r\n\t/**\r\n\t * Performs a shallow search for properties that define a dispose method and\r\n\t * deletes them. The pass will be inoperative after this method was called!\r\n\t *\r\n\t * Disposable objects:\r\n\t *  - render targets\r\n\t *  - materials\r\n\t *  - textures\r\n\t *\r\n\t * The {@link EffectComposer} calls this method when it is being destroyed.\r\n\t * You may, however, use it independently to free memory when you are certain\r\n\t * that you don't need this pass anymore.\r\n\t */\r\n\r\n\tdispose() {\r\n\r\n\t\tconst keys = Object.keys(this);\r\n\r\n\t\tlet key;\r\n\r\n\t\tfor(key of keys) {\r\n\r\n\t\t\tif(this[key] !== null && typeof this[key].dispose === \"function\") {\r\n\r\n\t\t\t\tthis[key].dispose();\r\n\t\t\t\tthis[key] = null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n","import { LinearFilter, RGBFormat, WebGLRenderTarget } from \"three\";\r\nimport { ConvolutionMaterial, KernelSize } from \"../materials\";\r\nimport { Pass } from \"./Pass.js\";\r\n\r\n/**\r\n * A blur pass.\r\n */\r\n\r\nexport class BlurPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new blur pass.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {Number} [options.resolutionScale=0.5] - The render texture resolution scale, relative to the screen render size.\r\n\t * @param {Number} [options.kernelSize=KernelSize.LARGE] - The blur kernel size.\r\n\t */\r\n\r\n\tconstructor(options = {}) {\r\n\r\n\t\tsuper();\r\n\r\n\t\t/**\r\n\t\t * The name of this pass.\r\n\t\t */\r\n\r\n\t\tthis.name = \"BlurPass\";\r\n\r\n\t\t/**\r\n\t\t * This pass renders to the write buffer.\r\n\t\t */\r\n\r\n\t\tthis.needsSwap = true;\r\n\r\n\t\t/**\r\n\t\t * A render target.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetX = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tdepthBuffer: false\r\n\t\t});\r\n\r\n\t\tthis.renderTargetX.texture.name = \"Blur.TargetX\";\r\n\t\tthis.renderTargetX.texture.generateMipmaps = false;\r\n\r\n\t\t/**\r\n\t\t * A second render target.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetY = this.renderTargetX.clone();\r\n\r\n\t\tthis.renderTargetY.texture.name = \"Blur.TargetY\";\r\n\r\n\t\t/**\r\n\t\t * The resolution scale.\r\n\t\t *\r\n\t\t * You need to call {@link EffectComposer#setSize} after changing this\r\n\t\t * value.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @default 0.5\r\n\t\t */\r\n\r\n\t\tthis.resolutionScale = (options.resolutionScale !== undefined) ? options.resolutionScale : 0.5;\r\n\r\n\t\t/**\r\n\t\t * A convolution shader material.\r\n\t\t *\r\n\t\t * @type {ConvolutionMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.convolutionMaterial = new ConvolutionMaterial();\r\n\r\n\t\tthis.kernelSize = options.kernelSize;\r\n\r\n\t\tthis.quad.material = this.convolutionMaterial;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The absolute width of the internal render targets.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget width() { return this.renderTargetX.width; }\r\n\r\n\t/**\r\n\t * The absolute height of the internal render targets.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget height() { return this.renderTargetX.height; }\r\n\r\n\t/**\r\n\t * The kernel size.\r\n\t *\r\n\t * @type {KernelSize}\r\n\t * @default KernelSize.LARGE\r\n\t */\r\n\r\n\tget kernelSize() { return this.convolutionMaterial.kernelSize; }\r\n\r\n\t/**\r\n\t * @type {KernelSize}\r\n\t */\r\n\r\n\tset kernelSize(x = KernelSize.LARGE) { this.convolutionMaterial.kernelSize = x; }\r\n\r\n\t/**\r\n\t * Blurs the read buffer.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer.\r\n\t * @param {WebGLRenderTarget} writeBuffer - The write buffer.\r\n\t */\r\n\r\n\trender(renderer, readBuffer, writeBuffer) {\r\n\r\n\t\tconst scene = this.scene;\r\n\t\tconst camera = this.camera;\r\n\r\n\t\tconst renderTargetX = this.renderTargetX;\r\n\t\tconst renderTargetY = this.renderTargetY;\r\n\r\n\t\tconst material = this.convolutionMaterial;\r\n\t\tconst uniforms = material.uniforms;\r\n\t\tconst kernel = material.getKernel();\r\n\r\n\t\tlet lastRT = readBuffer;\r\n\t\tlet destRT;\r\n\t\tlet i, l;\r\n\r\n\t\t// Apply the multi-pass blur.\r\n\t\tfor(i = 0, l = kernel.length - 1; i < l; ++i) {\r\n\r\n\t\t\t// Alternate between targets.\r\n\t\t\tdestRT = ((i % 2) === 0) ? renderTargetX : renderTargetY;\r\n\r\n\t\t\tuniforms.kernel.value = kernel[i];\r\n\t\t\tuniforms.tDiffuse.value = lastRT.texture;\r\n\t\t\trenderer.render(scene, camera, destRT);\r\n\r\n\t\t\tlastRT = destRT;\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.kernel.value = kernel[i];\r\n\t\tuniforms.tDiffuse.value = lastRT.texture;\r\n\t\trenderer.render(scene, camera, this.renderToScreen ? null : writeBuffer);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adjusts the format of the render targets.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t */\r\n\r\n\tinitialise(renderer, alpha) {\r\n\r\n\t\tif(!alpha) {\r\n\r\n\t\t\tthis.renderTargetX.texture.format = RGBFormat;\r\n\t\t\tthis.renderTargetY.texture.format = RGBFormat;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this pass with the renderer's size.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\twidth = Math.max(1, Math.floor(width * this.resolutionScale));\r\n\t\theight = Math.max(1, Math.floor(height * this.resolutionScale));\r\n\r\n\t\tthis.renderTargetX.setSize(width, height);\r\n\t\tthis.renderTargetY.setSize(width, height);\r\n\r\n\t\tthis.convolutionMaterial.setTexelSize(1.0 / width, 1.0 / height);\r\n\r\n\t}\r\n\r\n}\r\n","import { LinearFilter, RGBFormat, WebGLRenderTarget } from \"three\";\r\nimport { CombineMaterial, KernelSize, LuminosityMaterial } from \"../materials\";\r\nimport { BlurPass } from \"./BlurPass.js\";\r\nimport { Pass } from \"./Pass.js\";\r\n\r\n/**\r\n * A bloom pass.\r\n *\r\n * This pass renders a scene with superimposed blur by utilising the fast Kawase\r\n * convolution approach.\r\n */\r\n\r\nexport class BloomPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new bloom pass.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {Number} [options.resolutionScale=0.5] - The render texture resolution scale, relative to the screen render size.\r\n\t * @param {Number} [options.kernelSize=KernelSize.LARGE] - The blur kernel size.\r\n\t * @param {Number} [options.intensity=1.0] - The strength of the bloom effect.\r\n\t * @param {Number} [options.distinction=1.0] - The luminance distinction factor. Raise this value to bring out the brighter elements in the scene.\r\n\t * @param {Number} [options.screenMode=true] - Whether the screen blend mode should be used for combining the bloom texture with the scene colors.\r\n\t */\r\n\r\n\tconstructor(options = {}) {\r\n\r\n\t\tsuper();\r\n\r\n\t\t/**\r\n\t\t * The name of this pass.\r\n\t\t */\r\n\r\n\t\tthis.name = \"BloomPass\";\r\n\r\n\t\t/**\r\n\t\t * This pass renders to the write buffer.\r\n\t\t */\r\n\r\n\t\tthis.needsSwap = true;\r\n\r\n\t\t/**\r\n\t\t * A blur pass.\r\n\t\t *\r\n\t\t * @type {BlurPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.blurPass = new BlurPass(options);\r\n\r\n\t\t/**\r\n\t\t * A render target.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTarget = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tdepthBuffer: false\r\n\t\t});\r\n\r\n\t\tthis.renderTarget.texture.name = \"Bloom.Target\";\r\n\t\tthis.renderTarget.texture.generateMipmaps = false;\r\n\r\n\t\t/**\r\n\t\t * A combine shader material.\r\n\t\t *\r\n\t\t * @type {CombineMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.combineMaterial = new CombineMaterial((options.screenMode !== undefined) ? options.screenMode : true);\r\n\r\n\t\tthis.intensity = options.intensity;\r\n\r\n\t\t/**\r\n\t\t * A luminosity shader material.\r\n\t\t *\r\n\t\t * @type {LuminosityMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.luminosityMaterial = new LuminosityMaterial(true);\r\n\r\n\t\tthis.distinction = options.distinction;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The resolution scale.\r\n\t *\r\n\t * @type {Number}\r\n\t * @default 0.5\r\n\t */\r\n\r\n\tget resolutionScale() { return this.blurPass.resolutionScale; }\r\n\r\n\t/**\r\n\t * You need to call {@link EffectComposer#setSize} after changing this value.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset resolutionScale(x = 0.5) { this.blurPass.resolutionScale = x; }\r\n\r\n\t/**\r\n\t * The blur kernel size.\r\n\t *\r\n\t * @type {KernelSize}\r\n\t * @default KernelSize.LARGE\r\n\t */\r\n\r\n\tget kernelSize() { return this.blurPass.kernelSize; }\r\n\r\n\t/**\r\n\t * @type {KernelSize}\r\n\t */\r\n\r\n\tset kernelSize(x = KernelSize.LARGE) { this.blurPass.kernelSize = x; }\r\n\r\n\t/**\r\n\t * The overall intensity of the effect.\r\n\t *\r\n\t * @type {Number}\r\n\t * @default 1.0\r\n\t */\r\n\r\n\tget intensity() { return this.combineMaterial.uniforms.opacity2.value; }\r\n\r\n\t/**\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset intensity(x = 1.0) { this.combineMaterial.uniforms.opacity2.value = x; }\r\n\r\n\t/**\r\n\t * The luminance distinction factor.\r\n\t *\r\n\t * @type {Number}\r\n\t * @default 1.0\r\n\t */\r\n\r\n\tget distinction() { return this.luminosityMaterial.uniforms.distinction.value; }\r\n\r\n\t/**\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset distinction(x = 1.0) { this.luminosityMaterial.uniforms.distinction.value = x; }\r\n\r\n\t/**\r\n\t * Renders the effect.\r\n\t *\r\n\t * Extracts a luminance map from the read buffer, blurs it and combines it\r\n\t * with the read buffer.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer.\r\n\t * @param {WebGLRenderTarget} writeBuffer - The write buffer.\r\n\t */\r\n\r\n\trender(renderer, readBuffer, writeBuffer) {\r\n\r\n\t\tconst quad = this.quad;\r\n\t\tconst scene = this.scene;\r\n\t\tconst camera = this.camera;\r\n\t\tconst blurPass = this.blurPass;\r\n\r\n\t\tconst luminosityMaterial = this.luminosityMaterial;\r\n\t\tconst combineMaterial = this.combineMaterial;\r\n\t\tconst renderTarget = this.renderTarget;\r\n\r\n\t\t// Luminance filter.\r\n\t\tquad.material = luminosityMaterial;\r\n\t\tluminosityMaterial.uniforms.tDiffuse.value = readBuffer.texture;\r\n\t\trenderer.render(scene, camera, renderTarget);\r\n\r\n\t\t// Convolution phase.\r\n\t\tblurPass.render(renderer, renderTarget, renderTarget);\r\n\r\n\t\t// Render the original scene with superimposed blur.\r\n\t\tquad.material = combineMaterial;\r\n\t\tcombineMaterial.uniforms.texture1.value = readBuffer.texture;\r\n\t\tcombineMaterial.uniforms.texture2.value = renderTarget.texture;\r\n\r\n\t\trenderer.render(scene, camera, this.renderToScreen ? null : writeBuffer);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adjusts the format of the render targets.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t */\r\n\r\n\tinitialise(renderer, alpha) {\r\n\r\n\t\tthis.blurPass.initialise(renderer, alpha);\r\n\r\n\t\tif(!alpha) { this.renderTarget.texture.format = RGBFormat; }\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this pass with the renderer's size.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tthis.blurPass.setSize(width, height);\r\n\r\n\t\twidth = this.blurPass.width;\r\n\t\theight = this.blurPass.height;\r\n\r\n\t\tthis.renderTarget.setSize(width, height);\r\n\r\n\t}\r\n\r\n}\r\n","import { BokehMaterial } from \"../materials\";\r\nimport { Pass } from \"./Pass.js\";\r\n\r\n/**\r\n * A Depth of Field (DoF) pass using a bokeh shader.\r\n *\r\n * This pass requires a {@link EffectComposer#depthTexture}.\r\n */\r\n\r\nexport class BokehPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new bokeh pass.\r\n\t *\r\n\t * @param {PerspectiveCamera} camera - The main camera. Used to obtain the aspect ratio and the near and far plane settings.\r\n\t * @param {Object} [options] - Additional parameters.\r\n\t * @param {Number} [options.focus=1.0] - Focus distance.\r\n\t * @param {Number} [options.aperture=0.025] - Camera aperture scale. Bigger values for shallower depth of field.\r\n\t * @param {Number} [options.maxBlur=1.0] - Maximum blur strength.\r\n\t */\r\n\r\n\tconstructor(camera, options = {}) {\r\n\r\n\t\tsuper();\r\n\r\n\t\t/**\r\n\t\t * The name of this pass.\r\n\t\t */\r\n\r\n\t\tthis.name = \"BokehPass\";\r\n\r\n\t\t/**\r\n\t\t * This pass renders to the write buffer.\r\n\t\t */\r\n\r\n\t\tthis.needsSwap = true;\r\n\r\n\t\t/**\r\n\t\t * A bokeh shader material.\r\n\t\t *\r\n\t\t * @type {BokehMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.bokehMaterial = new BokehMaterial(camera, options);\r\n\r\n\t\tthis.quad.material = this.bokehMaterial;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer.\r\n\t * @param {WebGLRenderTarget} writeBuffer - The write buffer.\r\n\t */\r\n\r\n\trender(renderer, readBuffer, writeBuffer) {\r\n\r\n\t\tthis.bokehMaterial.uniforms.tDiffuse.value = readBuffer.texture;\r\n\t\tthis.bokehMaterial.uniforms.tDepth.value = readBuffer.depthTexture;\r\n\r\n\t\trenderer.render(this.scene, this.camera, this.renderToScreen ? null : writeBuffer);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this pass with the renderer's size.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tthis.bokehMaterial.uniforms.aspect.value = width / height;\r\n\r\n\t}\r\n\r\n}\r\n","import { Bokeh2Material } from \"../materials\";\r\nimport { Pass } from \"./Pass.js\";\r\n\r\n/**\r\n * An advanced Depth of Field (DoF) pass.\r\n *\r\n * Yields more realistic results but is also more demanding.\r\n *\r\n * This pass requires a {@link EffectComposer#depthTexture}.\r\n */\r\n\r\nexport class Bokeh2Pass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new bokeh2 pass.\r\n\t *\r\n\t * @param {PerspectiveCamera} camera - The main camera. Used to obtain the focal length and the near and far plane settings.\r\n\t * @param {Object} [options] - Additional parameters.\r\n\t * @param {Number} [options.rings=3] - The amount of blur rings.\r\n\t * @param {Number} [options.samples=4] - The amount of samples per ring.\r\n\t * @param {Boolean} [options.showFocus=false] - Whether the focus point should be highlighted.\r\n\t * @param {Boolean} [options.manualDoF=false] - Enables manual depth of field blur.\r\n\t * @param {Boolean} [options.vignette=false] - Enables a vignette effect.\r\n\t * @param {Boolean} [options.pentagon=false] - Enable to use a pentagonal shape to scale gathered texels.\r\n\t * @param {Boolean} [options.shaderFocus=true] - Disable if you compute your own focalDepth (in metres!).\r\n\t * @param {Boolean} [options.noise=true] - Disable if you don't want noise patterns for dithering.\r\n\t */\r\n\r\n\tconstructor(camera, options = {}) {\r\n\r\n\t\tsuper();\r\n\r\n\t\t/**\r\n\t\t * The name of this pass.\r\n\t\t */\r\n\r\n\t\tthis.name = \"Bokeh2Pass\";\r\n\r\n\t\t/**\r\n\t\t * This pass renders to the write buffer.\r\n\t\t */\r\n\r\n\t\tthis.needsSwap = true;\r\n\r\n\t\t/**\r\n\t\t * A bokeh shader material.\r\n\t\t *\r\n\t\t * @type {BokehMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.bokehMaterial = new Bokeh2Material(camera, options);\r\n\r\n\t\tthis.quad.material = this.bokehMaterial;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer.\r\n\t * @param {WebGLRenderTarget} writeBuffer - The write buffer.\r\n\t */\r\n\r\n\trender(renderer, readBuffer, writeBuffer) {\r\n\r\n\t\tthis.bokehMaterial.uniforms.tDiffuse.value = readBuffer.texture;\r\n\t\tthis.bokehMaterial.uniforms.tDepth.value = readBuffer.depthTexture;\r\n\r\n\t\trenderer.render(this.scene, this.camera, this.renderToScreen ? null : writeBuffer);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this pass with the renderer's size.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tthis.bokehMaterial.setTexelSize(1.0 / width, 1.0 / height);\r\n\r\n\t}\r\n\r\n}\r\n","import { Pass } from \"./Pass.js\";\r\n\r\n/**\r\n * A pass that disables the stencil mask.\r\n */\r\n\r\nexport class ClearMaskPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new clear mask pass.\r\n\t */\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper(null, null, null);\r\n\r\n\t\t/**\r\n\t\t * The name of this pass.\r\n\t\t */\r\n\r\n\t\tthis.name = \"ClearMaskPass\";\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Disables the stencil test.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t */\r\n\r\n\trender(renderer) {\r\n\r\n\t\trenderer.state.buffers.stencil.setTest(false);\r\n\r\n\t}\r\n\r\n}\r\n","import { Color } from \"three\";\r\nimport { Pass } from \"./Pass.js\";\r\n\r\n/**\r\n * Used for saving the original clear color of the renderer.\r\n *\r\n * @type Color\r\n * @private\r\n * @static\r\n */\r\n\r\nconst color = new Color();\r\n\r\n/**\r\n * A clear pass.\r\n *\r\n * You can prevent specific buffers from being cleared by setting either the\r\n * autoClearColor, autoClearStencil or autoClearDepth properties of the renderer\r\n * to false.\r\n */\r\n\r\nexport class ClearPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new clear pass.\r\n\t *\r\n\t * @param {Object} [options] - Additional options.\r\n\t * @param {Color} [options.clearColor=null] - An override clear color.\r\n\t * @param {Number} [options.clearAlpha=0.0] - An override clear alpha.\r\n\t */\r\n\r\n\tconstructor(options = {}) {\r\n\r\n\t\tsuper(null, null, null);\r\n\r\n\t\t/**\r\n\t\t * The name of this pass.\r\n\t\t */\r\n\r\n\t\tthis.name = \"ClearPass\";\r\n\r\n\t\t/**\r\n\t\t * Clear color.\r\n\t\t *\r\n\t\t * @type {Color}\r\n\t\t * @default null\r\n\t\t */\r\n\r\n\t\tthis.clearColor = (options.clearColor !== undefined) ? options.clearColor : null;\r\n\r\n\t\t/**\r\n\t\t * Clear alpha.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @default 0.0\r\n\t\t */\r\n\r\n\t\tthis.clearAlpha = (options.clearAlpha !== undefined) ? options.clearAlpha : 0.0;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Clears the read buffer or the screen.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer.\r\n\t */\r\n\r\n\trender(renderer, readBuffer) {\r\n\r\n\t\tconst clearColor = this.clearColor;\r\n\r\n\t\tlet clearAlpha;\r\n\r\n\t\tif(clearColor !== null) {\r\n\r\n\t\t\tcolor.copy(renderer.getClearColor());\r\n\t\t\tclearAlpha = renderer.getClearAlpha();\r\n\t\t\trenderer.setClearColor(clearColor, this.clearAlpha);\r\n\r\n\t\t}\r\n\r\n\t\trenderer.setRenderTarget(this.renderToScreen ? null : readBuffer);\r\n\t\trenderer.clear();\r\n\r\n\t\tif(clearColor !== null) {\r\n\r\n\t\t\trenderer.setClearColor(color, clearAlpha);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n","import { DotScreenMaterial } from \"../materials\";\r\nimport { Pass } from \"./Pass.js\";\r\n\r\n/**\r\n * A dot screen pass.\r\n */\r\n\r\nexport class DotScreenPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new dot screen pass.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {Number} [options.angle=1.57] - The angle of the pattern.\r\n\t * @param {Number} [options.scale=1.0] - The scale of the overall effect.\r\n\t * @param {Number} [options.intensity=1.0] - The intensity of the effect.\r\n\t * @param {Boolean} [options.average=false] - Whether the shader should output a colour average (black and white).\r\n\t */\r\n\r\n\tconstructor(options = {}) {\r\n\r\n\t\tsuper();\r\n\r\n\t\t/**\r\n\t\t * The name of this pass.\r\n\t\t */\r\n\r\n\t\tthis.name = \"DotScreenPass\";\r\n\r\n\t\t/**\r\n\t\t * This pass renders to the write buffer.\r\n\t\t */\r\n\r\n\t\tthis.needsSwap = true;\r\n\r\n\t\t/**\r\n\t\t * A dot screen shader material.\r\n\t\t *\r\n\t\t * @type {DotScreenMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.material = new DotScreenMaterial(options.average);\r\n\r\n\t\tif(options.angle !== undefined) { this.material.uniforms.angle.value = options.angle; }\r\n\t\tif(options.scale !== undefined) { this.material.uniforms.scale.value = options.scale; }\r\n\t\tif(options.intensity !== undefined) { this.material.uniforms.intensity.value = options.intensity; }\r\n\r\n\t\tthis.quad.material = this.material;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer.\r\n\t * @param {WebGLRenderTarget} writeBuffer - The write buffer.\r\n\t */\r\n\r\n\trender(renderer, readBuffer, writeBuffer) {\r\n\r\n\t\tthis.material.uniforms.tDiffuse.value = readBuffer.texture;\r\n\r\n\t\trenderer.render(this.scene, this.camera, this.renderToScreen ? null : writeBuffer);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this pass with the renderer's size.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} heght - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\twidth = Math.max(1, width);\r\n\t\theight = Math.max(1, height);\r\n\r\n\t\tthis.material.uniforms.offsetRepeat.value.z = width;\r\n\t\tthis.material.uniforms.offsetRepeat.value.w = height;\r\n\r\n\t}\r\n\r\n}\r\n","import { DepthMaterial } from \"../materials\";\r\nimport { Pass } from \"./Pass.js\";\r\n\r\n/**\r\n * A depth pass.\r\n *\r\n * Reads the depth from a depth texture and renders it.\r\n *\r\n * This pass requires a {@link EffectComposer#depthTexture}.\r\n */\r\n\r\nexport class DepthPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new depth pass.\r\n\t *\r\n\t * @param {PerspectiveCamera} camera - The main camera. Used to obtain the near and far plane settings.\r\n\t */\r\n\r\n\tconstructor(camera) {\r\n\r\n\t\tsuper();\r\n\r\n\t\t/**\r\n\t\t * The name of this pass.\r\n\t\t */\r\n\r\n\t\tthis.name = \"DepthPass\";\r\n\r\n\t\t/**\r\n\t\t * This pass renders to the write buffer.\r\n\t\t */\r\n\r\n\t\tthis.needsSwap = true;\r\n\r\n\t\t/**\r\n\t\t * A depth shader material.\r\n\t\t *\r\n\t\t * @type {DepthMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.depthMaterial = new DepthMaterial(camera);\r\n\r\n\t\tthis.quad.material = this.depthMaterial;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer.\r\n\t * @param {WebGLRenderTarget} writeBuffer - The write buffer.\r\n\t */\r\n\r\n\trender(renderer, readBuffer, writeBuffer) {\r\n\r\n\t\tthis.depthMaterial.uniforms.tDepth.value = readBuffer.depthTexture;\r\n\r\n\t\trenderer.render(this.scene, this.camera, this.renderToScreen ? null : writeBuffer);\r\n\r\n\t}\r\n\r\n}\r\n","import { FilmMaterial } from \"../materials\";\r\nimport { Pass } from \"./Pass.js\";\r\n\r\n/**\r\n * A film pass.\r\n *\r\n * Provides various cinematic effects.\r\n */\r\n\r\nexport class FilmPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new film pass.\r\n\t *\r\n\t * @param {Object} [options] - The options. Disabled effects have no negative impact on performance.\r\n\t * @param {Boolean} [options.greyscale=false] - Enable greyscale effect. Greyscale and sepia are mutually exclusive.\r\n\t * @param {Boolean} [options.sepia=false] - Enable sepia effect. Greyscale and sepia are mutually exclusive.\r\n\t * @param {Boolean} [options.vignette=false] - Apply vignette effect.\r\n\t * @param {Boolean} [options.eskil=false] - Use Eskil's vignette approach. The default looks dusty while Eskil looks more burned out.\r\n\t * @param {Boolean} [options.screenMode=true] - Whether the screen blend mode should be used for noise and scanlines.\r\n\t * @param {Boolean} [options.scanlines=true] - Show scanlines.\r\n\t * @param {Boolean} [options.noise=true] - Show noise-based film grain.\r\n\t * @param {Number} [options.noiseIntensity=0.5] - The noise intensity. 0.0 to 1.0.\r\n\t * @param {Number} [options.scanlineIntensity=0.05] - The scanline intensity. 0.0 to 1.0.\r\n\t * @param {Number} [options.scanlineDensity=1.0] - The number of scanlines in percent, relative to the screen height.\r\n\t * @param {Number} [options.greyscaleIntensity=1.0] - The intensity of the greyscale effect.\r\n\t * @param {Number} [options.sepiaIntensity=1.0] - The intensity of the sepia effect.\r\n\t * @param {Number} [options.vignetteOffset=1.0] - The offset of the vignette effect.\r\n\t * @param {Number} [options.vignetteDarkness=1.0] - The darkness of the vignette effect.\r\n\t */\r\n\r\n\tconstructor(options = {}) {\r\n\r\n\t\tsuper();\r\n\r\n\t\t/**\r\n\t\t * The name of this pass.\r\n\t\t */\r\n\r\n\t\tthis.name = \"FilmPass\";\r\n\r\n\t\t/**\r\n\t\t * This pass renders to the write buffer.\r\n\t\t */\r\n\r\n\t\tthis.needsSwap = true;\r\n\r\n\t\t/**\r\n\t\t * Film shader material.\r\n\t\t *\r\n\t\t * @type {FilmMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.material = new FilmMaterial(options);\r\n\r\n\t\tthis.quad.material = this.material;\r\n\r\n\t\t/**\r\n\t\t * The amount of scanlines in percent, relative to the screen height.\r\n\t\t *\r\n\t\t * You need to call {@link EffectComposer#setSize} after changing this\r\n\t\t * value.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @default 1.25\r\n\t\t */\r\n\r\n\t\tthis.scanlineDensity = (options.scanlineDensity === undefined) ? 1.25 : options.scanlineDensity;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer.\r\n\t * @param {WebGLRenderTarget} writeBuffer - The write buffer.\r\n\t * @param {Number} delta - The render delta time.\r\n\t */\r\n\r\n\trender(renderer, readBuffer, writeBuffer, delta) {\r\n\r\n\t\tthis.material.uniforms.tDiffuse.value = readBuffer.texture;\r\n\t\tthis.material.uniforms.time.value += delta;\r\n\r\n\t\trenderer.render(this.scene, this.camera, this.renderToScreen ? null : writeBuffer);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adjusts the scanline count using the renderer's height.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tthis.material.uniforms.scanlineCount.value = Math.round(height * this.scanlineDensity);\r\n\r\n\t}\r\n\r\n}\r\n","import { DataTexture, RGBFormat, FloatType } from \"three\";\r\nimport { GlitchMaterial } from \"../materials\";\r\nimport { Pass } from \"./Pass.js\";\r\n\r\n/**\r\n * Returns a random integer in the specified range.\r\n *\r\n * @private\r\n * @static\r\n * @param {Number} low - The lowest possible value.\r\n * @param {Number} high - The highest possible value.\r\n * @return {Number} The random value.\r\n */\r\n\r\nfunction randomInt(low, high) {\r\n\r\n\treturn low + Math.floor(Math.random() * (high - low + 1));\r\n\r\n}\r\n\r\n/**\r\n * Returns a random float in the specified range.\r\n *\r\n * @private\r\n * @static\r\n * @param {Number} low - The lowest possible value.\r\n * @param {Number} high - The highest possible value.\r\n * @return {Number} The random value.\r\n */\r\n\r\nfunction randomFloat(low, high) {\r\n\r\n\treturn low + Math.random() * (high - low);\r\n\r\n}\r\n\r\n/**\r\n * A glitch pass.\r\n */\r\n\r\nexport class GlitchPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new glitch pass.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {Texture} [options.perturbMap] - A perturbation map. If none is provided, a noise texture will be created.\r\n\t * @param {Number} [options.dtSize=64] - The size of the generated noise map. Will be ignored if a perturbation map is provided.\r\n\t */\r\n\r\n\tconstructor(options = {}) {\r\n\r\n\t\tsuper();\r\n\r\n\t\t/**\r\n\t\t * The name of this pass.\r\n\t\t */\r\n\r\n\t\tthis.name = \"GlitchPass\";\r\n\r\n\t\t/**\r\n\t\t * This pass renders to the write buffer.\r\n\t\t */\r\n\r\n\t\tthis.needsSwap = true;\r\n\r\n\t\t/**\r\n\t\t * Glitch shader material.\r\n\t\t *\r\n\t\t * @type {GlitchMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.material = new GlitchMaterial();\r\n\r\n\t\tthis.quad.material = this.material;\r\n\r\n\t\t/**\r\n\t\t * A perturbation map.\r\n\t\t *\r\n\t\t * @type {Texture}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.texture = null;\r\n\r\n\t\tthis.perturbMap = (options.perturbMap !== undefined) ? options.perturbMap : this.generatePerturbMap(options.dtSize);\r\n\t\tthis.perturbMap.name = \"Glitch.Perturbation\";\r\n\t\tthis.perturbMap.generateMipmaps = false;\r\n\r\n\t\t/**\r\n\t\t * The effect mode.\r\n\t\t *\r\n\t\t * @type {GlitchMode}\r\n\t\t * @default GlitchMode.SPORADIC\r\n\t\t */\r\n\r\n\t\tthis.mode = GlitchMode.SPORADIC;\r\n\r\n\t\t/**\r\n\t\t * Counter for glitch activation and deactivation.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.counter = 0;\r\n\r\n\t\t/**\r\n\t\t * A random break point for the sporadic glitch activation.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.breakPoint = randomInt(120, 240);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current perturbation map.\r\n\t *\r\n\t * @type {Texture}\r\n\t */\r\n\r\n\tget perturbMap() { return this.texture; }\r\n\r\n\t/**\r\n\t * Assigning a new perturbation map does not destroy the current one!\r\n\t *\r\n\t * @type {Texture}\r\n\t */\r\n\r\n\tset perturbMap(x) {\r\n\r\n\t\tthis.texture = x;\r\n\t\tthis.material.uniforms.tPerturb.value = x;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Destroys the current perturbation map and replaces it with a new one.\r\n\t *\r\n\t * @param {Number} [size=64] - The texture size.\r\n\t * @return {DataTexture} The perturbation texture.\r\n\t */\r\n\r\n\tgeneratePerturbMap(size = 64) {\r\n\r\n\t\tconst pixels = size * size;\r\n\t\tconst data = new Float32Array(pixels * 3);\r\n\r\n\t\tlet dt = this.perturbMap;\r\n\t\tlet i, x;\r\n\r\n\t\tfor(i = 0; i < pixels; ++i) {\r\n\r\n\t\t\tx = Math.random();\r\n\r\n\t\t\tdata[i * 3] = x;\r\n\t\t\tdata[i * 3 + 1] = x;\r\n\t\t\tdata[i * 3 + 2] = x;\r\n\r\n\t\t}\r\n\r\n\t\tif(dt !== null) {\r\n\r\n\t\t\tdt.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tdt = new DataTexture(data, size, size, RGBFormat, FloatType);\r\n\t\tdt.needsUpdate = true;\r\n\r\n\t\tthis.perturbMap = dt;\r\n\r\n\t\treturn dt;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer.\r\n\t * @param {WebGLRenderTarget} writeBuffer - The write buffer.\r\n\t */\r\n\r\n\trender(renderer, readBuffer, writeBuffer) {\r\n\r\n\t\tconst mode = this.mode;\r\n\t\tconst counter = this.counter;\r\n\t\tconst breakPoint = this.breakPoint;\r\n\t\tconst uniforms = this.material.uniforms;\r\n\r\n\t\tuniforms.tDiffuse.value = readBuffer.texture;\r\n\t\tuniforms.seed.value = Math.random();\r\n\t\tuniforms.active.value = true;\r\n\r\n\t\tif(counter % breakPoint === 0 || mode === GlitchMode.CONSTANT_WILD) {\r\n\r\n\t\t\tuniforms.amount.value = Math.random() / 30.0;\r\n\t\t\tuniforms.angle.value = randomFloat(-Math.PI, Math.PI);\r\n\t\t\tuniforms.seedX.value = randomFloat(-1.0, 1.0);\r\n\t\t\tuniforms.seedY.value = randomFloat(-1.0, 1.0);\r\n\t\t\tuniforms.distortionX.value = randomFloat(0.0, 1.0);\r\n\t\t\tuniforms.distortionY.value = randomFloat(0.0, 1.0);\r\n\r\n\t\t\tthis.breakPoint = randomInt(120, 240);\r\n\t\t\tthis.counter = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif(counter % breakPoint < breakPoint / 5 || mode === GlitchMode.CONSTANT_MILD) {\r\n\r\n\t\t\t\tuniforms.amount.value = Math.random() / 90.0;\r\n\t\t\t\tuniforms.angle.value = randomFloat(-Math.PI, Math.PI);\r\n\t\t\t\tuniforms.distortionX.value = randomFloat(0.0, 1.0);\r\n\t\t\t\tuniforms.distortionY.value = randomFloat(0.0, 1.0);\r\n\t\t\t\tuniforms.seedX.value = randomFloat(-0.3, 0.3);\r\n\t\t\t\tuniforms.seedY.value = randomFloat(-0.3, 0.3);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Sporadic.\r\n\t\t\t\tuniforms.active.value = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t++this.counter;\r\n\r\n\t\trenderer.render(this.scene, this.camera, this.renderToScreen ? null : writeBuffer);\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A glitch mode enumeration.\r\n *\r\n * @type {Object}\r\n * @property {Number} SPORADIC - Sporadic glitches.\r\n * @property {Number} CONSTANT_MILD - Constant mild glitches.\r\n * @property {Number} CONSTANT_WILD - Constant wild glitches.\r\n */\r\n\r\nexport const GlitchMode = {\r\n\r\n\tSPORADIC: 0,\r\n\tCONSTANT_MILD: 1,\r\n\tCONSTANT_WILD: 2\r\n\r\n};\r\n","import { ClearPass } from \"./ClearPass.js\";\r\nimport { Pass } from \"./Pass.js\";\r\n\r\n/**\r\n * A pass that renders a given scene directly on screen or into the read buffer\r\n * for further processing.\r\n */\r\n\r\nexport class RenderPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new render pass.\r\n\t *\r\n\t * @param {Scene} scene - The scene to render.\r\n\t * @param {Camera} camera - The camera to use to render the scene.\r\n\t * @param {Object} [options] - Additional options.\r\n\t * @param {Material} [options.overrideMaterial=null] - An override material for the scene.\r\n\t * @param {Color} [options.clearColor=null] - An override clear color.\r\n\t * @param {Number} [options.clearAlpha=1.0] - An override clear alpha.\r\n\t * @param {Boolean} [options.clearDepth=false] - Whether depth should be cleared explicitly.\r\n\t * @param {Boolean} [options.clear=true] - Whether all buffers should be cleared.\r\n\t */\r\n\r\n\tconstructor(scene, camera, options = {}) {\r\n\r\n\t\tsuper(scene, camera, null);\r\n\r\n\t\t/**\r\n\t\t * The name of this pass.\r\n\t\t */\r\n\r\n\t\tthis.name = \"RenderPass\";\r\n\r\n\t\t/**\r\n\t\t * A clear pass.\r\n\t\t *\r\n\t\t * @type {ClearPass}\r\n\t\t */\r\n\r\n\t\tthis.clearPass = new ClearPass(options);\r\n\r\n\t\t/**\r\n\t\t * An override material.\r\n\t\t *\r\n\t\t * @type {Material}\r\n\t\t * @default null\r\n\t\t */\r\n\r\n\t\tthis.overrideMaterial = (options.overrideMaterial !== undefined) ? options.overrideMaterial : null;\r\n\r\n\t\t/**\r\n\t\t * Indicates whether the depth buffer should be cleared explicitly.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t */\r\n\r\n\t\tthis.clearDepth = (options.clearDepth !== undefined) ? options.clearDepth : false;\r\n\r\n\t\t/**\r\n\t\t * Indicates whether the color, depth and stencil buffers should be cleared.\r\n\t\t *\r\n\t\t * Even with clear set to true you can prevent specific buffers from being\r\n\t\t * cleared by setting either the autoClearColor, autoClearStencil or\r\n\t\t * autoClearDepth properties of the renderer to false.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t * @default true\r\n\t\t */\r\n\r\n\t\tthis.clear = (options.clear !== undefined) ? options.clear : true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the scene.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer.\r\n\t */\r\n\r\n\trender(renderer, readBuffer) {\r\n\r\n\t\tconst scene = this.scene;\r\n\t\tconst target = this.renderToScreen ? null : readBuffer;\r\n\r\n\t\tif(this.clear) {\r\n\r\n\t\t\tthis.clearPass.render(renderer, target);\r\n\r\n\t\t} else if(this.clearDepth) {\r\n\r\n\t\t\trenderer.setRenderTarget(target);\r\n\t\t\trenderer.clearDepth();\r\n\r\n\t\t}\r\n\r\n\t\tscene.overrideMaterial = this.overrideMaterial;\r\n\t\trenderer.render(scene, this.camera, target);\r\n\t\tscene.overrideMaterial = null;\r\n\r\n\t}\r\n\r\n}\r\n","import {\r\n\tColor,\r\n\tLinearFilter,\r\n\tMeshBasicMaterial,\r\n\tRGBFormat,\r\n\tScene,\r\n\tVector3,\r\n\tWebGLRenderTarget\r\n} from \"three\";\r\n\r\nimport { CombineMaterial, GodRaysMaterial, KernelSize } from \"../materials\";\r\nimport { RenderPass } from \"./RenderPass.js\";\r\nimport { BlurPass } from \"./BlurPass.js\";\r\nimport { Pass } from \"./Pass.js\";\r\n\r\n/**\r\n * Clamps a given value.\r\n *\r\n * @private\r\n * @static\r\n * @param {Number} value - The value to clamp.\r\n * @param {Number} min - The lowest possible value.\r\n * @param {Number} max - The highest possible value.\r\n * @return {Number} The clamped value.\r\n */\r\n\r\nfunction clamp(value, min, max) {\r\n\r\n\treturn Math.max(min, Math.min(max, value));\r\n\r\n}\r\n\r\n/**\r\n * A crepuscular rays pass.\r\n */\r\n\r\nexport class GodRaysPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new god rays pass.\r\n\t *\r\n\t * @param {Scene} scene - The main scene.\r\n\t * @param {Camera} camera - The main camera.\r\n\t * @param {Object3D} lightSource - The main light source.\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {Number} [options.density=0.96] - The density of the light rays.\r\n\t * @param {Number} [options.decay=0.93] - An illumination decay factor.\r\n\t * @param {Number} [options.weight=0.4] - A light ray weight factor.\r\n\t * @param {Number} [options.exposure=0.6] - A constant attenuation coefficient.\r\n\t * @param {Number} [options.clampMax=1.0] - An upper bound for the saturation of the overall effect.\r\n\t * @param {Number} [options.intensity=1.0] - A constant factor for additive blending.\r\n\t * @param {Number} [options.resolutionScale=0.5] - The render texture resolution scale, relative to the screen render size.\r\n\t * @param {Number} [options.kernelSize=KernelSize.LARGE] - The blur kernel size.\r\n\t * @param {Number} [options.samples=60] - The number of samples per pixel.\r\n\t * @param {Number} [options.screenMode=true] - Whether the screen blend mode should be used for combining the god rays texture with the scene colors.\r\n\t */\r\n\r\n\tconstructor(scene, camera, lightSource, options = {}) {\r\n\r\n\t\tsuper();\r\n\r\n\t\t/**\r\n\t\t * The name of this pass.\r\n\t\t */\r\n\r\n\t\tthis.name = \"GodRaysPass\";\r\n\r\n\t\t/**\r\n\t\t * This pass renders to the write buffer.\r\n\t\t */\r\n\r\n\t\tthis.needsSwap = true;\r\n\r\n\t\t/**\r\n\t\t * A scene that only contains the light source.\r\n\t\t *\r\n\t\t * @type {Scene}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.lightScene = new Scene();\r\n\r\n\t\t/**\r\n\t\t * The main scene.\r\n\t\t *\r\n\t\t * @type {Scene}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.mainScene = scene;\r\n\r\n\t\t/**\r\n\t\t * The main camera.\r\n\t\t *\r\n\t\t * @type {Camera}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.mainCamera = camera;\r\n\r\n\t\t/**\r\n\t\t * A pass that only renders the light source.\r\n\t\t *\r\n\t\t * @type {RenderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderPassLight = new RenderPass(this.lightScene, this.mainCamera);\r\n\r\n\t\t/**\r\n\t\t * A pass that renders the masked scene over the light.\r\n\t\t *\r\n\t\t * @type {RenderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderPassMask = new RenderPass(this.mainScene, this.mainCamera, {\r\n\t\t\toverrideMaterial: new MeshBasicMaterial({ color: 0x000000 }),\r\n\t\t\tclearColor: new Color(0x000000)\r\n\t\t});\r\n\r\n\t\tthis.renderPassMask.clear = false;\r\n\r\n\t\t/**\r\n\t\t * A blur pass.\r\n\t\t *\r\n\t\t * @type {BlurPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.blurPass = new BlurPass(options);\r\n\r\n\t\t/**\r\n\t\t * A render target.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetX = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tdepthBuffer: false\r\n\t\t});\r\n\r\n\t\tthis.renderTargetX.texture.name = \"GodRays.TargetX\";\r\n\t\tthis.renderTargetX.texture.generateMipmaps = false;\r\n\r\n\t\t/**\r\n\t\t * A second render target.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetY = this.renderTargetX.clone();\r\n\r\n\t\tthis.renderTargetY.texture.name = \"GodRays.TargetY\";\r\n\r\n\t\t/**\r\n\t\t * A render target for the masked light scene.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetMask = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter\r\n\t\t});\r\n\r\n\t\tthis.renderTargetMask.texture.name = \"GodRays.Mask\";\r\n\t\tthis.renderTargetMask.texture.generateMipmaps = false;\r\n\r\n\t\t/**\r\n\t\t * The light source.\r\n\t\t *\r\n\t\t * @type {Object3D}\r\n\t\t */\r\n\r\n\t\tthis.lightSource = lightSource;\r\n\r\n\t\t/**\r\n\t\t * The light position in screen space.\r\n\t\t *\r\n\t\t * @type {Vector3}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.screenPosition = new Vector3();\r\n\r\n\t\t/**\r\n\t\t * A god rays shader material.\r\n\t\t *\r\n\t\t * @type {GodRaysMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.godRaysMaterial = new GodRaysMaterial();\r\n\t\tthis.godRaysMaterial.uniforms.lightPosition.value = this.screenPosition;\r\n\r\n\t\tif(options.exposure !== undefined) { this.godRaysMaterial.uniforms.exposure.value = options.exposure; }\r\n\t\tif(options.density !== undefined) { this.godRaysMaterial.uniforms.density.value = options.density; }\r\n\t\tif(options.decay !== undefined) { this.godRaysMaterial.uniforms.decay.value = options.decay; }\r\n\t\tif(options.weight !== undefined) { this.godRaysMaterial.uniforms.weight.value = options.weight; }\r\n\t\tif(options.clampMax !== undefined) { this.godRaysMaterial.uniforms.clampMax.value = options.clampMax; }\r\n\r\n\t\tthis.samples = options.samples;\r\n\r\n\t\t/**\r\n\t\t * A combine shader material.\r\n\t\t *\r\n\t\t * @type {CombineMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.combineMaterial = new CombineMaterial((options.screenMode !== undefined) ? options.screenMode : true);\r\n\r\n\t\tthis.intensity = options.intensity;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The resolution scale.\r\n\t *\r\n\t * @type {Number}\r\n\t * @default 0.5\r\n\t */\r\n\r\n\tget resolutionScale() { return this.blurPass.resolutionScale; }\r\n\r\n\t/**\r\n\t * You need to call {@link EffectComposer#setSize} after changing this value.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset resolutionScale(x = 0.5) { this.blurPass.resolutionScale = x; }\r\n\r\n\t/**\r\n\t * The blur kernel size.\r\n\t *\r\n\t * @type {KernelSize}\r\n\t * @default KernelSize.LARGE\r\n\t */\r\n\r\n\tget kernelSize() { return this.blurPass.kernelSize; }\r\n\r\n\t/**\r\n\t * @type {KernelSize}\r\n\t */\r\n\r\n\tset kernelSize(x = KernelSize.LARGE) { this.blurPass.kernelSize = x; }\r\n\r\n\t/**\r\n\t * The overall intensity of the effect.\r\n\t *\r\n\t * @type {Number}\r\n\t * @default 1.0\r\n\t */\r\n\r\n\tget intensity() { return this.combineMaterial.uniforms.opacity2.value; }\r\n\r\n\t/**\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset intensity(x = 1.0) { this.combineMaterial.uniforms.opacity2.value = x; }\r\n\r\n\t/**\r\n\t * The number of samples per pixel.\r\n\t *\r\n\t * @type {Number}\r\n\t * @default 60\r\n\t */\r\n\r\n\tget samples() { return Number.parseInt(this.godRaysMaterial.defines.NUM_SAMPLES_INT); }\r\n\r\n\t/**\r\n\t * This value must be carefully chosen. A higher value directly increases the\r\n\t * GPU load.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset samples(x = 60) {\r\n\r\n\t\tx = Math.floor(x);\r\n\r\n\t\tthis.godRaysMaterial.defines.NUM_SAMPLES_FLOAT = x.toFixed(1);\r\n\t\tthis.godRaysMaterial.defines.NUM_SAMPLES_INT = x.toFixed(0);\r\n\t\tthis.godRaysMaterial.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the scene.\r\n\t *\r\n\t * The god rays pass has four phases:\r\n\t *\r\n\t * Mask Phase:\r\n\t *  First, the light source is rendered. Then the scene is rendered into the\r\n\t *  same buffer using a mask override material with depth test enabled.\r\n\t *\r\n\t * Preliminary Blur Phase:\r\n\t *  The masked scene is blurred.\r\n\t *\r\n\t * God Rays Phase:\r\n\t *  The blurred scene is blurred again, but this time along radial lines\r\n\t *  towards the light source.\r\n\t *\r\n\t * Composite Phase:\r\n\t *  The final result is combined with the read buffer.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer.\r\n\t * @param {WebGLRenderTarget} writeBuffer - The write buffer.\r\n\t */\r\n\r\n\trender(renderer, readBuffer, writeBuffer) {\r\n\r\n\t\tconst quad = this.quad;\r\n\t\tconst scene = this.scene;\r\n\t\tconst camera = this.camera;\r\n\t\tconst mainScene = this.mainScene;\r\n\r\n\t\tconst lightSource = this.lightSource;\r\n\t\tconst screenPosition = this.screenPosition;\r\n\r\n\t\tconst godRaysMaterial = this.godRaysMaterial;\r\n\t\tconst combineMaterial = this.combineMaterial;\r\n\r\n\t\tconst renderTargetMask = this.renderTargetMask;\r\n\t\tconst renderTargetX = this.renderTargetX;\r\n\t\tconst renderTargetY = this.renderTargetY;\r\n\r\n\t\tlet background, parent;\r\n\r\n\t\t// Compute the screen light position and translate it to [0, 1].\r\n\t\tscreenPosition.copy(lightSource.position).project(this.mainCamera);\r\n\t\tscreenPosition.x = clamp((screenPosition.x + 1.0) * 0.5, 0.0, 1.0);\r\n\t\tscreenPosition.y = clamp((screenPosition.y + 1.0) * 0.5, 0.0, 1.0);\r\n\r\n\t\t// Render the masked scene.\r\n\t\tparent = lightSource.parent;\r\n\t\tbackground = mainScene.background;\r\n\t\tmainScene.background = null;\r\n\t\tthis.lightScene.add(lightSource);\r\n\r\n\t\tthis.renderPassLight.render(renderer, renderTargetMask);\r\n\t\tthis.renderPassMask.render(renderer, renderTargetMask);\r\n\r\n\t\tif(parent !== null) {\r\n\r\n\t\t\tparent.add(lightSource);\r\n\r\n\t\t}\r\n\r\n\t\tmainScene.background = background;\r\n\r\n\t\t// Convolution phase.\r\n\t\tthis.blurPass.render(renderer, renderTargetMask, renderTargetX);\r\n\r\n\t\t// God rays pass.\r\n\t\tquad.material = godRaysMaterial;\r\n\t\tgodRaysMaterial.uniforms.tDiffuse.value = renderTargetX.texture;\r\n\t\trenderer.render(scene, camera, renderTargetY);\r\n\r\n\t\t// Final pass - composite god rays onto colours.\r\n\t\tquad.material = combineMaterial;\r\n\t\tcombineMaterial.uniforms.texture1.value = readBuffer.texture;\r\n\t\tcombineMaterial.uniforms.texture2.value = renderTargetY.texture;\r\n\r\n\t\trenderer.render(scene, camera, this.renderToScreen ? null : writeBuffer);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adjusts the format of the render targets.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t */\r\n\r\n\tinitialise(renderer, alpha) {\r\n\r\n\t\tthis.renderPassLight.initialise(renderer, alpha);\r\n\t\tthis.renderPassMask.initialise(renderer, alpha);\r\n\t\tthis.blurPass.initialise(renderer, alpha);\r\n\r\n\t\tif(!alpha) {\r\n\r\n\t\t\tthis.renderTargetMask.texture.format = RGBFormat;\r\n\t\t\tthis.renderTargetX.texture.format = RGBFormat;\r\n\t\t\tthis.renderTargetY.texture.format = RGBFormat;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this pass with the renderer's size.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tthis.renderPassLight.setSize(width, height);\r\n\t\tthis.renderPassMask.setSize(width, height);\r\n\t\tthis.blurPass.setSize(width, height);\r\n\r\n\t\twidth = this.blurPass.width;\r\n\t\theight = this.blurPass.height;\r\n\r\n\t\tthis.renderTargetMask.setSize(width, height);\r\n\t\tthis.renderTargetX.setSize(width, height);\r\n\t\tthis.renderTargetY.setSize(width, height);\r\n\r\n\t}\r\n\r\n}\r\n","import { Pass } from \"./Pass.js\";\r\n\r\n/**\r\n * A mask pass.\r\n */\r\n\r\nexport class MaskPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new mask pass.\r\n\t *\r\n\t * @param {Scene} scene - The scene to render.\r\n\t * @param {Camera} camera - The camera to use.\r\n\t */\r\n\r\n\tconstructor(scene, camera) {\r\n\r\n\t\tsuper(scene, camera, null);\r\n\r\n\t\t/**\r\n\t\t * The name of this pass.\r\n\t\t */\r\n\r\n\t\tthis.name = \"MaskPass\";\r\n\r\n\t\t/**\r\n\t\t * Inverse flag.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t */\r\n\r\n\t\tthis.inverse = false;\r\n\r\n\t\t/**\r\n\t\t * Stencil buffer clear flag.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t * @default true\r\n\t\t */\r\n\r\n\t\tthis.clearStencil = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a stencil bit mask.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer.\r\n\t * @param {WebGLRenderTarget} writeBuffer - The write buffer.\r\n\t */\r\n\r\n\trender(renderer, readBuffer, writeBuffer) {\r\n\r\n\t\tconst context = renderer.context;\r\n\t\tconst state = renderer.state;\r\n\r\n\t\tconst scene = this.scene;\r\n\t\tconst camera = this.camera;\r\n\r\n\t\tconst writeValue = this.inverse ? 0 : 1;\r\n\t\tconst clearValue = 1 - writeValue;\r\n\r\n\t\t// Don't update color or depth.\r\n\t\tstate.buffers.color.setMask(false);\r\n\t\tstate.buffers.depth.setMask(false);\r\n\r\n\t\t// Lock the buffers.\r\n\t\tstate.buffers.color.setLocked(true);\r\n\t\tstate.buffers.depth.setLocked(true);\r\n\r\n\t\t// Configure the stencil.\r\n\t\tstate.buffers.stencil.setTest(true);\r\n\t\tstate.buffers.stencil.setOp(context.REPLACE, context.REPLACE, context.REPLACE);\r\n\t\tstate.buffers.stencil.setFunc(context.ALWAYS, writeValue, 0xffffffff);\r\n\t\tstate.buffers.stencil.setClear(clearValue);\r\n\r\n\t\t// Clear the stencil.\r\n\t\tif(this.clearStencil) {\r\n\r\n\t\t\trenderer.setRenderTarget(readBuffer);\r\n\t\t\trenderer.clearStencil();\r\n\r\n\t\t\trenderer.setRenderTarget(writeBuffer);\r\n\t\t\trenderer.clearStencil();\r\n\r\n\t\t}\r\n\r\n\t\t// Draw the mask into both buffers.\r\n\t\trenderer.render(scene, camera, readBuffer);\r\n\t\trenderer.render(scene, camera, writeBuffer);\r\n\r\n\t\t// Unlock the buffers.\r\n\t\tstate.buffers.color.setLocked(false);\r\n\t\tstate.buffers.depth.setLocked(false);\r\n\r\n\t\t// Only render where the stencil is set to 1.\r\n\t\tstate.buffers.stencil.setFunc(context.EQUAL, 1, 0xffffffff);\r\n\t\tstate.buffers.stencil.setOp(context.KEEP, context.KEEP, context.KEEP);\r\n\r\n\t}\r\n\r\n}\r\n","import { PixelationMaterial } from \"../materials\";\r\nimport { Pass } from \"./Pass.js\";\r\n\r\n/**\r\n * A pixelation pass.\r\n */\r\n\r\nexport class PixelationPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new pixelation pass.\r\n\t *\r\n\t * @param {Number} [granularity=30.0] - The intensity of the effect.\r\n\t */\r\n\r\n\tconstructor(granularity = 30.0) {\r\n\r\n\t\tsuper();\r\n\r\n\t\t/**\r\n\t\t * The name of this pass.\r\n\t\t */\r\n\r\n\t\tthis.name = \"PixelationPass\";\r\n\r\n\t\t/**\r\n\t\t * This pass renders to the write buffer.\r\n\t\t */\r\n\r\n\t\tthis.needsSwap = true;\r\n\r\n\t\t/**\r\n\t\t * A pixelation shader material.\r\n\t\t *\r\n\t\t * @type {PixelationMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.pixelationMaterial = new PixelationMaterial();\r\n\r\n\t\tthis.granularity = granularity;\r\n\r\n\t\tthis.quad.material = this.pixelationMaterial;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The pixel granularity.\r\n\t *\r\n\t * @type {Number}\r\n\t * @default 30.0\r\n\t */\r\n\r\n\tget granularity() { return this.pixelationMaterial.granularity; }\r\n\r\n\t/**\r\n\t * A higher value yields coarser visuals.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset granularity(x = 30) {\r\n\r\n\t\tx = Math.floor(x);\r\n\r\n\t\tif(x % 2 > 0) {\r\n\r\n\t\t\tx += 1;\r\n\r\n\t\t}\r\n\r\n\t\tthis.pixelationMaterial.granularity = x;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer.\r\n\t * @param {WebGLRenderTarget} writeBuffer - The write buffer.\r\n\t */\r\n\r\n\trender(renderer, readBuffer, writeBuffer) {\r\n\r\n\t\tthis.pixelationMaterial.uniforms.tDiffuse.value = readBuffer.texture;\r\n\r\n\t\trenderer.render(this.scene, this.camera, this.renderToScreen ? null : writeBuffer);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this pass with the renderer's size.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tthis.pixelationMaterial.setResolution(width, height);\r\n\r\n\t}\r\n\r\n}\r\n","import { LinearFilter, RGBFormat, WebGLRenderTarget } from \"three\";\r\nimport { CopyMaterial } from \"../materials\";\r\nimport { Pass } from \"./Pass.js\";\r\n\r\n/**\r\n * A pass that renders the result from a previous pass to another render target.\r\n */\r\n\r\nexport class SavePass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new save pass.\r\n\t *\r\n\t * @param {WebGLRenderTarget} [renderTarget] - The render target to use for saving the read buffer.\r\n\t * @param {Boolean} [resize=true] - Whether the render target should adjust to the size of the read/write buffer.\r\n\t */\r\n\r\n\tconstructor(renderTarget, resize = true) {\r\n\r\n\t\tsuper();\r\n\r\n\t\t/**\r\n\t\t * The name of this pass.\r\n\t\t */\r\n\r\n\t\tthis.name = \"SavePass\";\r\n\r\n\t\t/**\r\n\t\t * Copy shader material.\r\n\t\t *\r\n\t\t * @type {CopyMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.material = new CopyMaterial();\r\n\r\n\t\tthis.quad.material = this.material;\r\n\r\n\t\t/**\r\n\t\t * The render target.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t */\r\n\r\n\t\tthis.renderTarget = (renderTarget !== undefined) ? renderTarget : new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tdepthBuffer: false\r\n\t\t});\r\n\r\n\t\tthis.renderTarget.texture.name = \"Save.Target\";\r\n\t\tthis.renderTarget.texture.generateMipmaps = false;\r\n\r\n\t\t/**\r\n\t\t * Indicates whether the render target should be resized when the size of\r\n\t\t * the composer's read/write buffer changes.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t * @default true\r\n\t\t */\r\n\r\n\t\tthis.resize = resize;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Saves the read buffer.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer.\r\n\t */\r\n\r\n\trender(renderer, readBuffer) {\r\n\r\n\t\tthis.material.uniforms.tDiffuse.value = readBuffer.texture;\r\n\r\n\t\trenderer.render(this.scene, this.camera, this.renderTarget);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adjusts the format of the render target.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t */\r\n\r\n\tinitialise(renderer, alpha) {\r\n\r\n\t\tif(!alpha) {\r\n\r\n\t\t\tthis.renderTarget.texture.format = RGBFormat;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this pass with the renderer's size.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tif(this.resize) {\r\n\r\n\t\t\twidth = Math.max(1, width);\r\n\t\t\theight = Math.max(1, height);\r\n\r\n\t\t\tthis.renderTarget.setSize(width, height);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n","import { Pass } from \"./Pass.js\";\r\n\r\n/**\r\n * A shader pass.\r\n *\r\n * Used to render any shader material as a 2D filter.\r\n */\r\n\r\nexport class ShaderPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new shader pass.\r\n\t *\r\n\t * @param {ShaderMaterial} material - The shader material to use.\r\n\t * @param {String} [textureID=\"tDiffuse\"] - The texture uniform identifier.\r\n\t */\r\n\r\n\tconstructor(material, textureID = \"tDiffuse\") {\r\n\r\n\t\tsuper();\r\n\r\n\t\t/**\r\n\t\t * The name of this pass.\r\n\t\t */\r\n\r\n\t\tthis.name = \"ShaderPass\";\r\n\r\n\t\t/**\r\n\t\t * This pass renders to the write buffer.\r\n\t\t */\r\n\r\n\t\tthis.needsSwap = true;\r\n\r\n\t\t/**\r\n\t\t * The shader material to use for rendering.\r\n\t\t *\r\n\t\t * @type {ShaderMaterial}\r\n\t\t */\r\n\r\n\t\tthis.material = material;\r\n\r\n\t\tthis.quad.material = this.material;\r\n\r\n\t\t/**\r\n\t\t * The name of the color sampler uniform of the given material.\r\n\t\t *\r\n\t\t * @type {String}\r\n\t\t * @default \"tDiffuse\"\r\n\t\t */\r\n\r\n\t\tthis.textureID = textureID;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer.\r\n\t * @param {WebGLRenderTarget} writeBuffer - The write buffer.\r\n\t */\r\n\r\n\trender(renderer, readBuffer, writeBuffer) {\r\n\r\n\t\tif(this.material.uniforms[this.textureID] !== undefined) {\r\n\r\n\t\t\tthis.material.uniforms[this.textureID].value = readBuffer.texture;\r\n\r\n\t\t}\r\n\r\n\t\trenderer.render(this.scene, this.camera, this.renderToScreen ? null : writeBuffer);\r\n\r\n\t}\r\n\r\n}\r\n","import { Vector3 } from \"three\";\r\nimport { CopyMaterial, ShockWaveMaterial } from \"../materials\";\r\nimport { Pass } from \"./Pass.js\";\r\n\r\n/**\r\n * Half PI.\r\n *\r\n * @type {Number}\r\n * @private\r\n * @static\r\n * @final\r\n */\r\n\r\nconst HALF_PI = Math.PI * 0.5;\r\n\r\n/**\r\n * A vector.\r\n *\r\n * @type {Vector3}\r\n * @private\r\n * @static\r\n * @final\r\n */\r\n\r\nconst v = new Vector3();\r\n\r\n/**\r\n * A vector.\r\n *\r\n * @type {Vector3}\r\n * @private\r\n * @static\r\n * @final\r\n */\r\n\r\nconst ab = new Vector3();\r\n\r\n/**\r\n * A shock wave pass.\r\n */\r\n\r\nexport class ShockWavePass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new shock wave pass.\r\n\t *\r\n\t * @param {Camera} camera - The main camera.\r\n\t * @param {Vector3} [epicenter] - The world position of the shock wave epicenter.\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {Number} [options.speed=1.0] - The animation speed.\r\n\t * @param {Number} [options.maxRadius=1.0] - The extent of the shock wave.\r\n\t * @param {Number} [options.waveSize=0.2] - The wave size.\r\n\t * @param {Number} [options.amplitude=0.05] - The distortion amplitude.\r\n\t */\r\n\r\n\tconstructor(camera, epicenter = new Vector3(), options = {}) {\r\n\r\n\t\tsuper();\r\n\r\n\t\t/**\r\n\t\t * The name of this pass.\r\n\t\t */\r\n\r\n\t\tthis.name = \"ShockWavePass\";\r\n\r\n\t\t/**\r\n\t\t * This pass renders to the write buffer.\r\n\t\t */\r\n\r\n\t\tthis.needsSwap = true;\r\n\r\n\t\t/**\r\n\t\t * The main camera.\r\n\t\t *\r\n\t\t * @type {Object3D}\r\n\t\t */\r\n\r\n\t\tthis.mainCamera = camera;\r\n\r\n\t\t/**\r\n\t\t * The epicenter.\r\n\t\t *\r\n\t\t * @type {Vector3}\r\n\t\t * @example shockWavePass.epicenter = myMesh.position;\r\n\t\t */\r\n\r\n\t\tthis.epicenter = epicenter;\r\n\r\n\t\t/**\r\n\t\t * The object position in screen space.\r\n\t\t *\r\n\t\t * @type {Vector3}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.screenPosition = new Vector3();\r\n\r\n\t\t/**\r\n\t\t * The speed of the shock wave animation.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @default 2.0\r\n\t\t */\r\n\r\n\t\tthis.speed = (options.speed !== undefined) ? options.speed : 2.0;\r\n\r\n\t\t/**\r\n\t\t * A time accumulator.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.time = 0.0;\r\n\r\n\t\t/**\r\n\t\t * Indicates whether the shock wave animation is active.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.active = false;\r\n\r\n\t\t/**\r\n\t\t * A shock wave shader material.\r\n\t\t *\r\n\t\t * @type {ShockWaveMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.shockWaveMaterial = new ShockWaveMaterial(options);\r\n\r\n\t\tthis.shockWaveMaterial.uniforms.center.value = this.screenPosition;\r\n\r\n\t\t/**\r\n\t\t * A copy shader material.\r\n\t\t *\r\n\t\t * @type {CopyMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.copyMaterial = new CopyMaterial();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Emits the shock wave.\r\n\t */\r\n\r\n\texplode() {\r\n\r\n\t\tthis.time = 0.0;\r\n\t\tthis.active = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer.\r\n\t * @param {WebGLRenderTarget} writeBuffer - The write buffer.\r\n\t * @param {Number} delta - The render delta time.\r\n\t */\r\n\r\n\trender(renderer, readBuffer, writeBuffer, delta) {\r\n\r\n\t\tconst epicenter = this.epicenter;\r\n\t\tconst mainCamera = this.mainCamera;\r\n\t\tconst screenPosition = this.screenPosition;\r\n\r\n\t\tconst shockWaveMaterial = this.shockWaveMaterial;\r\n\t\tconst uniforms = shockWaveMaterial.uniforms;\r\n\t\tconst center = uniforms.center;\r\n\t\tconst radius = uniforms.radius;\r\n\t\tconst maxRadius = uniforms.maxRadius;\r\n\t\tconst waveSize = uniforms.waveSize;\r\n\r\n\t\tthis.copyMaterial.uniforms.tDiffuse.value = readBuffer.texture;\r\n\t\tthis.quad.material = this.copyMaterial;\r\n\r\n\t\tif(this.active) {\r\n\r\n\t\t\t// Calculate direction vectors.\r\n\t\t\tmainCamera.getWorldDirection(v);\r\n\t\t\tab.copy(mainCamera.position).sub(epicenter);\r\n\r\n\t\t\t// Don't render the effect if the object is behind the camera.\r\n\t\t\tif(v.angleTo(ab) > HALF_PI) {\r\n\r\n\t\t\t\t// Scale the effect based on distance to the object.\r\n\t\t\t\tuniforms.cameraDistance.value = mainCamera.position.distanceTo(epicenter);\r\n\r\n\t\t\t\t// Calculate the screen position of the epicenter.\r\n\t\t\t\tscreenPosition.copy(epicenter).project(mainCamera);\r\n\t\t\t\tcenter.value.x = (screenPosition.x + 1.0) * 0.5;\r\n\t\t\t\tcenter.value.y = (screenPosition.y + 1.0) * 0.5;\r\n\r\n\t\t\t\tuniforms.tDiffuse.value = readBuffer.texture;\r\n\t\t\t\tthis.quad.material = shockWaveMaterial;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Update the shock wave radius based on time.\r\n\t\t\tthis.time += delta * this.speed;\r\n\t\t\tradius.value = this.time - waveSize.value;\r\n\r\n\t\t\tif(radius.value >= (maxRadius.value + waveSize.value) * 2) {\r\n\r\n\t\t\t\tthis.active = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\trenderer.render(this.scene, this.camera, this.renderToScreen ? null : writeBuffer);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this pass with the renderer's size.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tthis.shockWaveMaterial.uniforms.aspect.value = width / height;\r\n\r\n\t}\r\n\r\n}\r\n","import {\r\n\tLinearFilter,\r\n\tNearestFilter,\r\n\tRGBAFormat,\r\n\tRGBFormat,\r\n\tTexture,\r\n\tWebGLRenderTarget\r\n} from \"three\";\r\n\r\nimport { SMAABlendMaterial, SMAAColorEdgesMaterial, SMAAWeightsMaterial } from \"../materials\";\r\nimport { Pass } from \"./Pass.js\";\r\n\r\n/**\r\n * Subpixel Morphological Antialiasing (SMAA) v2.8.\r\n *\r\n * Preset: SMAA 1x Medium (with color edge detection).\r\n *  https://github.com/iryoku/smaa/releases/tag/v2.8\r\n */\r\n\r\nexport class SMAAPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new SMAA pass.\r\n\t *\r\n\t * @param {Image} Image - This pass requires an Image class to create internal textures. Provide window.Image in a browser environment.\r\n\t */\r\n\r\n\tconstructor(Image) {\r\n\r\n\t\tsuper();\r\n\r\n\t\t/**\r\n\t\t * The name of this pass.\r\n\t\t */\r\n\r\n\t\tthis.name = \"SMAAPass\";\r\n\r\n\t\t/**\r\n\t\t * This pass renders to the write buffer.\r\n\t\t */\r\n\r\n\t\tthis.needsSwap = true;\r\n\r\n\t\t/**\r\n\t\t * A render target for the color edge detection.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetColorEdges = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tformat: RGBFormat,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tdepthBuffer: false\r\n\t\t});\r\n\r\n\t\tthis.renderTargetColorEdges.texture.name = \"SMAA.ColorEdges\";\r\n\t\tthis.renderTargetColorEdges.texture.generateMipmaps = false;\r\n\r\n\t\t/**\r\n\t\t * A render target for the SMAA weights.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetWeights = this.renderTargetColorEdges.clone();\r\n\r\n\t\tthis.renderTargetWeights.texture.name = \"SMAA.Weights\";\r\n\t\tthis.renderTargetWeights.texture.format = RGBAFormat;\r\n\r\n\t\t/**\r\n\t\t * SMAA color edge detection shader material.\r\n\t\t *\r\n\t\t * @type {SMAAColorEdgesMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.colorEdgesMaterial = new SMAAColorEdgesMaterial();\r\n\r\n\t\t/**\r\n\t\t * SMAA weights shader material.\r\n\t\t *\r\n\t\t * @type {SMAAWeightsMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.weightsMaterial = new SMAAWeightsMaterial();\r\n\r\n\t\tconst areaImage = new Image();\r\n\t\tareaImage.src = this.weightsMaterial.areaImage;\r\n\r\n\t\tconst areaTexture = new Texture();\r\n\t\tareaTexture.image = areaImage;\r\n\t\tareaTexture.name = \"SMAA.Area\";\r\n\t\tareaTexture.minFilter = LinearFilter;\r\n\t\tareaTexture.format = RGBFormat;\r\n\t\tareaTexture.generateMipmaps = false;\r\n\t\tareaTexture.needsUpdate = true;\r\n\t\tareaTexture.flipY = false;\r\n\r\n\t\tconst searchImage = new Image();\r\n\t\tsearchImage.src = this.weightsMaterial.searchImage;\r\n\r\n\t\tconst searchTexture = new Texture();\r\n\t\tsearchTexture.image = searchImage;\r\n\t\tsearchTexture.name = \"SMAA.Search\";\r\n\t\tsearchTexture.magFilter = NearestFilter;\r\n\t\tsearchTexture.minFilter = NearestFilter;\r\n\t\tsearchTexture.generateMipmaps = false;\r\n\t\tsearchTexture.needsUpdate = true;\r\n\t\tsearchTexture.flipY = false;\r\n\r\n\t\tthis.weightsMaterial.uniforms.tDiffuse.value = this.renderTargetColorEdges.texture;\r\n\t\tthis.weightsMaterial.uniforms.tArea.value = areaTexture;\r\n\t\tthis.weightsMaterial.uniforms.tSearch.value = searchTexture;\r\n\r\n\t\t/**\r\n\t\t * SMAA blend shader material.\r\n\t\t *\r\n\t\t * @type {SMAABlendMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.blendMaterial = new SMAABlendMaterial();\r\n\r\n\t\tthis.blendMaterial.uniforms.tWeights.value = this.renderTargetWeights.texture;\r\n\r\n\t\tthis.quad.material = this.blendMaterial;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Antialiases the scene.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer.\r\n\t * @param {WebGLRenderTarget} writeBuffer - The write buffer.\r\n\t */\r\n\r\n\trender(renderer, readBuffer, writeBuffer) {\r\n\r\n\t\t// Detect color edges.\r\n\t\tthis.quad.material = this.colorEdgesMaterial;\r\n\t\tthis.colorEdgesMaterial.uniforms.tDiffuse.value = readBuffer.texture;\r\n\t\trenderer.render(this.scene, this.camera, this.renderTargetColorEdges, true);\r\n\r\n\t\t// Compute edge weights.\r\n\t\tthis.quad.material = this.weightsMaterial;\r\n\t\trenderer.render(this.scene, this.camera, this.renderTargetWeights, false);\r\n\r\n\t\t// Apply the antialiasing filter to the colors.\r\n\t\tthis.quad.material = this.blendMaterial;\r\n\t\tthis.blendMaterial.uniforms.tDiffuse.value = readBuffer.texture;\r\n\r\n\t\trenderer.render(this.scene, this.camera, this.renderToScreen ? null : writeBuffer);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this pass with the renderer's size.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tthis.renderTargetColorEdges.setSize(width, height);\r\n\t\tthis.renderTargetWeights.setSize(width, height);\r\n\r\n\t\tthis.colorEdgesMaterial.uniforms.texelSize.value.copy(\r\n\t\t\tthis.weightsMaterial.uniforms.texelSize.value.copy(\r\n\t\t\t\tthis.blendMaterial.uniforms.texelSize.value.set(\r\n\t\t\t\t\t1.0 / width, 1.0 / height\r\n\t\t)));\r\n\r\n\t}\r\n\r\n}\r\n","import { AdditiveBlending } from \"three\";\r\nimport { CopyMaterial } from \"../materials\";\r\nimport { Pass } from \"./Pass.js\";\r\n\r\n/**\r\n * A pass that renders a given texture.\r\n */\r\n\r\nexport class TexturePass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new texture pass.\r\n\t *\r\n\t * @param {Texture} texture - The texture.\r\n\t * @param {Number} [opacity=1.0] - The texture opacity.\r\n\t */\r\n\r\n\tconstructor(texture, opacity = 1.0) {\r\n\r\n\t\tsuper();\r\n\r\n\t\t/**\r\n\t\t * The name of this pass.\r\n\t\t */\r\n\r\n\t\tthis.name = \"TexturePass\";\r\n\r\n\t\t/**\r\n\t\t * A copy shader material used for rendering to texture.\r\n\t\t *\r\n\t\t * @type {CopyMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.copyMaterial = new CopyMaterial();\r\n\t\tthis.copyMaterial.blending = AdditiveBlending;\r\n\t\tthis.copyMaterial.transparent = true;\r\n\r\n\t\tthis.texture = texture;\r\n\t\tthis.opacity = opacity;\r\n\r\n\t\tthis.quad.material = this.copyMaterial;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The texture.\r\n\t *\r\n\t * @type {Texture}\r\n\t */\r\n\r\n\tget texture() { return this.copyMaterial.uniforms.tDiffuse.value; }\r\n\r\n\t/**\r\n\t * @type {Texture}\r\n\t */\r\n\r\n\tset texture(x) { this.copyMaterial.uniforms.tDiffuse.value = x; }\r\n\r\n\t/**\r\n\t * The opacity.\r\n\t *\r\n\t * @type {Number}\r\n\t * @default 1.0\r\n\t */\r\n\r\n\tget opacity() { return this.copyMaterial.uniforms.opacity.value; }\r\n\r\n\t/**\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset opacity(x = 1.0) { this.copyMaterial.uniforms.opacity.value = x; }\r\n\r\n\t/**\r\n\t * Renders the effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer.\r\n\t */\r\n\r\n\trender(renderer, readBuffer) {\r\n\r\n\t\trenderer.render(this.scene, this.camera, this.renderToScreen ? null : readBuffer);\r\n\r\n\t}\r\n\r\n}\r\n","import {\r\n\tLinearFilter,\r\n\tLinearMipMapLinearFilter,\r\n\tMeshBasicMaterial,\r\n\tRGBFormat,\r\n\tWebGLRenderTarget\r\n} from \"three\";\r\n\r\nimport {\r\n\tAdaptiveLuminosityMaterial,\r\n\tCopyMaterial,\r\n\tLuminosityMaterial,\r\n\tToneMappingMaterial\r\n} from \"../materials\";\r\n\r\nimport { Pass } from \"./Pass.js\";\r\n\r\n/**\r\n * Rounds the given number up to the next power of two.\r\n *\r\n * @private\r\n * @static\r\n * @param {Number} n - A number.\r\n * @return {Number} The next power of two.\r\n */\r\n\r\nfunction ceil2(n) { return Math.pow(2, Math.max(0, Math.ceil(Math.log2(n)))); }\r\n\r\n/**\r\n * A tone mapping pass that supports adaptive luminosity.\r\n *\r\n * If adaptivity is enabled, this pass generates a texture that represents the\r\n * luminosity of the current scene and adjusts it over time to simulate the\r\n * optic nerve responding to the amount of light it is receiving.\r\n *\r\n * Reference:\r\n *  GDC2007 - Wolfgang Engel, Post-Processing Pipeline\r\n *  http://perso.univ-lyon1.fr/jean-claude.iehl/Public/educ/GAMA/2007/gdc07/Post-Processing_Pipeline.pdf\r\n */\r\n\r\nexport class ToneMappingPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new tone mapping pass.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {Boolean} [options.adaptive=true] - Whether the tone mapping should use an adaptive luminance map.\r\n\t * @param {Number} [options.resolution=256] - The render texture resolution.\r\n\t * @param {Number} [options.distinction=1.0] - A luminance distinction factor.\r\n\t */\r\n\r\n\tconstructor(options = {}) {\r\n\r\n\t\tsuper();\r\n\r\n\t\t/**\r\n\t\t * The name of this pass.\r\n\t\t */\r\n\r\n\t\tthis.name = \"ToneMappingPass\";\r\n\r\n\t\t/**\r\n\t\t * This pass renders to the write buffer.\r\n\t\t */\r\n\r\n\t\tthis.needsSwap = true;\r\n\r\n\t\t/**\r\n\t\t * The render target for the current luminosity.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t * @todo Use RED format in WebGL 2.0.\r\n\t\t */\r\n\r\n\t\tthis.renderTargetLuminosity = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: LinearMipMapLinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tformat: RGBFormat,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tdepthBuffer: false\r\n\t\t});\r\n\r\n\t\tthis.renderTargetLuminosity.texture.name = \"ToneMapping.Luminosity\";\r\n\r\n\t\t/**\r\n\t\t * The render target for adapted luminosity.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetAdapted = this.renderTargetLuminosity.clone();\r\n\r\n\t\tthis.renderTargetAdapted.texture.name = \"ToneMapping.AdaptedLuminosity\";\r\n\t\tthis.renderTargetAdapted.texture.generateMipmaps = false;\r\n\t\tthis.renderTargetAdapted.texture.minFilter = LinearFilter;\r\n\r\n\t\t/**\r\n\t\t * A render target that holds a copy of the adapted limonosity.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetPrevious = this.renderTargetAdapted.clone();\r\n\r\n\t\tthis.renderTargetPrevious.texture.name = \"ToneMapping.PreviousLuminosity\";\r\n\r\n\t\t/**\r\n\t\t * Copy shader material used for saving the luminance map.\r\n\t\t *\r\n\t\t * @type {CopyMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.copyMaterial = new CopyMaterial();\r\n\r\n\t\t/**\r\n\t\t * A luminosity shader material.\r\n\t\t *\r\n\t\t * @type {LuminosityMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.luminosityMaterial = new LuminosityMaterial();\r\n\r\n\t\tthis.luminosityMaterial.uniforms.distinction.value = (options.distinction !== undefined) ? options.distinction : 1.0;\r\n\r\n\t\t/**\r\n\t\t * An adaptive luminance shader material.\r\n\t\t *\r\n\t\t * @type {AdaptiveLuminosityMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.adaptiveLuminosityMaterial = new AdaptiveLuminosityMaterial();\r\n\r\n\t\tthis.resolution = options.resolution;\r\n\r\n\t\t/**\r\n\t\t * A tone mapping shader material.\r\n\t\t *\r\n\t\t * @type {ToneMappingMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.toneMappingMaterial = new ToneMappingMaterial();\r\n\r\n\t\tthis.adaptive = options.adaptive;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The resolution of the render targets.\r\n\t *\r\n\t * @type {Number}\r\n\t * @default 256\r\n\t */\r\n\r\n\tget resolution() { return this.renderTargetLuminosity.width; }\r\n\r\n\t/**\r\n\t * The resolution of the render targets. Must be a power of two for mipmaps.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset resolution(x = 256) {\r\n\r\n\t\tx = ceil2(x);\r\n\r\n\t\tthis.renderTargetLuminosity.setSize(x, x);\r\n\t\tthis.renderTargetPrevious.setSize(x, x);\r\n\t\tthis.renderTargetAdapted.setSize(x, x);\r\n\r\n\t\tthis.adaptiveLuminosityMaterial.defines.MIP_LEVEL_1X1 = (Math.round(Math.log(x)) / Math.log(2)).toFixed(1);\r\n\t\tthis.adaptiveLuminosityMaterial.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Whether this pass uses adaptive luminosity.\r\n\t *\r\n\t * @type {Boolean}\r\n\t * @default true\r\n\t */\r\n\r\n\tget adaptive() { return (this.toneMappingMaterial.defines.ADAPTED_LUMINANCE !== undefined); }\r\n\r\n\t/**\r\n\t * Whether this pass should use adaptive luminosity.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset adaptive(x = true) {\r\n\r\n\t\tif(x) {\r\n\r\n\t\t\tthis.toneMappingMaterial.defines.ADAPTED_LUMINANCE = \"1\";\r\n\t\t\tthis.toneMappingMaterial.uniforms.luminanceMap.value = this.renderTargetAdapted.texture;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdelete this.toneMappingMaterial.defines.ADAPTED_LUMINANCE;\r\n\t\t\tthis.toneMappingMaterial.uniforms.luminanceMap.value = null;\r\n\r\n\t\t}\r\n\r\n\t\tthis.toneMappingMaterial.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer.\r\n\t * @param {WebGLRenderTarget} writeBuffer - The write buffer.\r\n\t * @param {Number} delta - The render delta time.\r\n\t */\r\n\r\n\trender(renderer, readBuffer, writeBuffer, delta) {\r\n\r\n\t\tconst quad = this.quad;\r\n\t\tconst scene = this.scene;\r\n\t\tconst camera = this.camera;\r\n\r\n\t\tconst adaptiveLuminosityMaterial = this.adaptiveLuminosityMaterial;\r\n\t\tconst luminosityMaterial = this.luminosityMaterial;\r\n\t\tconst toneMappingMaterial = this.toneMappingMaterial;\r\n\t\tconst copyMaterial = this.copyMaterial;\r\n\r\n\t\tconst renderTargetPrevious = this.renderTargetPrevious;\r\n\t\tconst renderTargetLuminosity = this.renderTargetLuminosity;\r\n\t\tconst renderTargetAdapted = this.renderTargetAdapted;\r\n\r\n\t\tif(this.adaptive) {\r\n\r\n\t\t\t// Render the luminance of the current scene into a render target with mipmapping enabled.\r\n\t\t\tquad.material = luminosityMaterial;\r\n\t\t\tluminosityMaterial.uniforms.tDiffuse.value = readBuffer.texture;\r\n\t\t\trenderer.render(scene, camera, renderTargetLuminosity);\r\n\r\n\t\t\t// Use the new luminance values, the previous luminance and the frame delta to adapt the luminance over time.\r\n\t\t\tquad.material = adaptiveLuminosityMaterial;\r\n\t\t\tadaptiveLuminosityMaterial.uniforms.delta.value = delta;\r\n\t\t\tadaptiveLuminosityMaterial.uniforms.tPreviousLum.value = renderTargetPrevious.texture;\r\n\t\t\tadaptiveLuminosityMaterial.uniforms.tCurrentLum.value = renderTargetLuminosity.texture;\r\n\t\t\trenderer.render(scene, camera, renderTargetAdapted);\r\n\r\n\t\t\t// Copy the new adapted luminance value so that it can be used by the next frame.\r\n\t\t\tquad.material = copyMaterial;\r\n\t\t\tcopyMaterial.uniforms.tDiffuse.value = renderTargetAdapted.texture;\r\n\t\t\trenderer.render(scene, camera, renderTargetPrevious);\r\n\r\n\t\t}\r\n\r\n\t\t// Apply the tone mapping to the colours.\r\n\t\tquad.material = toneMappingMaterial;\r\n\t\ttoneMappingMaterial.uniforms.tDiffuse.value = readBuffer.texture;\r\n\r\n\t\trenderer.render(this.scene, this.camera, this.renderToScreen ? null : writeBuffer);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders something into the previous luminosity texture.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t */\r\n\r\n\tinitialise(renderer) {\r\n\r\n\t\tthis.quad.material = new MeshBasicMaterial({ color: 0x7fffff });\r\n\t\trenderer.render(this.scene, this.camera, this.renderTargetPrevious);\r\n\t\tthis.quad.material.dispose();\r\n\r\n\t}\r\n\r\n}\r\n","/**\r\n * A compilation of the post processing passes.\r\n *\r\n * @module postprocessing/passes\r\n */\r\n\r\nexport { BloomPass } from \"./BloomPass.js\";\r\nexport { BlurPass } from \"./BlurPass.js\";\r\nexport { BokehPass } from \"./BokehPass.js\";\r\nexport { Bokeh2Pass } from \"./Bokeh2Pass.js\";\r\nexport { ClearMaskPass } from \"./ClearMaskPass.js\";\r\nexport { ClearPass } from \"./ClearPass.js\";\r\nexport { DotScreenPass } from \"./DotScreenPass.js\";\r\nexport { DepthPass } from \"./DepthPass.js\";\r\nexport { FilmPass } from \"./FilmPass.js\";\r\nexport { GlitchMode, GlitchPass } from \"./GlitchPass.js\";\r\nexport { GodRaysPass } from \"./GodRaysPass.js\";\r\nexport { MaskPass } from \"./MaskPass.js\";\r\nexport { Pass } from \"./Pass.js\";\r\nexport { PixelationPass } from \"./PixelationPass.js\";\r\nexport { RenderPass } from \"./RenderPass.js\";\r\nexport { SavePass } from \"./SavePass.js\";\r\nexport { ShaderPass } from \"./ShaderPass.js\";\r\nexport { ShockWavePass } from \"./ShockWavePass.js\";\r\nexport { SMAAPass } from \"./SMAAPass.js\";\r\nexport { TexturePass } from \"./TexturePass.js\";\r\nexport { ToneMappingPass } from \"./ToneMappingPass.js\";\r\n","import {\r\n\tDepthStencilFormat,\r\n\tDepthTexture,\r\n\tLinearFilter,\r\n\tRGBAFormat,\r\n\tRGBFormat,\r\n\tUnsignedInt248Type,\r\n\tWebGLRenderTarget\r\n} from \"three\";\r\n\r\nimport { ClearMaskPass, MaskPass, ShaderPass } from \"../passes\";\r\nimport { CopyMaterial } from \"../materials\";\r\n\r\n/**\r\n * The EffectComposer may be used in place of a normal WebGLRenderer.\r\n *\r\n * The auto clear behaviour of the provided renderer will be disabled to prevent\r\n * unnecessary clear operations.\r\n *\r\n * It is common practice to use a {@link RenderPass} as the first pass to\r\n * automatically clear the screen and render the scene to a texture for further\r\n * processing.\r\n */\r\n\r\nexport class EffectComposer {\r\n\r\n\t/**\r\n\t * Constructs a new effect composer.\r\n\t *\r\n\t * @param {WebGLRenderer} [renderer] - The renderer that should be used.\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {Boolean} [options.depthBuffer=true] - Whether the main render targets should have a depth buffer.\r\n\t * @param {Boolean} [options.stencilBuffer=false] - Whether the main render targets should have a stencil buffer.\r\n\t * @param {Boolean} [options.depthTexture=false] - Set to true if one of your passes relies on a depth texture.\r\n\t */\r\n\r\n\tconstructor(renderer = null, options = {}) {\r\n\r\n\t\t/**\r\n\t\t * The renderer.\r\n\t\t *\r\n\t\t * You may replace the renderer at any time by using\r\n\t\t * {@link EffectComposer#replaceRenderer}.\r\n\t\t *\r\n\t\t * @type {WebGLRenderer}\r\n\t\t */\r\n\r\n\t\tthis.renderer = renderer;\r\n\r\n\t\t/**\r\n\t\t * The read buffer.\r\n\t\t *\r\n\t\t * Reading from and writing to the same render target should be avoided.\r\n\t\t * Therefore, two seperate yet identical buffers are used.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.readBuffer = null;\r\n\r\n\t\t/**\r\n\t\t * The write buffer.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.writeBuffer = null;\r\n\r\n\t\tif(this.renderer !== null) {\r\n\r\n\t\t\tthis.renderer.autoClear = false;\r\n\r\n\t\t\tthis.readBuffer = this.createBuffer(\r\n\t\t\t\t(options.depthBuffer !== undefined) ? options.depthBuffer : true,\r\n\t\t\t\t(options.stencilBuffer !== undefined) ? options.stencilBuffer : false,\r\n\t\t\t\t(options.depthTexture !== undefined) ? options.depthTexture : false\r\n\t\t\t);\r\n\r\n\t\t\tthis.writeBuffer = this.readBuffer.clone();\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * A copy pass used for copying masked scenes.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.copyPass = new ShaderPass(new CopyMaterial());\r\n\r\n\t\t/**\r\n\t\t * The passes.\r\n\t\t *\r\n\t\t * @type {Pass[]}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.passes = [];\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The depth texture of the read and write buffers.\r\n\t *\r\n\t * @type {DepthTexture}\r\n\t * @default null\r\n\t */\r\n\r\n\tget depthTexture() { return this.readBuffer.depthTexture; }\r\n\r\n\t/**\r\n\t * The read and write buffers share a single depth texture. Depth will be\r\n\t * written to this texture when something is rendered into one of the buffers\r\n\t * and the involved materials have depth write enabled.\r\n\t *\r\n\t * You may enable this mechanism during the instantiation of the composer or\r\n\t * by assigning a DepthTexture instance later on. You may also disable it by\r\n\t * assigning null.\r\n\t *\r\n\t * @type {DepthTexture}\r\n\t */\r\n\r\n\tset depthTexture(x) {\r\n\r\n\t\tthis.readBuffer.depthTexture = x;\r\n\t\tthis.writeBuffer.depthTexture = x;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Replaces the current renderer with the given one. The DOM element of the\r\n\t * current renderer will automatically be removed from its parent node and the\r\n\t * DOM element of the new renderer will take its place.\r\n\t *\r\n\t * The auto clear mechanism of the provided renderer will be disabled.\r\n\t *\r\n\t * Switching between renderers allows you to dynamically enable or disable\r\n\t * antialiasing.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The new renderer.\r\n\t * @return {WebGLRenderer} The old renderer.\r\n\t */\r\n\r\n\treplaceRenderer(renderer) {\r\n\r\n\t\tconst oldRenderer = this.renderer;\r\n\r\n\t\tlet parent, oldSize, newSize;\r\n\r\n\t\tif(oldRenderer !== null && oldRenderer !== renderer) {\r\n\r\n\t\t\tthis.renderer = renderer;\r\n\t\t\tthis.renderer.autoClear = false;\r\n\r\n\t\t\tparent = oldRenderer.domElement.parentNode;\r\n\t\t\toldSize = oldRenderer.getSize();\r\n\t\t\tnewSize = renderer.getSize();\r\n\r\n\t\t\tif(parent !== null) {\r\n\r\n\t\t\t\tparent.removeChild(oldRenderer.domElement);\r\n\t\t\t\tparent.appendChild(renderer.domElement);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(oldSize.width !== newSize.width || oldSize.height !== newSize.height) {\r\n\r\n\t\t\t\tthis.setSize();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn oldRenderer;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new render target by replicating the renderer's canvas.\r\n\t *\r\n\t * The created render target uses a linear filter for texel minification and\r\n\t * magnification. Its render texture format depends on whether the renderer\r\n\t * uses the alpha channel. Mipmaps are disabled.\r\n\t *\r\n\t * @param {Boolean} depthBuffer - Whether the render target should have a depth buffer.\r\n\t * @param {Boolean} stencilBuffer - Whether the render target should have a stencil buffer.\r\n\t * @param {Boolean} depthTexture - Whether the render target should have a depth texture.\r\n\t * @return {WebGLRenderTarget} A new render target that equals the renderer's canvas.\r\n\t */\r\n\r\n\tcreateBuffer(depthBuffer, stencilBuffer, depthTexture) {\r\n\r\n\t\tconst size = this.renderer.getSize();\r\n\t\tconst pixelRatio = this.renderer.getPixelRatio();\r\n\t\tconst alpha = this.renderer.context.getContextAttributes().alpha;\r\n\r\n\t\tconst renderTarget = new WebGLRenderTarget(size.width * pixelRatio, size.height * pixelRatio, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tformat: alpha ? RGBAFormat : RGBFormat,\r\n\t\t\tdepthBuffer: depthBuffer,\r\n\t\t\tstencilBuffer: stencilBuffer,\r\n\t\t\tdepthTexture: depthTexture ? new DepthTexture() : null\r\n\t\t});\r\n\r\n\t\tif(depthTexture && stencilBuffer) {\r\n\r\n\t\t\trenderTarget.depthTexture.format = DepthStencilFormat;\r\n\t\t\trenderTarget.depthTexture.type = UnsignedInt248Type;\r\n\r\n\t\t}\r\n\r\n\t\trenderTarget.texture.name = \"EffectComposer.Buffer\";\r\n\t\trenderTarget.texture.generateMipmaps = false;\r\n\r\n\t\treturn renderTarget;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a pass, optionally at a specific index.\r\n\t *\r\n\t * @param {Pass} pass - A new pass.\r\n\t * @param {Number} [index] - An index at which the pass should be inserted.\r\n\t */\r\n\r\n\taddPass(pass, index) {\r\n\r\n\t\tconst renderer = this.renderer;\r\n\t\tconst size = renderer.getSize();\r\n\t\tconst pixelRatio = renderer.getPixelRatio();\r\n\r\n\t\tpass.setSize(size.width * pixelRatio, size.height * pixelRatio);\r\n\t\tpass.initialise(renderer, renderer.context.getContextAttributes().alpha);\r\n\r\n\t\tif(index !== undefined) {\r\n\r\n\t\t\tthis.passes.splice(index, 0, pass);\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.passes.push(pass);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Removes a pass.\r\n\t *\r\n\t * @param {Pass} pass - The pass.\r\n\t */\r\n\r\n\tremovePass(pass) {\r\n\r\n\t\tthis.passes.splice(this.passes.indexOf(pass), 1);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders all enabled passes in the order in which they were added.\r\n\t *\r\n\t * @param {Number} delta - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\trender(delta) {\r\n\r\n\t\tconst passes = this.passes;\r\n\t\tconst renderer = this.renderer;\r\n\t\tconst copyPass = this.copyPass;\r\n\r\n\t\tlet readBuffer = this.readBuffer;\r\n\t\tlet writeBuffer = this.writeBuffer;\r\n\r\n\t\tlet maskActive = false;\r\n\t\tlet pass, context, buffer;\r\n\t\tlet i, l;\r\n\r\n\t\tfor(i = 0, l = passes.length; i < l; ++i) {\r\n\r\n\t\t\tpass = passes[i];\r\n\r\n\t\t\tif(pass.enabled) {\r\n\r\n\t\t\t\tpass.render(renderer, readBuffer, writeBuffer, delta, maskActive);\r\n\r\n\t\t\t\tif(pass.needsSwap) {\r\n\r\n\t\t\t\t\tif(maskActive) {\r\n\r\n\t\t\t\t\t\tcontext = renderer.context;\r\n\t\t\t\t\t\tcontext.stencilFunc(context.NOTEQUAL, 1, 0xffffffff);\r\n\t\t\t\t\t\tcopyPass.render(renderer, readBuffer, writeBuffer);\r\n\t\t\t\t\t\tcontext.stencilFunc(context.EQUAL, 1, 0xffffffff);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbuffer = readBuffer;\r\n\t\t\t\t\treadBuffer = writeBuffer;\r\n\t\t\t\t\twriteBuffer = buffer;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(pass instanceof MaskPass) {\r\n\r\n\t\t\t\t\tmaskActive = true;\r\n\r\n\t\t\t\t} else if(pass instanceof ClearMaskPass) {\r\n\r\n\t\t\t\t\tmaskActive = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the size of the buffers and the renderer's output canvas.\r\n\t *\r\n\t * Every pass will be informed of the new size. It's up to each pass how that\r\n\t * information is used.\r\n\t *\r\n\t * If no width or height is specified, the render targets and passes will be\r\n\t * updated with the current size of the renderer.\r\n\t *\r\n\t * @param {Number} [width] - The width.\r\n\t * @param {Number} [height] - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tconst passes = this.passes;\r\n\t\tconst size = this.renderer.getSize();\r\n\t\tconst pixelRatio = this.renderer.getPixelRatio();\r\n\r\n\t\tlet i, l;\r\n\r\n\t\tif(width === undefined || height === undefined) {\r\n\r\n\t\t\twidth = size.width;\r\n\t\t\theight = size.height;\r\n\r\n\t\t}\r\n\r\n\t\tthis.renderer.setSize(width, height);\r\n\r\n\t\twidth *= pixelRatio;\r\n\t\theight *= pixelRatio;\r\n\r\n\t\tthis.readBuffer.setSize(width, height);\r\n\t\tthis.writeBuffer.setSize(width, height);\r\n\r\n\t\tfor(i = 0, l = passes.length; i < l; ++i) {\r\n\r\n\t\t\tpasses[i].setSize(width, height);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Resets this composer by deleting all passes and creating new buffers.\r\n\t *\r\n\t * @param {WebGLRenderTarget} [renderTarget] - A new render target. If none is provided, the settings of the renderer will be used.\r\n\t */\r\n\r\n\treset(renderTarget) {\r\n\r\n\t\tconst depthBuffer = this.readBuffer.depthBuffer;\r\n\t\tconst stencilBuffer = this.readBuffer.stencilBuffer;\r\n\t\tconst depthTexture = (this.readBuffer.depthTexture !== null);\r\n\r\n\t\tthis.dispose((renderTarget === undefined) ?\r\n\t\t\tthis.createBuffer(depthBuffer, stencilBuffer, depthTexture) :\r\n\t\t\trenderTarget\r\n\t\t);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Destroys all passes and render targets.\r\n\t *\r\n\t * This method deallocates all render targets, textures and materials created\r\n\t * by the passes. It also deletes this composer's frame buffers.\r\n\t *\r\n\t * @param {WebGLRenderTarget} [renderTarget] - A new render target. If none is provided, the composer will become inoperative.\r\n\t */\r\n\r\n\tdispose(renderTarget) {\r\n\r\n\t\tconst passes = this.passes;\r\n\r\n\t\tif(this.readBuffer !== null && this.writeBuffer !== null) {\r\n\r\n\t\t\tthis.readBuffer.dispose();\r\n\t\t\tthis.writeBuffer.dispose();\r\n\r\n\t\t\tthis.readBuffer = null;\r\n\t\t\tthis.writeBuffer = null;\r\n\r\n\t\t}\r\n\r\n\t\twhile(passes.length > 0) {\r\n\r\n\t\t\tpasses.pop().dispose();\r\n\r\n\t\t}\r\n\r\n\t\tif(renderTarget !== undefined) {\r\n\r\n\t\t\t// Reanimate.\r\n\t\t\tthis.readBuffer = renderTarget;\r\n\t\t\tthis.writeBuffer = this.readBuffer.clone();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.copyPass.dispose();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n","import {EffectComposer} from 'postprocessing/src/core/EffectComposer';\nimport {RenderPass} from 'postprocessing/src/passes/RenderPass';\nimport {ShaderPass} from 'postprocessing/src/passes/ShaderPass';\n\nimport {Loop} from '../../core/Loop';\n\nconst polyfill = (object, method, showWarn = true) => {\n  if (object[method]) return;\n  if (showWarn) console.warn(`@PostProcessorModule: pass.${method}() was not found.`, object);\n  object[method] = () => {};\n};\n\n/**\n * @class PostProcessorModule\n * @category modules/app\n * @param {Object} [params]\n * @memberof module:modules/app\n * @example <caption> Creating a rendering module and passing it to App's modules</caption>\n * new App([\n *   new ElementModule(),\n *   new SceneModule(),\n *   new DefineModule('camera', new WHS.PerspectiveCamera({\n *     position: new THREE.Vector3(0, 6, 18),\n *     far: 10000\n *   })),\n *   new RenderingModule(),\n *   new PostProcessorModule()\n * ]);\n *\n * const processor = app.use('postprocessor');\n *\n * processor\n *   .render()\n *   .pass(new GlitchPass())\n *   .renderToScreen()\n */\nexport class PostProcessorModule {\n  currentPass = null;\n\n  defer = new Promise(resolve => {\n    this.resolve = resolve;\n  });\n\n  static defaults = {\n    debug: true\n  };\n\n  constructor(params = PostProcessorModule.defaults) {\n    this.debug = params.debug;\n    this.params = params;\n  }\n\n  manager(manager) {\n    manager.define('postprocessor');\n\n    this.effects = manager.use('rendering').effects;\n    this.renderer = manager.get('renderer');\n    this.scene = manager.get('scene');\n    this.camera = manager.get('camera');\n\n    this.composer = new EffectComposer(this.renderer, this.params);\n\n    manager.use('rendering').stop();\n\n    const composer = this.composer;\n    this.renderLoop = new Loop(clock => composer.render(clock.getDelta())).start(manager.handler);\n\n    manager.update({\n      renderer: renderer => {\n        this.composer.replaceRenderer(renderer);\n      },\n\n      scene: scene => {\n        this.scene = scene;\n      },\n\n      camera: camera => {\n        this.camera = camera;\n      }\n    });\n\n    this.resolve();\n  }\n\n  /**\n   * @method render\n   * @description Adds RenderPass\n   * @return {this}\n   * @memberof module:modules/app.PostProcessorModule\n   */\n  render() {\n    this.defer.then(() => {\n      const pass = new RenderPass(this.scene, this.camera.native);\n\n      // TODO: Support for effects.\n\n      this.composer.addPass(pass);\n      this.currentPass = pass;\n    });\n\n    return this;\n  }\n\n  /**\n   * @method pass\n   * @description Adds your custom pass\n   * @param {Pass} pass A custom pass\n   * @return {this}\n   * @memberof module:modules/app.PostProcessorModule\n   */\n  pass(pass) {\n    this.defer.then(() => {\n      polyfill(pass, 'setSize', this.debug);\n      polyfill(pass, 'initialise', this.debug);\n\n      this.composer.addPass(pass);\n      this.currentPass = pass;\n    });\n\n    return this;\n  }\n\n  /**\n   * @method shader\n   * @description Adds a pass made from shader material\n   * @param {Material} material A ShaderMaterial\n   * @param {String} textureID Name of the readBuffer uniform\n   * @return {this}\n   * @memberof module:modules/app.PostProcessorModule\n   */\n  shader(material, textureID = 'readBuffer') {\n    this.defer.then(() => {\n      if (!material.uniforms[textureID])\n        material.uniforms[textureID] = {value: null};\n\n      const pass = new ShaderPass(material, textureID);\n\n      this.composer.addPass(pass);\n      this.currentPass = pass;\n    });\n\n    return this;\n  }\n\n  /**\n   * @method get\n   * @description Returns a pass by the given name\n   * @param {String} name The name of the pass\n   * @return {this}\n   * @memberof module:modules/app.PostProcessorModule\n   */\n  get(name) {\n    return name\n      ? this.composer.passes.filter(pass => pass.name === name)[0]\n      : this.currentPass;\n  }\n\n  /**\n   * @method renderToScreen\n   * @description Sets the renderToScreen property of currentPass\n   * @param {String} [name=true] The name of the pass\n   * @return {this}\n   * @memberof module:modules/app.PostProcessorModule\n   */\n  renderToScreen(bool = true) {\n    this.defer.then(() => {\n      this.currentPass.renderToScreen = bool;\n    });\n\n    return this;\n  }\n}\n","/**\n * @class EventsPatchModule\n * @description This one is used in the core to handle events used by modules. If you want to make custom events - please make a similar one.\n * @category modules/app\n * @memberof module:modules/app\n */\nexport class EventsPatchModule {\n  manager(manager) {\n    manager.define('events');\n    this.element = manager.get('renderer').domElement;\n  }\n\n  /**\n   * @function patchEvents\n   * @description This methods patches the list of events on specific object.\n   * @param {Number} originObject - The object that gives events.\n   * @param {Number} [destObject=this] - The object that takes events.\n   * @param {Array[Strings]} [events=[]] - The list of events by names.\n   * @memberof module:modules/app.EventsPatchModule\n   */\n  patchEvents(originObject, destObject = this, events = []) {\n    events.forEach(event =>\n      originObject.addEventListener(event, e => destObject.emit(event, e))\n    );\n  }\n\n  integrate(self) {\n    const {element, patchEvents} = self;\n\n    patchEvents(element, this, [\n      'mousemove',\n      'mouseup',\n      'contextmenu',\n      'mousedown',\n      'click',\n      'wheel',\n      'touchstart',\n      'touchend',\n      'touchmove',\n      'keydown',\n      'keyup',\n      'keypress'\n    ]);\n  }\n}\n","import {\n  Vector2,\n  Raycaster,\n  Plane,\n  Vector3\n} from 'three';\n\nimport Events from 'minivents';\nimport {EventsPatchModule} from './EventsPatchModule';\n\n/**\n * @class VirtualMouseModule\n * @category modules/app\n * @param {Boolean} [globalMovement=false]\n * @memberof module:modules/app\n * @extends Events\n */\nexport class VirtualMouseModule extends Events {\n  mouse = new Vector2();\n  raycaster = new Raycaster();\n  world = null;\n  canvas = null;\n  projectionPlane = new Plane(new Vector3(0, 0, 1), 0);\n\n  constructor(globalMovement = false) {\n    super();\n    this.globalMovement = globalMovement;\n  }\n\n  update(e, customX, customY) {\n    const rect = this.canvas.getBoundingClientRect();\n\n    const x = customX || e.clientX;\n    const y = customY || e.clientY;\n\n    this.mouse.x = ((x - rect.left) / (rect.right - rect.left)) * 2 - 1;\n    this.mouse.y = -((y - rect.top) / (rect.bottom - rect.top)) * 2 + 1;\n\n    this.projectionPlane.normal.copy(this.camera.getWorldDirection());\n\n    this.raycaster.setFromCamera(this.mouse, this.camera);\n    this.emit('move');\n  }\n\n  manager(manager) {\n    manager.define('mouse');\n    manager.require('events', () => new EventsPatchModule());\n\n    this.canvas = manager.get('renderer').domElement;\n    this.camera = manager.get('camera').native;\n  }\n\n  integrate(self) {\n    [\n      'click',\n      'mousedown',\n      'mouseup',\n      'mousemove'\n    ].forEach(ev => this.on(ev, e => self.emit(ev, e)));\n\n    self.globalX = 0;\n    self.globalY = 0;\n\n    this.on('mousemove', e => {\n      if (document.pointerLockElement !== null) {\n        self.globalX += e.movementX;\n        self.globalY += e.movementY;\n\n        self.update(e, self.globalX, self.globalY);\n      } else self.update(e);\n    });\n  }\n\n  /**\n   * @method track\n   * @description Starts tracking events on a component\n   * @param {Component} component A component, that should be tracked by the mouse\n   * @param {Boolean} nested Whether component's children should be tracked or not\n   * @memberof module:modules/app.VirtualMouseModule\n   */\n  track(component, nested = true) {\n    let isHovered = false;\n\n    this.on('move', () => {\n      if (this.hovers(component, nested)) {\n        if (isHovered) component.emit('mousemove');\n        else {\n          component.emit('mouseover');\n          isHovered = true;\n        }\n      } else if (isHovered) {\n        component.emit('mouseout');\n        isHovered = false;\n      }\n    });\n\n    this.on('click', () => {\n      if (isHovered) component.emit('click');\n      else component.emit('offClick');\n    });\n\n    this.on('mousedown', () => {\n      if (isHovered) component.emit('mousedown');\n    });\n\n    this.on('mouseup', () => {\n      if (isHovered) component.emit('mouseup');\n    });\n  }\n\n  /**\n   * @method intersection\n   * @description Returns an intersection data\n   * @param {Component} component A component that intersects with mouse ray (or doesn't)\n   * @param {Boolean} nested Whether component's children should be tracked or not\n   * @return {Array} intersection data.\n   * @memberof module:modules/app.VirtualMouseModule\n   */\n  intersection({native}, nested = true) {\n    if (native.children.length > 0 && nested) {\n      const objects = [];\n      native.traverse(child => objects.push(child));\n\n      return this.raycaster.intersectObjects(objects);\n    }\n\n    return this.raycaster.intersectObject(native);\n  }\n\n  /**\n   * @method project\n   * @description Returns a vector based on mouse ray intersection with plane\n   * @param {THREE.Plane} [plane=this.projectionPlane] Math plane that is used\n   * @param {Vector3} [target] Optional target\n   * @return {Vector3} An intersection point.\n   * @memberof module:modules/app.VirtualMouseModule\n   */\n  project(plane = this.projectionPlane, target) {\n    return this.raycaster.ray.intersectPlane(plane, target);\n  }\n\n  /**\n   * @method hovers\n   * @description Returns a boolean based on intersection data (Whether mouse hovers the component)\n   * @param {Component} component A component that intersects with mouse ray (or doesn't)\n   * @param {Boolean} nested Whether component's children should be tracked or not\n   * @return {Boolean} Whether the component is hovered.\n   * @memberof module:modules/app.VirtualMouseModule\n   */\n  hovers(component, nested = true) {\n    return this.intersection(component, nested).length > 0;\n  }\n\n  /**\n   * Mouse ray\n   * @member {THREE.Ray} module:modules/app.VirtualMouseModule#ray\n   * @public\n   */\n  get ray() {\n    return this.raycaster.ray;\n  }\n\n  /**\n   * Mouse x [-1; 1]\n   * @member {Number} module:modules/app.VirtualMouseModule#x\n   * @public\n   */\n  get x() {\n    return this.mouse.x;\n  }\n\n  /**\n   * Mouse y [-1; 1]\n   * @member {Number} module:modules/app.VirtualMouseModule#y\n   * @public\n   */\n  get y() {\n    return this.mouse.y;\n  }\n}\n","import {Loop} from '../../core/Loop';\nimport {EventsPatchModule} from './EventsPatchModule';\n\n/**\n * @class ControlsModule\n * @category modules/app\n * @param {Object} [params]\n * @memberof module:modules/app\n * @example <caption> Creating a rendering module and passing it to App's modules</caption>\n * new App([\n *   new ElementModule(),\n *   new SceneModule(),\n *   new DefineModule('camera', new WHS.PerspectiveCamera({\n *     position: new THREE.Vector3(0, 6, 18),\n *     far: 10000\n *   })),\n *   new RenderingModule(),\n *   new ControlsModule.from(new THREE.TrackballControls())\n * ]);\n */\nexport class ControlsModule {\n  static from(controls) {\n    return new ControlsModule({controls});\n  }\n\n  constructor(params = {}) {\n    this.params = Object.assign({\n      controls: false,\n      fix: controls => controls,\n\n      update(c) {\n        this.controls.update(c.getDelta());\n      }\n    }, params);\n\n    this.controls = this.params.controls;\n    this.update = this.params.update;\n  }\n\n  manager(manager) {\n    manager.define('controls');\n    manager.require('events', () => new EventsPatchModule());\n  }\n\n  /**\n   * @method setControls\n   * @description Set working controls\n   * @param {Object} controls Working three.js controls object.\n   * @return {this}\n   * @memberof module:modules/app.ControlsModule\n   */\n  setControls(controls) {\n    this.controls = controls;\n    return this;\n  }\n\n  /**\n   * @method setUpdate\n   * @description Set controls update function\n   * @param {Function} update Update function\n   * @return {this}\n   * @memberof module:modules/app.ControlsModule\n   */\n  setUpdate(update) {\n    this.update = update;\n    return this;\n  }\n\n  integrate(self) {\n    self.updateLoop = new Loop(self.update.bind(self));\n    self.updateLoop.start(this);\n  }\n}\n","import {\n  FogExp2,\n  Fog\n} from 'three';\n\n/**\n * @class FogModule\n * @category modules/app\n * @param {Object} [params={color: 0xefd1b5, density: 0.020, near: 10, far: 1000}] - The parameters object.\n * @param {String} [type=exp2] - The type of fog - exp2 or linear\n * @memberof module:modules/app\n * @example <caption>How to create and apply a FogModule</caption>\n * const fogModule = new FogModule({\n *    color: 0xffffff,\n *    density: 0.03,\n *    near: 20,\n *    far: 200\n *  }, 'exp2');\n *\n * new App([\n *  ...,\n *  fogModule\n * ]);\n */\nexport class FogModule {\n  constructor(params = {}, type) {\n    this.params = Object.assign({\n      color: 0xefd1b5,\n      density: 0.020,\n      near: 10,\n      far: 1000\n    }, params);\n    if (!type || type === 'exp2') this.fog = new FogExp2(this.params.color, this.params.density);\n    else if (type === 'linear') this.fog = new Fog(this.params.color, this.params.near, this.params.far);\n  }\n\n  manager(manager) {\n    manager.set('fog', this.fog);\n    manager.get('scene').fog = this.fog;\n  }\n}\n","import {createStore} from 'redux';\n\nconst isEqualDefault = (a, b) => {\n  if (a === b) return true;\n  else if (a && a.equals && a.equals(b)) return true;\n\n  return false;\n};\n\n/**\n * @class StateModule\n * @description `StateModule` is useful for apps, where you need state manipulation.\n * This can be: _transitions between screens, games, development moments_.\n * You can check [basic/state](https://whs-dev.surge.sh/examples/?basic/state) example.\n * @category modules/app\n * @param {Object} [params]\n * @memberof module:modules/app\n * @example <caption> Creating a state module</caption>\n * new App([\n *   // ...\n *   new StateModule().default({\n *     sphereColor: 0xff0000\n *   })\n * ]);\n */\nexport class StateModule {\n  static actionGenerate(isEqual) {\n    return (state = [{}, ''], {key, data}) => {\n      if (isEqual(state[0][key], data)) return state;\n\n      state[0][key] = data;\n      state[1] = key;\n\n      return state;\n    };\n  }\n\n  constructor(equalCheck = isEqualDefault) {\n    this.store = createStore(\n      StateModule.actionGenerate(equalCheck)\n    );\n\n    this.configuration = {};\n    this.currentConfig = 'default';\n    this.prevConfig = 'default';\n  }\n\n  /**\n   * @method default\n   * @description Add default configuration.\n   * @param {Object} data Configuration setup\n   * @memberof module:modules/app.StateModule\n   * @example\n   * new WHS.StateModule().default({\n   *   sphereColor: UTILS.$colors.mesh,\n   *   planeColor: 0x447F8B\n   * })\n   */\n  default(data) {\n    this.config({default: data});\n    return this;\n  }\n\n  /**\n   * @method setEqualCheck\n   * @description Sets an equalCheck function\n   * @param {Function} func function to generate equal check\n   * @memberof module:modules/app.StateModule\n   */\n  setEqualCheck(func) {\n    this.store.replaceReducer(\n      StateModule.actionGenerate(func)\n    );\n  }\n\n  manager(manager) {\n    manager.define('state');\n  }\n\n  /**\n   * @method config\n   * @description Load configurations from object.\n   * @param {Object} configs Configuration data\n   * @memberof module:modules/app.StateModule\n   * @example <caption> Adding `green` configuration</caption>\n   * state.config({\n   *   green: {\n   *     sphereColor: 0x00ff00,\n   *     planeColor: 0x00ff00\n   *   }\n   * });\n   */\n  config(configs) {\n    for (const key in configs) {\n      if (key) {\n        this.configuration[key] = key === 'default'\n          ? configs[key]\n          : Object.assign({}, this.configuration.default, configs[key]);\n      }\n    }\n  }\n\n  /**\n   * @method update\n   * @description Load updates from object.\n   * @param {Object} updates Updates data\n   * @memberof module:modules/app.StateModule\n   * @example <caption> Update callback for `sphereColor`</caption>\n   * state.update({\n   *   sphereColor: color => sphere.material.color.setHex(color)\n   * });\n   */\n  update(updates = {}) {\n    this.store.subscribe(() => {\n      const [data, changedKey] = this.store.getState();\n      const callback = updates[changedKey];\n\n      if (callback) callback(data[changedKey]);\n    });\n  }\n\n  /**\n   * @method to\n   * @description Switch to configuration.\n   * @param {String} configName Configuration name.\n   * @memberof module:modules/app.StateModule\n   * @example <caption> Changes configuration to `green`</caption>\n   * state.to('green');\n   */\n  to(configName) {\n    this.prevConfig = this.currentConfig;\n    this.currentConfig = configName;\n\n    const config = this.configuration[configName]\n      ? this.configuration[configName]\n      : this.configuration.default;\n\n    this.set(config);\n  }\n\n  /**\n   * @method set\n   * @description Set current parameters.\n   * @param {Object} data Configuration parameters.\n   * @memberof module:modules/app.StateModule\n   * @example\n   * state.set({\n   *   sphereColor: 0x00ff00\n   * });\n   */\n  set(data) {\n    for (const key in data)\n      if (key) this.store.dispatch({type: 'ADD', key, data: data[key]});\n  }\n\n  /**\n   * @method get\n   * @description Return data of parameter.\n   * @param {String} key Parameter name.\n   * @memberof module:modules/app.StateModule\n   * @example\n   * state.get('sphereColor'); // 0x00ff00\n   */\n  get(key) {\n    return this.store.getState()[0][key];\n  }\n\n  /**\n   * @method prev\n   * @description Return `trueVal` if `config` match previous configuration, in other case - return `falseVal`.\n   * @param {String} config Configuration name.\n   * @param {Any} trueVal Value returned if condition is truthy.\n   * @param {Any} falseVal Value returned if condition is falsy.\n   * @memberof module:modules/app.StateModule\n   */\n  prev(config, trueVal, falseVal) {\n    return this.prevConfig === config ? trueVal : falseVal;\n  }\n\n  /**\n   * @method current\n   * @description Return `trueVal` if `config` match current configuration, in other case - return `falseVal`.\n   * @param {String} config Configuration name.\n   * @param {Any} trueVal Value returned if condition is truthy.\n   * @param {Any} falseVal Value returned if condition is falsy.\n   * @memberof module:modules/app.StateModule\n   */\n  current(config, trueVal, falseVal) {\n    return this.currentConfig === config ? trueVal : falseVal;\n  }\n}\n","import {\n  MOUSE,\n  Quaternion,\n  Spherical,\n  Vector2,\n  PerspectiveCamera,\n  OrthographicCamera,\n  EventDispatcher,\n  Vector3\n} from 'three';\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one finger move\n//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n//    Pan - right mouse, or arrow keys / touch: three finter swipe\n\nexport class ThreeOrbitControls extends EventDispatcher {\n  constructor(object, domElement, eventHandler) {\n    super();\n\n    this.object = object;\n\n    this.domElement = (domElement === undefined) ? document : domElement;\n    this.eventHandler = eventHandler;\n\n    // Set to false to disable this control\n    this.enabled = true;\n\n    // \"target\" sets the location of focus, where the object orbits around\n    this.target = new Vector3();\n\n    // How far you can dolly in and out ( PerspectiveCamera only )\n    this.minDistance = 0;\n    this.maxDistance = Infinity;\n\n    // How far you can zoom in and out ( OrthographicCamera only )\n    this.minZoom = 0;\n    this.maxZoom = Infinity;\n\n    // How far you can orbit vertically, upper and lower limits.\n    // Range is 0 to Math.PI radians.\n    this.minPolarAngle = 0; // radians\n    this.maxPolarAngle = Math.PI; // radians\n\n    // How far you can orbit horizontally, upper and lower limits.\n    // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n    this.minAzimuthAngle = -Infinity; // radians\n    this.maxAzimuthAngle = Infinity; // radians\n\n    // Set to true to enable damping (inertia)\n    // If damping is enabled, you must call controls.update() in your animation loop\n    this.enableDamping = false;\n    this.dampingFactor = 0.25;\n\n    // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n    // Set to false to disable zooming\n    this.enableZoom = true;\n    this.zoomSpeed = 1.0;\n\n    // Set to false to disable rotating\n    this.enableRotate = true;\n    this.rotateSpeed = 1.0;\n\n    // Set to false to disable panning\n    this.enablePan = true;\n    this.keyPanSpeed = 7.0; // pixels moved per arrow key push\n\n    // Set to true to automatically rotate around the target\n    // If auto-rotate is enabled, you must call controls.update() in your animation loop\n    this.autoRotate = false;\n    this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n    // Set to false to disable use of the keys\n    this.enableKeys = true;\n\n    // The four arrow keys\n    this.keys = {LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40};\n\n    // Mouse buttons\n    this.mouseButtons = {ORBIT: MOUSE.LEFT, ZOOM: MOUSE.MIDDLE, PAN: MOUSE.RIGHT};\n\n    // for reset\n    this.target0 = this.target.clone();\n    this.position0 = this.object.position.clone();\n    this.zoom0 = this.object.zoom;\n\n    //\n    // public methods\n    //\n\n    this.getPolarAngle = () => {\n      return spherical.phi;\n    };\n\n    this.getAzimuthalAngle = () => {\n      return spherical.theta;\n    };\n\n    this.reset = () => {\n      this.target.copy(this.target0);\n      this.object.position.copy(this.position0);\n      this.object.zoom = this.zoom0;\n\n      this.object.updateProjectionMatrix();\n      this.dispatchEvent(changeEvent);\n\n      this.update();\n\n      state = STATE.NONE;\n    };\n\n    // this method is exposed, but perhaps it would be better if we can make it private...\n    this.update = () => {\n      const offset = new Vector3();\n\n      // so camera.up is the orbit axis\n      const quat = new Quaternion().setFromUnitVectors(object.up, new Vector3(0, 1, 0));\n      const quatInverse = quat.clone().inverse();\n\n      const lastPosition = new Vector3();\n      const lastQuaternion = new Quaternion();\n\n      return (() => {\n        const position = this.object.position;\n\n        offset.copy(position).sub(this.target);\n\n        // rotate offset to \"y-axis-is-up\" space\n        offset.applyQuaternion(quat);\n\n        // angle from z-axis around y-axis\n        spherical.setFromVector3(offset);\n\n        if (this.autoRotate && state === STATE.NONE)\n          rotateLeft(getAutoRotationAngle());\n\n        spherical.theta += sphericalDelta.theta;\n        spherical.phi += sphericalDelta.phi;\n\n        // restrict theta to be between desired limits\n        spherical.theta = Math.max(this.minAzimuthAngle, Math.min(this.maxAzimuthAngle, spherical.theta));\n\n        // restrict phi to be between desired limits\n        spherical.phi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, spherical.phi));\n\n        spherical.makeSafe();\n\n        spherical.radius *= scale;\n\n        // restrict radius to be between desired limits\n        spherical.radius = Math.max(this.minDistance, Math.min(this.maxDistance, spherical.radius));\n\n        // move target to panned location\n        this.target.add(panOffset);\n\n        offset.setFromSpherical(spherical);\n\n        // rotate offset back to \"camera-up-vector-is-up\" space\n        offset.applyQuaternion(quatInverse);\n\n        position.copy(this.target).add(offset);\n\n        this.object.lookAt(this.target);\n\n        if (this.enableDamping === true) {\n          sphericalDelta.theta *= (1 - this.dampingFactor);\n          sphericalDelta.phi *= (1 - this.dampingFactor);\n        } else\n          sphericalDelta.set(0, 0, 0);\n\n        scale = 1;\n        panOffset.set(0, 0, 0);\n\n        // update condition is:\n        // min(camera displacement, camera rotation in radians)^2 > EPS\n        // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n        if (zoomChanged\n          || lastPosition.distanceToSquared(this.object.position) > EPS\n          || 8 * (1 - lastQuaternion.dot(this.object.quaternion)) > EPS) {\n          this.dispatchEvent(changeEvent);\n\n          lastPosition.copy(this.object.position);\n          lastQuaternion.copy(this.object.quaternion);\n          zoomChanged = false;\n\n          return true;\n        }\n\n        return false;\n      })();\n    };\n\n    this.dispose = () => {\n      this.domElement.removeEventListener('contextmenu', onContextMenu, false);\n      this.domElement.removeEventListener('mousedown', onMouseDown, false);\n      this.domElement.removeEventListener('wheel', onMouseWheel, false);\n\n      this.domElement.removeEventListener('touchstart', onTouchStart, false);\n      this.domElement.removeEventListener('touchend', onTouchEnd, false);\n      this.domElement.removeEventListener('touchmove', onTouchMove, false);\n\n      document.removeEventListener('mousemove', onMouseMove, false);\n      document.removeEventListener('mouseup', onMouseUp, false);\n\n      window.removeEventListener('keydown', onKeyDown, false);\n\n      // this.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n    };\n\n    //\n    // internals\n    //\n\n    const changeEvent = {type: 'change'};\n    const startEvent = {type: 'start'};\n    const endEvent = {type: 'end'};\n\n    const STATE = {NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5};\n\n    let state = STATE.NONE;\n\n    const EPS = 0.000001;\n\n    // current position in spherical coordinates\n    const spherical = new Spherical();\n    const sphericalDelta = new Spherical();\n\n    let scale = 1;\n    const panOffset = new Vector3();\n    let zoomChanged = false;\n\n    const rotateStart = new Vector2();\n    const rotateEnd = new Vector2();\n    const rotateDelta = new Vector2();\n\n    const panStart = new Vector2();\n    const panEnd = new Vector2();\n    const panDelta = new Vector2();\n\n    const dollyStart = new Vector2();\n    const dollyEnd = new Vector2();\n    const dollyDelta = new Vector2();\n\n    const getAutoRotationAngle = () => {\n      return 2 * Math.PI / 60 / 60 * this.autoRotateSpeed;\n    };\n\n    const getZoomScale = () => {\n      return Math.pow(0.95, this.zoomSpeed);\n    };\n\n    const rotateLeft = angle => {\n      sphericalDelta.theta -= angle;\n    };\n\n    const rotateUp = angle => {\n      sphericalDelta.phi -= angle;\n    };\n\n    const panLeft = (() => {\n      const v = new Vector3();\n\n      return (distance, objectMatrix) => {\n        v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n        v.multiplyScalar(-distance);\n        panOffset.add(v);\n      };\n    })();\n\n    const panUp = (() => {\n      const v = new Vector3();\n\n      return (distance, objectMatrix) => {\n        v.setFromMatrixColumn(objectMatrix, 1); // get Y column of objectMatrix\n        v.multiplyScalar(distance);\n        panOffset.add(v);\n      };\n    })();\n\n    // deltaX and deltaY are in pixels; right and down are positive\n    const pan = (() => {\n      const offset = new Vector3();\n\n      return (deltaX, deltaY) => {\n        const element = this.domElement === document ? this.domElement.body : this.domElement;\n\n        if (this.object instanceof PerspectiveCamera) {\n          // perspective\n          const position = this.object.position;\n          offset.copy(position).sub(this.target);\n          let targetDistance = offset.length();\n\n          // half of the fov is center to top of screen\n          targetDistance *= Math.tan((this.object.fov / 2) * Math.PI / 180.0);\n\n          // we actually don't use screenWidth, since perspective camera is fixed to screen height\n          panLeft(2 * deltaX * targetDistance / element.clientHeight, this.object.matrix);\n          panUp(2 * deltaY * targetDistance / element.clientHeight, this.object.matrix);\n        } else if (this.object instanceof OrthographicCamera) {\n          // orthographic\n          panLeft(deltaX * (this.object.right - this.object.left) / this.object.zoom / element.clientWidth, this.object.matrix);\n          panUp(deltaY * (this.object.top - this.object.bottom) / this.object.zoom / element.clientHeight, this.object.matrix);\n        } else {\n          // camera neither orthographic nor perspective\n          console.warn('WARNING: OrbitControlsModule.js encountered an unknown camera type - pan disabled.');\n          this.enablePan = false;\n        }\n      };\n    })();\n\n    const dollyIn = dollyScale => {\n      if (this.object instanceof PerspectiveCamera)\n        scale /= dollyScale;\n\n      else if (this.object instanceof OrthographicCamera) {\n        this.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom * dollyScale));\n        this.object.updateProjectionMatrix();\n        zoomChanged = true;\n      } else {\n        console.warn('WARNING: OrbitControlsModule.js encountered an unknown camera type - dolly/zoom disabled.');\n        this.enableZoom = false;\n      }\n    };\n\n    const dollyOut = dollyScale => {\n      if (this.object instanceof PerspectiveCamera)\n        scale *= dollyScale;\n\n      else if (this.object instanceof OrthographicCamera) {\n        this.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom / dollyScale));\n        this.object.updateProjectionMatrix();\n        zoomChanged = true;\n      } else {\n        console.warn('WARNING: OrbitControlsModule.js encountered an unknown camera type - dolly/zoom disabled.');\n        this.enableZoom = false;\n      }\n    };\n\n    //\n    // event callbacks - update the object state\n    //\n\n    const handleMouseDownRotate = event => {\n      // console.log( 'handleMouseDownRotate' );\n\n      rotateStart.set(event.clientX, event.clientY);\n    };\n\n    const handleMouseDownDolly = event => {\n      // console.log( 'handleMouseDownDolly' );\n\n      dollyStart.set(event.clientX, event.clientY);\n    };\n\n    const handleMouseDownPan = event => {\n      // console.log( 'handleMouseDownPan' );\n\n      panStart.set(event.clientX, event.clientY);\n    };\n\n    const handleMouseMoveRotate = event => {\n      // console.log( 'handleMouseMoveRotate' );\n\n      rotateEnd.set(event.clientX, event.clientY);\n      rotateDelta.subVectors(rotateEnd, rotateStart);\n\n      const element = this.domElement === document ? this.domElement.body : this.domElement;\n\n      // rotating across whole screen goes 360 degrees around\n      rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * this.rotateSpeed);\n\n      // rotating up and down along whole screen attempts to go 360, but limited to 180\n      rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * this.rotateSpeed);\n\n      rotateStart.copy(rotateEnd);\n\n      this.update();\n    };\n\n    const handleMouseMoveDolly = event => {\n      // console.log( 'handleMouseMoveDolly' );\n\n      dollyEnd.set(event.clientX, event.clientY);\n\n      dollyDelta.subVectors(dollyEnd, dollyStart);\n\n      if (dollyDelta.y > 0)\n        dollyIn(getZoomScale());\n\n      else if (dollyDelta.y < 0)\n        dollyOut(getZoomScale());\n\n      dollyStart.copy(dollyEnd);\n\n      this.update();\n    };\n\n    const handleMouseMovePan = event => {\n      // console.log( 'handleMouseMovePan' );\n\n      panEnd.set(event.clientX, event.clientY);\n\n      panDelta.subVectors(panEnd, panStart);\n\n      pan(panDelta.x, panDelta.y);\n\n      panStart.copy(panEnd);\n\n      this.update();\n    };\n\n    const handleMouseUp = event => {\n      // console.log( 'handleMouseUp' );\n    };\n\n    const handleMouseWheel = event => {\n      // console.log( 'handleMouseWheel' );\n\n      if (event.deltaY < 0)\n        dollyOut(getZoomScale());\n\n      else if (event.deltaY > 0)\n        dollyIn(getZoomScale());\n\n      this.update();\n    };\n\n    const handleKeyDown = event => {\n      // console.log( 'handleKeyDown' );\n\n      switch (event.keyCode) {\n        case this.keys.UP:\n          pan(0, this.keyPanSpeed);\n          this.update();\n          break;\n\n        case this.keys.BOTTOM:\n          pan(0, -this.keyPanSpeed);\n          this.update();\n          break;\n\n        case this.keys.LEFT:\n          pan(this.keyPanSpeed, 0);\n          this.update();\n          break;\n\n        case this.keys.RIGHT:\n          pan(-this.keyPanSpeed, 0);\n          this.update();\n          break;\n\n      }\n    };\n\n    const handleTouchStartRotate = event => {\n      // console.log( 'handleTouchStartRotate' );\n\n      rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n    };\n\n    const handleTouchStartDolly = event => {\n      // console.log( 'handleTouchStartDolly' );\n\n      const dx = event.touches[0].pageX - event.touches[1].pageX;\n      const dy = event.touches[0].pageY - event.touches[1].pageY;\n\n      const distance = Math.sqrt(dx * dx + dy * dy);\n\n      dollyStart.set(0, distance);\n    };\n\n    const handleTouchStartPan = event => {\n      // console.log( 'handleTouchStartPan' );\n\n      panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n    };\n\n    const handleTouchMoveRotate = event => {\n      // console.log( 'handleTouchMoveRotate' );\n\n      rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n      rotateDelta.subVectors(rotateEnd, rotateStart);\n\n      const element = this.domElement === document ? this.domElement.body : this.domElement;\n\n      // rotating across whole screen goes 360 degrees around\n      rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * this.rotateSpeed);\n\n      // rotating up and down along whole screen attempts to go 360, but limited to 180\n      rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * this.rotateSpeed);\n\n      rotateStart.copy(rotateEnd);\n\n      this.update();\n    };\n\n    const handleTouchMoveDolly = event => {\n      // console.log( 'handleTouchMoveDolly' );\n\n      const dx = event.touches[0].pageX - event.touches[1].pageX;\n      const dy = event.touches[0].pageY - event.touches[1].pageY;\n\n      const distance = Math.sqrt(dx * dx + dy * dy);\n\n      dollyEnd.set(0, distance);\n\n      dollyDelta.subVectors(dollyEnd, dollyStart);\n\n      if (dollyDelta.y > 0)\n        dollyOut(getZoomScale());\n\n      else if (dollyDelta.y < 0)\n        dollyIn(getZoomScale());\n\n      dollyStart.copy(dollyEnd);\n\n      this.update();\n    };\n\n    const handleTouchMovePan = event => {\n      // console.log( 'handleTouchMovePan' );\n\n      panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\n      panDelta.subVectors(panEnd, panStart);\n\n      pan(panDelta.x, panDelta.y);\n\n      panStart.copy(panEnd);\n\n      this.update();\n    };\n\n    const handleTouchEnd = () => {\n      // console.log( 'handleTouchEnd' );\n    };\n\n    //\n    // event handlers - FSM: listen for events and reset state\n    //\n\n    const onMouseDown = event => {\n      if (this.enabled === false) return;\n\n      event.preventDefault();\n\n      if (event.button === this.mouseButtons.ORBIT) {\n        if (this.enableRotate === false) return;\n\n        handleMouseDownRotate(event);\n\n        state = STATE.ROTATE;\n      } else if (event.button === this.mouseButtons.ZOOM) {\n        if (this.enableZoom === false) return;\n\n        handleMouseDownDolly(event);\n\n        state = STATE.DOLLY;\n      } else if (event.button === this.mouseButtons.PAN) {\n        if (this.enablePan === false) return;\n\n        handleMouseDownPan(event);\n\n        state = STATE.PAN;\n      }\n\n      if (state !== STATE.NONE) {\n        this.eventHandler.on('mousemove', onMouseMove, false);\n        this.eventHandler.on('mouseup', onMouseUp, false);\n\n        this.dispatchEvent(startEvent);\n      }\n    };\n\n    const onMouseMove = event => {\n      if (this.enabled === false) return;\n\n      event.preventDefault();\n\n      if (state === STATE.ROTATE) {\n        if (this.enableRotate === false) return;\n\n        handleMouseMoveRotate(event);\n      } else if (state === STATE.DOLLY) {\n        if (this.enableZoom === false) return;\n\n        handleMouseMoveDolly(event);\n      } else if (state === STATE.PAN) {\n        if (this.enablePan === false) return;\n\n        handleMouseMovePan(event);\n      }\n    };\n\n    const onMouseUp = event => {\n      if (this.enabled === false) return;\n\n      handleMouseUp(event);\n\n      document.removeEventListener('mousemove', onMouseMove, false);\n      document.removeEventListener('mouseup', onMouseUp, false);\n\n      this.dispatchEvent(endEvent);\n\n      state = STATE.NONE;\n    };\n\n    const onMouseWheel = event => {\n      if (this.enabled === false || this.enableZoom === false || (state !== STATE.NONE && state !== STATE.ROTATE)) return;\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      handleMouseWheel(event);\n\n      this.dispatchEvent(startEvent); // not sure why these are here...\n      this.dispatchEvent(endEvent);\n    };\n\n    const onKeyDown = event => {\n      if (this.enabled === false || this.enableKeys === false || this.enablePan === false) return;\n\n      handleKeyDown(event);\n    };\n\n    const onTouchStart = event => {\n      if (this.enabled === false) return;\n\n      switch (event.touches.length) {\n        case 1: // one-fingered touch: rotate\n\n          if (this.enableRotate === false) return;\n\n          handleTouchStartRotate(event);\n\n          state = STATE.TOUCH_ROTATE;\n\n          break;\n\n        case 2: // two-fingered touch: dolly\n\n          if (this.enableZoom === false) return;\n\n          handleTouchStartDolly(event);\n\n          state = STATE.TOUCH_DOLLY;\n\n          break;\n\n        case 3: // three-fingered touch: pan\n\n          if (this.enablePan === false) return;\n\n          handleTouchStartPan(event);\n\n          state = STATE.TOUCH_PAN;\n\n          break;\n\n        default:\n\n          state = STATE.NONE;\n\n      }\n\n      if (state !== STATE.NONE)\n        this.dispatchEvent(startEvent);\n    };\n\n    const onTouchMove = event => {\n      if (this.enabled === false) return;\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      switch (event.touches.length) {\n        case 1: // one-fingered touch: rotate\n\n          if (this.enableRotate === false) return;\n          if (state !== STATE.TOUCH_ROTATE) return; // is this needed?...\n\n          handleTouchMoveRotate(event);\n\n          break;\n\n        case 2: // two-fingered touch: dolly\n\n          if (this.enableZoom === false) return;\n          if (state !== STATE.TOUCH_DOLLY) return; // is this needed?...\n\n          handleTouchMoveDolly(event);\n\n          break;\n\n        case 3: // three-fingered touch: pan\n\n          if (this.enablePan === false) return;\n          if (state !== STATE.TOUCH_PAN) return; // is this needed?...\n\n          handleTouchMovePan(event);\n\n          break;\n\n        default:\n\n          state = STATE.NONE;\n\n      }\n    };\n\n    const onTouchEnd = event => {\n      if (this.enabled === false) return;\n\n      handleTouchEnd(event);\n\n      this.dispatchEvent(endEvent);\n\n      state = STATE.NONE;\n    };\n\n    const onContextMenu = event => {\n      event.preventDefault();\n    };\n\n    //\n\n    this.eventHandler.on('contextmenu', onContextMenu, false);\n\n    this.eventHandler.on('mousedown', onMouseDown, false);\n    this.eventHandler.on('wheel', onMouseWheel, false);\n\n    this.eventHandler.on('touchstart', onTouchStart, false);\n    this.eventHandler.on('touchend', onTouchEnd, false);\n    this.eventHandler.on('touchmove', onTouchMove, false);\n\n    this.eventHandler.on('keydown', onKeyDown, false);\n\n    // force an update at start\n\n    this.update();\n  }\n\n  get center() {\n    console.warn('OrbitControls: .center has been renamed to .target');\n    return this.target;\n  }\n\n  get noZoom() {\n    console.warn('OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\n    return !this.enableZoom;\n  }\n\n  set noZoom(value) {\n    console.warn('OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\n    this.enableZoom = !value;\n  }\n\n  get noRotate() {\n    console.warn('OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');\n    return !this.enableRotate;\n  }\n\n  set noRotate(value) {\n    console.warn('OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');\n    this.enableRotate = !value;\n  }\n\n  get noPan() {\n    console.warn('OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\n    return !this.enablePan;\n  }\n\n  set noPan(value) {\n    console.warn('OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\n    this.enablePan = !value;\n  }\n\n  get noKeys() {\n    console.warn('OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\n    return !this.enableKeys;\n  }\n\n  set noKeys(value) {\n    console.warn('OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\n    this.enableKeys = !value;\n  }\n\n  get staticMoving() {\n    console.warn('OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.');\n    return !this.enableDamping;\n  }\n\n  set staticMoving(value) {\n    console.warn('OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.');\n    this.enableDamping = !value;\n  }\n\n  get dynamicDampingFactor() {\n    console.warn('OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.');\n    return this.dampingFactor;\n  }\n\n  set dynamicDampingFactor(value) {\n    console.warn('OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.');\n    this.dampingFactor = value;\n  }\n}\n","import {Vector3} from 'three';\nimport {ControlsModule} from '../ControlsModule';\n\nimport {ThreeOrbitControls} from './lib/ThreeOrbitControls';\n\n/**\n * @class OrbitControlsModule\n * @category modules/app\n * @param {Object} [params]\n * @param {Object} [params.object=camera] Object to which controls are applied.\n * @param {THREE.Vector3} [params.target=new Vector3()] Controls center vector.\n * @param {Boolean} [params.follow=false] Follow the target\n * @memberof module:modules/app\n * @example <caption> Creating a rendering module and passing it to App's modules</caption>\n * new App([\n *   new ElementModule(),\n *   new SceneModule(),\n *   new DefineModule('camera', new WHS.PerspectiveCamera({\n *     position: new THREE.Vector3(0, 6, 18),\n *     far: 10000\n *   })),\n *   new RenderingModule(),\n *   new OrbitControlsModule()\n * ]);\n */\nexport class OrbitControlsModule extends ControlsModule {\n  constructor(params = {}) {\n    super(params);\n\n    this.params = Object.assign({\n      follow: false,\n      object: null,\n      target: new Vector3()\n    }, params);\n  }\n\n  manager(manager) {\n    super.manager(manager);\n\n    const {object: obj, follow, target} = this.params;\n    const object = obj ? obj.native : manager.get('camera').native;\n\n    const controls = new ThreeOrbitControls(\n      object,\n      manager.get('element'),\n      manager.handler\n    );\n\n    const updateProcessor = follow ? c => {\n      controls.update(c.getDelta());\n      controls.target.copy(target);\n    } : c => {\n      controls.update(c.getDelta());\n    };\n\n    this.setControls(controls);\n    this.setUpdate(updateProcessor);\n\n    manager.update({\n      camera: camera => {\n        if (obj) return;\n        controls.object = camera.native;\n      },\n      element: element => {\n        controls.domElement = element;\n      }\n    });\n\n    controls.target.copy(target);\n  }\n}\n","/** @module modules/app/controls */\nexport * from './OrbitControlsModule';\n","/** @module modules/app */\nexport * from './ElementModule';\nexport * from './RenderingModule';\nexport * from './SceneModule';\nexport * from './ResizeModule';\nexport * from './PostProcessorModule';\nexport * from './VirtualMouseModule';\nexport * from './EventsPatchModule';\nexport * from './ControlsModule';\nexport * from './FogModule';\nexport * from './StateModule';\n\n// controls\nexport * from './controls/index';\n","/**\n * @class DynamicGeometryModule\n * @category modules/mesh\n * @param {Object} [params={attributes: false}] - params\n * @param {Boolean} [patchEvents=true]\n * @memberof module:modules/mesh\n */\nexport class DynamicGeometryModule {\n  constructor(params = {}) {\n    this.params = Object.assign({\n      attributes: false\n    }, params);\n  }\n\n  integrate(self) {\n    const params = self.params;\n\n    this.g_ = function (params = {}) {\n      if (this.buildGeometry) {\n        this.native.geometry = this.buildGeometry(\n          this.updateParams({geometry: params})\n        );\n      }\n    };\n\n    if (params.attributes) {\n      for (const key in this.params.geometry) {\n        if (key) {\n          Object.defineProperty(this, `g_${key}`, {\n            get() {\n              return this.native.geometry.parameters[key];\n            },\n            set(value) {\n              this.native.geometry = this.buildGeometry(this.updateParams({geometry: {[key]: value}}));\n            },\n            configurable: true,\n            enumerable: true\n          });\n        }\n      }\n    }\n  }\n}\n","import {\n  RepeatWrapping,\n  UVMapping,\n  NearestFilter,\n  LinearMipMapLinearFilter,\n  TextureLoader,\n  Vector2\n} from 'three';\n\nconst loader = new TextureLoader();\n\n/**\n * @class TextureModule\n * @category modules/mesh\n * @description A TextureModule can be applied to any Mesh or Model.\n * @param {Array} [textures] - array of texture objects\n * @memberof module:modules/mesh\n * @example <caption>Creating an instance. url takes a path, or a data object.</caption>\n * var woodTexture = new TextureModule({\n *   url: `${process.assetsPath}/textures/wood.jpg`\n * });\n * @example <caption>More comprehensive example, wood texture applied to a Box.</caption>\n * new Box({\n *   geometry: {\n *     width: 2,\n *     height: 2,\n *     depth: 2\n *   },\n *   modules: [\n *     new TextureModule({\n *       url: `path/to/texture.jpg`,\n *       repeat: new THREE.Vector2(1, 1) // optional\n *     })\n *   ],\n *   material: new THREE.MeshBasicMaterial({\n *     color: 0xffffff\n *   }),\n *   position: [50, 60, 70]\n * }).addTo(app);\n */\nexport class TextureModule {\n  static load(url) {\n    return new TextureModule({url}).textures[0][1];\n  }\n\n  textures = [];\n\n  constructor(...textures) {\n    textures.forEach(({\n      url,\n      type = 'map',\n      offset = new Vector2(0, 0),\n      repeat = new Vector2(1, 1),\n      wrap = RepeatWrapping,\n      mapping = UVMapping,\n      fix = tex => tex\n    }) => {\n      const texture = loader.load(url);\n\n      if (wrap.length > 0) {\n        texture.wrapS = wrap[0];\n        texture.wrapT = wrap[1];\n      } else\n        texture.wrapS = texture.wrapT = wrap;\n\n      texture.mapping = mapping;\n\n      texture.offset.copy(offset);\n      texture.repeat.copy(repeat);\n\n      texture.magFilter = NearestFilter;\n      texture.minFilter = LinearMipMapLinearFilter;\n\n      this.textures.push([type, fix(texture)]);\n    });\n  }\n\n  bridge = {\n    material(material, self) {\n      self.textures.forEach(texture => {\n        material[texture[0]] = texture[1];\n      });\n\n      return material;\n    }\n  }\n}\n","import {\n  AnimationMixer,\n  AnimationClip,\n  Clock\n} from 'three';\n\nimport {Loop} from '../../core/Loop';\n\n/**\n * @class AnimationModule\n * @category modules/mesh\n * @description Convenience module that wraps the <a href='https://threejs.org/docs/#manual/introduction/Animation-system'>three.js animation system</a>\n * @param {App} app - the app\n * @param {Boolean} [isDeferred=false] - set to true if animation should not start automatically\n * @param {Object} [params={speed: 1}] - the params\n * @memberof module:modules/mesh\n * @example <caption>Create animation module and play a given clip of an imported model</caption>\n * const animationModule = new AnimationModule(app, false, {\n *   speed: 1.2 // speed up animation by 20%\n * });\n *\n * new Importer({\n *   parser(geometry, materials) {\n *     // Override parse to generate a skinnedMesh, needed for skinned models\n *     return new THREE.SkinnedMesh(geometry, materials);\n *   },\n *\n *   url: `path/to/model.json`,\n *   useCustomMaterial: true,\n *\n *   material: new THREE.MeshStandardMaterial({\n *     skinning: true\n *   }),\n *\n *   modules: [animationModule]\n * }).addTo(app).then(() => {\n *   // adding model to app returns a promise, so pipe the function to kick off the animation clip\n *   animationModule.play('clipName');\n * });\n */\nexport class AnimationModule {\n  constructor(app, isDeferred, params = {}) {\n    this.params = Object.assign({\n      speed: 1\n    }, params);\n    this.clock = new Clock();\n\n    this.app = app;\n    this.isDeferred = isDeferred;\n  }\n\n  /**\n   * @method play\n   * @instance\n   * @description Plays the given clip name\n   * @param {String} clipName - the clip to play\n   * @memberof module:modules/mesh.AnimationModule\n   */\n  play(clipName) {\n    const clip = AnimationClip.findByName(this.clips, clipName);\n    const action = this.mixer.clipAction(clip);\n\n    action.play();\n  }\n\n  /**\n   * @method update\n   * @instance\n   * @description Update the mixer (being called on frame animation loop)\n   * @memberof module:modules/mesh.AnimationModule\n   */\n  update() {\n    if (this.mixer) this.mixer.update(this.clock.getDelta() * this.params.speed);\n  }\n\n  integrate(self) {\n    self.loop = new Loop(() => {\n      self.update();\n    });\n\n    if (!self.isDeferred) self.loop.start(self.app);\n  }\n\n  manager(manager) {\n    manager.define('animation');\n  }\n\n  bridge = {\n    mesh(mesh, self) {\n      mesh.geometry.skeleton = mesh.skeleton;\n\n      self.mixer = new AnimationMixer(mesh.geometry);\n      self.clips = mesh.geometry.animations;\n\n      return mesh;\n    }\n  }\n}\n","/** @module modules/mesh */\nexport * from './DynamicGeometryModule';\nexport * from './TextureModule';\nexport * from './AnimationModule';\n","/**\n * @class DefineModule\n * @category modules\n * @param {String} name\n * @param {Object} data\n * @memberof module:modules\n * @example <caption> Creating a DefineModule with PerspectiveCamera as camera module and passing it to App's modules</caption>\n * new App([\n *   // ...\n *   new DefineModule('camera', new PerspectiveCamera())\n * ]);\n */\nexport class DefineModule {\n  constructor(name, data) {\n    this.name = name;\n    this.data = data;\n  }\n\n  manager(manager) {\n    manager.set(this.name, this.data);\n  }\n}\n","/** @module modules */\n\nexport * from './app/index';\nexport * from './mesh/index';\n\n// modules\nexport * from './DefineModule';\n","import {Importer} from './components/meshes/Importer';\nimport {PerspectiveCamera} from './components/cameras/PerspectiveCamera';\n\nexport class Model extends Importer {\n  constructor(params, ...additional) {\n    console.warn('Model is deprecated. Use Importer instead.');\n\n    if (params.geometry) {\n      params.url = params.geometry.path;\n      params.loader = params.geometry.loader;\n    }\n\n    super(params, ...additional);\n  }\n}\n\nexport class CameraModule {\n  constructor(params = {}) {\n    console.warn('CameraModule is deprecated. Use DefineModule instead.');\n    this.camera = new PerspectiveCamera(params);\n  }\n\n  integrate(self) {\n    this.add(self.camera);\n  }\n\n  manager(manager) {\n    manager.set('camera', this.camera);\n  }\n}\n","/**\n * Namespace containing all classes from all modules. Used as global in UMD pattern.\n * @namespace WHS\n * @example <caption>The use of WHS namespace.</caption>\n * new WHS.App() // core\n * new WHS.PerspectiveCamera() // components\n * new WHS.ResizeModule() // modules\n * WHS.extend() // utils\n */\n\n\nexport * from './core/index';\nexport * from './components/lights/index';\nexport * from './components/cameras/index';\nexport * from './components/meshes/index';\nexport * from './utils/index';\nexport * from './modules/index';\n\n// DEPRECATION\nexport * from './deprecation';\n"],"names":["extend","object","extensions","extension","Object","getOwnPropertyNames","prop","undefined","toString","constructor","Array","isArray","slice","instruct","array","instArray","tempObject","i","max","length","guide","transformData","instructions","key","toArray","instruction","tempArray","CompositionError","classInstance","message","component","stackArray","stack","split","splice","join","console","error","name","Error","DependencyError","activeModule","dependencyModule","ManagerError","warnDeps","REVISION","err","ModuleSystem","source","modules","applyModule","applyBridge","onCopy","bridgeMap","module","bridge","apply","cb","func","moduleScope","push","manager","active","integrate","bind","disposeModule","indexOf","dispose","Events","Symbol","objectProto","hasOwnProperty","symToStringTag","nativeObjectToString","root","ponyfill","$$observable","ModuleManager","handler","currentModule","store","createStore","state","action","data","dispatch","getState","Boolean","depsMap","subscribe","changedKey","callback","warn","set","moduleExecutor","use","Component","params","defaults","_wait","children","integrateModules","promise","Promise","all","isDeffered","wait","then","copy","customize","native","clone","parent","resolve","reject","defer","addPromise","onAdd","resolver","add","remove","_manager","_native","mesh","attributes","mappers","target","mapper","k","map","attribute","defineProperty","prototype","getter","setter","configurable","enumerable","value","mirror","MeshComponent","geom","Mesh","material","geometry","custom","build","wrap","applyCommand","position","rotation","scale","shadow","x","y","z","castShadow","cast","receiveShadow","receive","onWrap","quaternion","dest","LightComponent","light","wrapShadow","mapSize","width","height","bias","radius","shadowCamera","camera","near","far","fov","left","right","top","bottom","CameraComponent","system","window","global","App","log","version","enabled","loops","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","setTimeout","process","ll","e","execute","clock","loop","index","get","Loop","useClock","Clock","world","addLoop","start","stop","removeLoop","AmbientLight","AmbientLightNative","color","intensity","DirectionalLight","DirectionalLightNative","HemisphereLight","HemisphereLightNative","skyColor","groundColor","PointLight","PointLightNative","distance","decay","SpotLight","SpotLightNative","angle","exponent","Math","PI","AreaLight","RectAreaLightNative","CubeCamera","CubeCameraNative","cubeResolution","OrthographicCamera","OrthographicCameraNative","innerWidth","innerHeight","PerspectiveCamera","PerspectiveCameraNative","aspect","Box","buildGeometry","buffer","BoxBufferGeometry","BoxGeometry","depth","widthSegments","heightSegments","depthSegments","Circle","CircleBufferGeometry","CircleGeometry","segments","thetaStart","thetaLength","Cone","ConeBufferGeometry","ConeGeometry","radiusSegments","openEnded","Cylinder","CylinderBufferGeometry","CylinderGeometry","radiusTop","radiusBottom","Dodecahedron","DodecahedronBufferGeometry","DodecahedronGeometry","detail","Extrude","ExtrudeGeometry","shapes","options","BufferGeometry","fromGeometry","Icosahedron","IcosahedronBufferGeometry","IcosahedronGeometry","Lathe","LatheBufferGeometry","LatheGeometry","points","Line","LineNative","Geometry","pp","curve","getPoints","verts","Float32Array","i3","addAttribute","BufferAttribute","vertices","Importer","filter","processFilter","forEach","el","texturePath","loader","setTexturePath","load","url","onLoad","parser","onProgress","onError","JSONLoader","mat","Octahedron","OctahedronBufferGeometry","OctahedronGeometry","Parametric","ParametricBufferGeometry","ParametricGeometry","slices","stacks","u","v","Vector3","Plane","PlaneBufferGeometry","PlaneGeometry","wSegments","hSegments","verticesOfCube","indicesOfFaces","Polyhedron","PolyhedronBufferGeometry","PolyhedronGeometry","Ring","RingBufferGeometry","RingGeometry","innerRadius","outerRadius","thetaSegments","phiSegments","Shape","ShapeBufferGeometry","ShapeGeometry","Sphere","SphereBufferGeometry","SphereGeometry","Tetrahedron","TetrahedronBufferGeometry","TetrahedronGeometry","Text","path","font","TextGeometry","text","assign","Font","FontLoader","Torus","TorusGeometry","tube","radialSegments","tubularSegments","arc","Torusknot","GConstruct","TorusKnotBufferGeometry","TorusKnotGeometry","p","q","Tube","TubeBufferGeometry","TubeGeometry","closed","LineCurve3","Group","objects","obj","addTo","Object3D","ElementModule","container","document","body","createElement","element","className","style","self","appendChild","RenderingModule","additional","Vector2","devicePixelRatio","bgColor","bgOpacity","renderer","pixelRatio","resolution","fix","WebGLRenderer","effects","setClearColor","setPixelRatio","setSize","Number","toFixed","applyAdditional","scene","attachToCanvas","render","effect","effectLoop","renderLoop","size","getSize","app","canvas","domElement","define","integrateRenderer","update","forceContextLoss","shadowMap","SceneModule","willSceneBeReplaced","Scene","setScene","ResizeModule","callbacks","updateProjectionMatrix","rendering","offsetWidth","offsetHeight","getContainer","getResolution","auto","addEventListener","trigger","addAutoresize","fragment","vertex","AdaptiveLuminosityMaterial","Uniform","ShaderMaterial","BokehMaterial","focus","aperture","maxBlur","adoptCameraSettings","uniforms","cameraNear","cameraFar","Bokeh2Material","rings","samples","showFocus","manualDoF","vignette","pentagon","shaderFocus","noise","defines","SHOW_FOCUS","MANUAL_DOF","VIGNETTE","PENTAGON","SHADER_FOCUS","NOISE","texelSize","setTexelSize","halfTexelSize","multiplyScalar","focalLength","getFocalLength","CombineMaterial","screenMode","SCREEN_MODE","ConvolutionMaterial","kernelSize","KernelSize","LARGE","kernelPresets","CopyMaterial","DepthMaterial","DotScreenMaterial","average","Vector4","AVERAGE","FilmMaterial","scanlines","greyscale","sepia","eskil","noiseIntensity","scanlineIntensity","greyscaleIntensity","sepiaIntensity","vignetteOffset","vignetteDarkness","GREYSCALE","SEPIA","ESKIL","SCANLINES","GlitchMaterial","GodRaysMaterial","LuminosityMaterial","range","COLOR","RANGE","PixelationMaterial","granularity","dx","dy","ShockWaveMaterial","maxRadius","waveSize","amplitude","SMAABlendMaterial","SMAAColorEdgesMaterial","SMAAWeightsMaterial","areaImage","searchImage","ToneMappingMaterial","Pass","quad","frustumCulled","needsSwap","renderToScreen","readBuffer","writeBuffer","delta","maskActive","alpha","keys","BlurPass","renderTargetX","WebGLRenderTarget","LinearFilter","texture","generateMipmaps","renderTargetY","resolutionScale","convolutionMaterial","kernel","getKernel","lastRT","destRT","l","tDiffuse","format","RGBFormat","floor","BloomPass","blurPass","renderTarget","combineMaterial","luminosityMaterial","distinction","texture1","texture2","initialise","opacity2","BokehPass","bokehMaterial","tDepth","depthTexture","Bokeh2Pass","ClearMaskPass","buffers","stencil","setTest","Color","ClearPass","clearColor","clearAlpha","getClearColor","getClearAlpha","setRenderTarget","clear","DotScreenPass","offsetRepeat","w","DepthPass","depthMaterial","FilmPass","scanlineDensity","time","scanlineCount","round","randomInt","low","high","random","randomFloat","GlitchPass","perturbMap","generatePerturbMap","dtSize","mode","GlitchMode","SPORADIC","counter","breakPoint","pixels","dt","DataTexture","FloatType","needsUpdate","seed","CONSTANT_WILD","amount","seedX","seedY","distortionX","distortionY","CONSTANT_MILD","tPerturb","RenderPass","clearPass","overrideMaterial","clearDepth","clamp","min","GodRaysPass","lightSource","lightScene","mainScene","mainCamera","renderPassLight","renderPassMask","MeshBasicMaterial","renderTargetMask","screenPosition","godRaysMaterial","lightPosition","exposure","density","weight","clampMax","background","project","parseInt","NUM_SAMPLES_INT","NUM_SAMPLES_FLOAT","MaskPass","inverse","clearStencil","context","writeValue","clearValue","setMask","setLocked","setOp","REPLACE","setFunc","ALWAYS","setClear","EQUAL","KEEP","PixelationPass","pixelationMaterial","setResolution","SavePass","resize","ShaderPass","textureID","HALF_PI","ab","ShockWavePass","epicenter","speed","shockWaveMaterial","center","copyMaterial","getWorldDirection","sub","angleTo","cameraDistance","distanceTo","SMAAPass","Image","renderTargetColorEdges","renderTargetWeights","RGBAFormat","colorEdgesMaterial","weightsMaterial","src","areaTexture","Texture","image","minFilter","flipY","searchTexture","magFilter","NearestFilter","tArea","tSearch","blendMaterial","tWeights","TexturePass","opacity","blending","AdditiveBlending","transparent","ceil2","n","pow","ceil","log2","ToneMappingPass","renderTargetLuminosity","LinearMipMapLinearFilter","renderTargetAdapted","renderTargetPrevious","adaptiveLuminosityMaterial","toneMappingMaterial","adaptive","tPreviousLum","tCurrentLum","MIP_LEVEL_1X1","ADAPTED_LUMINANCE","luminanceMap","EffectComposer","autoClear","createBuffer","depthBuffer","stencilBuffer","copyPass","passes","oldRenderer","oldSize","newSize","parentNode","removeChild","getPixelRatio","getContextAttributes","DepthTexture","DepthStencilFormat","type","UnsignedInt248Type","pass","stencilFunc","NOTEQUAL","pop","polyfill","method","showWarn","PostProcessorModule","currentPass","debug","composer","getDelta","replaceRenderer","addPass","bool","EventsPatchModule","originObject","destObject","events","event","emit","patchEvents","VirtualMouseModule","globalMovement","mouse","raycaster","Raycaster","projectionPlane","customX","customY","rect","getBoundingClientRect","clientX","clientY","normal","setFromCamera","require","on","ev","globalX","globalY","pointerLockElement","movementX","movementY","nested","isHovered","hovers","traverse","child","intersectObjects","intersectObject","plane","ray","intersectPlane","intersection","ControlsModule","controls","c","updateLoop","FogModule","fog","FogExp2","Fog","isEqualDefault","a","b","equals","StateModule","isEqual","equalCheck","actionGenerate","configuration","currentConfig","prevConfig","config","default","replaceReducer","configs","updates","configName","trueVal","falseVal","ThreeOrbitControls","eventHandler","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ORBIT","MOUSE","ZOOM","MIDDLE","PAN","target0","position0","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","reset","dispatchEvent","changeEvent","STATE","NONE","offset","quat","Quaternion","setFromUnitVectors","up","quatInverse","lastPosition","lastQuaternion","applyQuaternion","setFromVector3","rotateLeft","getAutoRotationAngle","sphericalDelta","makeSafe","panOffset","setFromSpherical","lookAt","zoomChanged","distanceToSquared","EPS","dot","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","onKeyDown","startEvent","endEvent","ROTATE","DOLLY","TOUCH_ROTATE","TOUCH_DOLLY","TOUCH_PAN","Spherical","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","rotateUp","panLeft","objectMatrix","setFromMatrixColumn","panUp","pan","deltaX","deltaY","targetDistance","tan","clientHeight","matrix","clientWidth","dollyIn","dollyScale","dollyOut","handleMouseDownRotate","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","subVectors","handleMouseMoveDolly","handleMouseMovePan","handleMouseUp","handleMouseWheel","handleKeyDown","keyCode","handleTouchStartRotate","touches","pageX","pageY","handleTouchStartDolly","sqrt","handleTouchStartPan","handleTouchMoveRotate","handleTouchMoveDolly","handleTouchMovePan","handleTouchEnd","preventDefault","button","stopPropagation","EventDispatcher","OrbitControlsModule","follow","updateProcessor","setControls","setUpdate","DynamicGeometryModule","g_","updateParams","parameters","TextureLoader","TextureModule","textures","repeat","RepeatWrapping","mapping","UVMapping","tex","wrapS","wrapT","AnimationModule","isDeferred","skeleton","mixer","AnimationMixer","clips","animations","clipName","clip","AnimationClip","findByName","clipAction","play","DefineModule","Model","CameraModule"],"mappings":"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"}