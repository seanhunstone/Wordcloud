{"version":3,"file":"DragModule.js","sources":["../src/modules/extra/DragModule.js"],"sourcesContent":["import {Vector3} from 'three';\n\nclass MeshDragModule {\n  constructor(mouse) {\n    this.mouse = mouse;\n    this.offset = new Vector3();\n  }\n\n  postIntegrate(self) {\n    this.defer(() => {\n      const {mouse, offset} = self;\n      mouse.track(this);\n\n      offset.copy(this.position);\n\n      let dragPossible = false;\n\n      this.on('mousedown', () => {\n        dragPossible = true;\n        offset.copy(this.position.clone().sub(mouse.project()));\n      });\n\n      mouse.on('mouseup', () => {dragPossible = false});\n\n      mouse.on('move', () => {\n        if (dragPossible) this.position.copy(mouse.project().add(offset));\n      });\n    });\n  }\n}\n\nexport default class DragModule {\n  constructor() {\n    this.mouse = null;\n  }\n\n  manager(manager) {\n    manager.define('drag');\n    this.mouse = manager.use('mouse');\n  }\n\n  mesh() {\n    return new MeshDragModule(this.mouse);\n  }\n}\n"],"names":["MeshDragModule","mouse","offset","Vector3","self","defer","track","copy","position","dragPossible","on","clone","sub","project","add","DragModule","manager","define","use"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAEMA;0BACQC,KAAZ,EAAmB;;;SACZA,KAAL,GAAaA,KAAb;SACKC,MAAL,GAAc,IAAIC,aAAJ,EAAd;;;;;kCAGYC,MAAM;;;WACbC,KAAL,CAAW,YAAM;YACRJ,KADQ,GACSG,IADT,CACRH,KADQ;YACDC,MADC,GACSE,IADT,CACDF,MADC;;cAETI,KAAN;;eAEOC,IAAP,CAAY,MAAKC,QAAjB;;YAEIC,eAAe,KAAnB;;cAEKC,EAAL,CAAQ,WAAR,EAAqB,YAAM;yBACV,IAAf;iBACOH,IAAP,CAAY,MAAKC,QAAL,CAAcG,KAAd,GAAsBC,GAAtB,CAA0BX,MAAMY,OAAN,EAA1B,CAAZ;SAFF;;cAKMH,EAAN,CAAS,SAAT,EAAoB,YAAM;yBAAgB,KAAf;SAA3B;;cAEMA,EAAN,CAAS,MAAT,EAAiB,YAAM;cACjBD,YAAJ,EAAkB,MAAKD,QAAL,CAAcD,IAAd,CAAmBN,MAAMY,OAAN,GAAgBC,GAAhB,CAAoBZ,MAApB,CAAnB;SADpB;OAfF;;;;;;IAsBiBa;wBACL;;;SACPd,KAAL,GAAa,IAAb;;;;;4BAGMe,UAAS;eACPC,MAAR,CAAe,MAAf;WACKhB,KAAL,GAAae,SAAQE,GAAR,CAAY,OAAZ,CAAb;;;;2BAGK;aACE,IAAIlB,cAAJ,CAAmB,KAAKC,KAAxB,CAAP;;;;;;;;;;;;"}